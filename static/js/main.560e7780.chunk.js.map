{"version":3,"sources":["actions/actions.js","components/AudioEngine.js","components/PowerSwitch.js","components/Label.js","components/KnobControl.js","components/FaderControl.js","components/WaveformSelector.js","localStorage.js","reducers/reducers.js","store/index.js","components/PresetButton.js","presets.js","components/PresetManager.js","components/Oscilloscope.js","components/Controls.js","components/Base.js","components/BottomBar.js","components/ShareModal.js","components/Onboarding/ControlBar.js","components/Onboarding/AnimatedText.js","components/Onboarding/Onboarding.js","App.js","serviceWorker.js","index.js"],"names":["setParam","module","moduleIndex","param","value","type","setPower","active","loadPreset","preset","setPreset","pressNote","note","velocity","tick","updateCurrentTime","currentTime","updateOscilloscope","dataArray","onboardingAnimationComplete","onboardingFinish","onboardingNextStep","onboardingReset","sharePatch","patchLink","closeShareModal","AudioEngine","props","state","playing","audioCtx","AudioContext","vco","vcoGain","gain","createGain","envelope","biquadFilter","createBiquadFilter","frequency","filter","Q","resonance","compressor","createDynamicsCompressor","analyzer","createAnalyser","fftSize","oscilloscope","analyzerBufferLength","frequencyBinCount","Float32Array","connect","destination","pressedNotes","setInterval","getFloatTimeDomainData","key","toLowerCase","midiAccess","this","inputs","values","onmidimessage","getMIDIMessage","bind","midiMessage","data","transform","noteName","midi","playNote","releaseNote","ctx","triggerEnvelope","indexOf","push","tonal","baseFrequency","getBaseFrequency","forEach","i","getVCOFrequency","general","glide","cancelScheduledValues","setValueAtTime","linearRampToValueAtTime","keyIndex","index","arr","length","keyboard","releaseEnvelope","octave","pc","oct","freq","cents","fineTuned","semitones","a","Math","pow","transposeFrequencyBySemitones","detune","console","log","window","addEventListener","onKeyDown","onKeyUp","navigator","requestMIDIAccess","then","onMIDISuccess","onMIDIFailure","e","midiCode","mapKeyboardToMidi","keyPressed","time","keys","floor","_this","startVCO","stopVCO","createOscillator","start","stop","release","filterEnvelope","startTime","startFrequency","attack","minv","maxv","scale","attackFrequency","exp","intensity","sustainFrequency","sustain","exponentialRampToValueAtTime","setTargetAtTime","getTimeConstant","decay","releaseConstant","nextProps","power","powerOn","powerOff","amp","React","Component","dispatch","bindActionCreators","Lamp","styled","div","Container","Track","Knob","PowerSwitch","prevProps","Audio","play","style","background","onClick","toggle","marginLeft","defaultProps","Inner","KnobInner","KnobBase","size","Pointer","Value","motion","ValueVariants","hidden","opacity","visible","KnobControl","rotate","getRotation","dragging","setState","freezeValue","freezeRotation","document","onMouseMove","onMouseUp","removeEventListener","getRotationLog","getRotationLin","min","max","minDeg","maxDeg","minV","event","dragStartY","clientY","touches","position","getValueLog","getValueLin","degreePerPixel","delta","shiftKey","newValue","getValue","snap","round","default","onDoubleClick","onTouchStart","onMouseDown","Label","label","initial","animate","variants","transition","damping","stiffness","delay","toFixed","decimals","unit","Scale","align","Background","knobHeight","Tick","Outer","Grip","FaderControl","defaultValue","y","increase","abs","ticks","renderScale","getTransform","Labels","ShapeImage","shapeSVG","sine","width","height","viewBox","version","xmlns","id","stroke","strokeWidth","fill","fillRule","strokeLinecap","d","triangle","strokeLinejoin","points","sawtooth","square","WaveformSelector","shapes","audio","map","s","select","stepSize","diff","newVal","getIndex","bb","target","getBoundingClientRect","top","handleTrackClick","stopPropagation","getShapes","getPresets","serializedState","localStorage","getItem","JSON","parse","err","defaultState","meta","presetName","onboarding","finished","onboardingState","getOnboardingState","currentStep","animating","shareModal","pitch","sequencer","tempo","gate","steps","reducers","action","store","createStore","combineReducers","colors","Base","color","handleClick","presets","PresetManager","fetch","loadFromUrl","href","location","hash","decodeURIComponent","substring","loadState","dispatchEvent","Event","presetIndex","findIndex","p","getPresetIndex","stringify","setItem","savePreset","getState","confirm","element","createElement","setAttribute","encodeURIComponent","display","body","appendChild","click","removeChild","buttons","PresetButton","renderButtons","Display","Canvas","canvas","canvasRef","useRef","useEffect","current","context","getContext","clearRect","requestId","render","x","lineWidth","strokeStyle","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","beginPath","last","period","sliceWidth","j","moveTo","lineTo","requestAnimationFrame","cancelAnimationFrame","ref","Row","Column","ModuleLabel","h2","ModuleContent","Module","flex","Controls","className","Wood","Header","Panel","backgroundImage","alt","src","Item","show","setPatchLink","exit","duration","patch","string","long_url","url","method","headers","Headers","Authorization","res","json","result","link","error","alert","rel","Overlay","Modal","CopyButton","button","Input","input","Close","Title","SocialShare","Link","Description","ShareOptions","useState","copyLabel","setCopyLabel","onAnimationComplete","readonly","el","left","execCommand","CounterContainer","CurrentPageContainer","Page","TotalSteps","ArrowButtonContainer","circleMotion","rest","strokeDasharray","strokeDashoffset","hover","loading","arrowMotion","translateX","tap","times","ArrowButton","onTap","onHoverStart","onHoverEnd","onTapStart","setTimeout","cx","cy","r","circle","mass","path","ControlBar","prevStep","totalSteps","onPressNext","setOnboardingState","renderCounter","Headline","h1","Paragraph","HeadlineContainer","ParagraphContainer","Bar","bar","animation","ImageContainer","Image","ImageLabel","ImageSmallLabel","AnimatedText","headlineBarCount","paragraphBarCount","paragraph","headline","images","headlineHeight","headlineContainer","ceil","paragraphHeight","paragraphContainer","barHeight","containerHeight","container","barCount","isVisible","count","restTime","inOutRelative","ease","callback","getTransition","Array","b","right","isCurrent","content","wrapper","lineCount","Wrapper","item","animationComplete","text","image","small","children","getBars","getText","getImages","AppContainer","SynthContainer","clickable","PhoneContainer","onboardingSmall","isClient","getSize","innerWidth","undefined","innerHeight","windowSize","setWindowSize","handleResize","useWindowSize","ShareModal","Boolean","hostname","match","ReactDOM","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.560e7780.chunk.js","sourcesContent":["export const setParam = (module, moduleIndex, param, value) => ({\n\ttype: \"SET_PARAM\",\n\tvalue,\n\tmodule,\n\tmoduleIndex,\n\tparam,\n});\n\nexport const setPower = (active) => ({\n\ttype: \"SET_POWER\",\n\tactive,\n});\n\nexport const loadPreset = (preset) => ({\n\ttype: \"LOAD_PRESET\",\n\tpreset,\n});\n\nexport const setPreset = (preset) => ({\n\ttype: \"SET_PRESET\",\n\tpreset,\n});\n\nexport const pressNote = (note, velocity = 1) => ({\n\ttype: \"PRESS_NOTE\",\n\tnote,\n\tvelocity,\n});\n\nexport const tick = () => ({\n\ttype: \"TICK\",\n});\n\nexport const updateCurrentTime = (currentTime) => ({\n\ttype: \"UPDATE_CURRENT_TIME\",\n\tcurrentTime,\n});\n\nexport const updateOscilloscope = (dataArray, currentTime) => ({\n\ttype: \"UPDATE_OSCILLOSCOPE\",\n\tdataArray,\n\tcurrentTime,\n});\n\nexport const onboardingAnimationComplete = () => ({\n\ttype: \"ONBOARDING_ANIMATION_COMPLETE\",\n});\n\nexport const onboardingFinish = () => ({\n\ttype: \"ONBOARDING_FINISH\",\n});\n\nexport const onboardingNextStep = () => ({\n\ttype: \"ONBOARDING_NEXT_STEP\",\n});\nexport const onboardingReset = () => ({\n\ttype: \"ONBOARDING_RESET\",\n});\n\nexport const sharePatch = (patchLink) => ({\n\ttype: \"SHARE_PATCH\",\n\tpatchLink,\n});\n\nexport const closeShareModal = () => ({\n\ttype: \"CLOSE_SHARE_MODAL\",\n});\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n\ttick,\n\tpressNote,\n\tupdateOscilloscope,\n\tupdateCurrentTime,\n} from \"../actions/actions.js\";\nimport { bindActionCreators } from \"redux\";\nimport { transform } from \"framer-motion\";\nimport * as midi from \"@tonaljs/midi\";\nimport * as tonal from \"@tonaljs/tonal\";\nimport { AudioContext } from \"standardized-audio-context\";\n\nconst transposeFrequencyByCents = (frequency, cents) => {\n\tconst freq = frequency * Math.pow(2, cents / 1200);\n\treturn freq;\n};\nconst transposeFrequencyBySemitones = (frequency, semitones) => {\n\tconst a = Math.pow(2, 1 / 12);\n\treturn frequency * Math.pow(a, semitones);\n};\n\nclass AudioEngine extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tplaying: false,\n\t\t};\n\n\t\tthis.audioCtx = new AudioContext();\n\t\tthis.vco = [];\n\t\tthis.vcoGain = [];\n\n\t\tthis.gain = this.audioCtx.createGain();\n\t\tthis.envelope = this.audioCtx.createGain();\n\t\tthis.envelope.gain.value = 0;\n\n\t\tthis.biquadFilter = this.audioCtx.createBiquadFilter();\n\t\tthis.biquadFilter.type = \"lowpass\";\n\t\tthis.biquadFilter.frequency.value = props.filter.frequency;\n\t\tthis.biquadFilter.gain.value = 0;\n\t\tthis.biquadFilter.Q.value = props.filter.resonance / 4;\n\n\t\tthis.compressor = this.audioCtx.createDynamicsCompressor();\n\n\t\tthis.analyzer = this.audioCtx.createAnalyser();\n\t\tthis.analyzer.fftSize = props.oscilloscope.fftSize;\n\t\tthis.analyzerBufferLength = this.analyzer.frequencyBinCount;\n\t\tvar dataArray = new Float32Array(this.analyzer.fftSize);\n\n\t\tthis.biquadFilter.connect(this.envelope);\n\t\tthis.envelope.connect(this.analyzer);\n\n\t\tthis.analyzer.connect(this.gain);\n\n\t\tthis.gain.connect(this.compressor);\n\t\tthis.compressor.connect(this.audioCtx.destination);\n\n\t\tthis.pressedNotes = [];\n\n\t\tsetInterval(() => {\n\t\t\tthis.analyzer.getFloatTimeDomainData(dataArray);\n\t\t\tprops.updateOscilloscope(dataArray, this.audioCtx.currentTime);\n\t\t}, 1000 / 60);\n\t}\n\n\tmapKeyboardToMidi(key) {\n\t\tswitch (key.toLowerCase()) {\n\t\t\tcase \"a\":\n\t\t\t\treturn 48;\n\t\t\tcase \"w\":\n\t\t\t\treturn 49;\n\t\t\tcase \"s\":\n\t\t\t\treturn 50;\n\t\t\tcase \"e\":\n\t\t\t\treturn 51;\n\t\t\tcase \"d\":\n\t\t\t\treturn 52;\n\t\t\tcase \"f\":\n\t\t\t\treturn 53;\n\t\t\tcase \"t\":\n\t\t\t\treturn 54;\n\t\t\tcase \"g\":\n\t\t\t\treturn 55;\n\t\t\tcase \"y\":\n\t\t\t\treturn 56;\n\t\t\tcase \"h\":\n\t\t\t\treturn 57;\n\t\t\tcase \"u\":\n\t\t\t\treturn 58;\n\t\t\tcase \"j\":\n\t\t\t\treturn 59;\n\t\t\tcase \"k\":\n\t\t\t\treturn 60;\n\t\t\tcase \"o\":\n\t\t\t\treturn 61;\n\t\t\tcase \"l\":\n\t\t\t\treturn 62;\n\t\t\tcase \"p\":\n\t\t\t\treturn 63;\n\t\t\tcase \";\":\n\t\t\t\treturn 64;\n\t\t\tcase \"Dead\":\n\t\t\t\treturn 65;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\tonMIDISuccess(midiAccess) {\n\t\tthis.inputs = midiAccess.inputs;\n\n\t\tfor (var input of midiAccess.inputs.values()) {\n\t\t\tinput.onmidimessage = this.getMIDIMessage.bind(this);\n\t\t}\n\t}\n\n\tgetMIDIMessage(midiMessage) {\n\t\tconst note = midiMessage.data[1];\n\t\tconst velocity = transform(midiMessage.data[2], [1, 127], [0, 1]);\n\t\tconst noteName = midi.midiToNoteName(note);\n\n\t\tswitch (midiMessage.data[0]) {\n\t\t\tcase 144:\n\t\t\t\tthis.playNote(noteName, velocity);\n\t\t\t\tbreak;\n\t\t\tcase 128:\n\t\t\t\tthis.releaseNote(noteName);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tplayNote(noteName, velocity = 1) {\n\t\tconst ctx = this.audioCtx;\n\n\t\tthis.triggerEnvelope(velocity);\n\n\t\tif (this.pressedNotes.indexOf(noteName) === -1)\n\t\t\tthis.pressedNotes.push(noteName); // dont add key if already in\n\t\tconst note = tonal.note(noteName);\n\n\t\tthis.props.pressNote(note, velocity);\n\n\t\tconst baseFrequency = this.getBaseFrequency(note);\n\n\t\tthis.vco.forEach((vco, i) => {\n\t\t\tconst frequency = this.getVCOFrequency(i, baseFrequency);\n\n\t\t\tif (this.envelope.gain.value > 0.1 && this.props.general.glide) {\n\t\t\t\tvco.frequency.cancelScheduledValues(ctx.currentTime);\n\t\t\t\tvco.frequency.setValueAtTime(vco.frequency.value, ctx.currentTime);\n\t\t\t\tvco.frequency.linearRampToValueAtTime(\n\t\t\t\t\tfrequency,\n\t\t\t\t\tctx.currentTime + this.props.general.glide\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tvco.frequency.setValueAtTime(frequency, ctx.currentTime);\n\t\t\t}\n\t\t});\n\t}\n\n\treleaseNote(noteName) {\n\t\tconst keyIndex = this.pressedNotes.indexOf(noteName);\n\n\t\t//remove released note\n\t\tthis.pressedNotes = this.pressedNotes.filter(function (value, index, arr) {\n\t\t\treturn index !== keyIndex;\n\t\t});\n\n\t\tif (this.pressedNotes.length) {\n\t\t\tthis.playNote(\n\t\t\t\tthis.pressedNotes[this.pressedNotes.length - 1],\n\t\t\t\tthis.props.keyboard.velocity\n\t\t\t);\n\t\t} else {\n\t\t\tthis.releaseEnvelope();\n\t\t}\n\t}\n\n\tgetBaseFrequency(note, octave) {\n\t\tif (!octave) {\n\t\t\toctave = this.props.general.octave;\n\t\t}\n\t\tconst baseNote = tonal.note(note.pc + (note.oct + octave));\n\t\treturn baseNote.freq;\n\t}\n\n\tgetVCOFrequency(i, baseFrequency) {\n\t\tconst fineTuned = transposeFrequencyBySemitones(\n\t\t\tbaseFrequency,\n\t\t\tthis.props.vco[i].semitones\n\t\t);\n\t\tconst detuned = transposeFrequencyByCents(\n\t\t\tfineTuned,\n\t\t\tthis.props.vco[i].detune\n\t\t);\n\t\treturn detuned;\n\t}\n\n\tonMIDIFailure() {\n\t\tconsole.log(\"Could not access your MIDI devices.\");\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener(\"keydown\", this.onKeyDown.bind(this));\n\t\twindow.addEventListener(\"keyup\", this.onKeyUp.bind(this));\n\n\t\tif (navigator.requestMIDIAccess) {\n\t\t\tnavigator\n\t\t\t\t.requestMIDIAccess()\n\t\t\t\t.then(this.onMIDISuccess.bind(this), this.onMIDIFailure.bind(this));\n\t\t} else {\n\t\t}\n\t}\n\n\tonKeyDown(e) {\n\t\tconst midiCode = this.mapKeyboardToMidi(e.key);\n\t\tconst noteName = midi.midiToNoteName(midiCode);\n\n\t\tif (!midiCode || this.pressedNotes.indexOf(noteName) !== -1) return;\n\t\tthis.keyPressed = e.key;\n\t\tthis.playNote(noteName);\n\t}\n\n\tonKeyUp(e) {\n\t\tconst midiCode = this.mapKeyboardToMidi(e.key);\n\t\tif (!midiCode) return;\n\t\tconst noteName = midi.midiToNoteName(midiCode);\n\n\t\tthis.releaseNote(noteName);\n\t}\n\n\tgetTimeConstant(time) {\n\t\treturn Math.log(time + 1) / Math.log(100);\n\t}\n\n\tkeyToPitch(key) {\n\t\tconst keyIndex = this.keys.indexOf(key);\n\t\tif (keyIndex === -1) return false;\n\t\tconst octave = Math.floor(keyIndex / 12);\n\t\treturn {\n\t\t\tnote: keyIndex - 12 * octave,\n\t\t\toctave: octave,\n\t\t};\n\t}\n\n\tpowerOn() {\n\t\tconst _this = this;\n\t\tthis.props.vco.forEach((vco, i) => {\n\t\t\t_this.startVCO(i);\n\t\t});\n\t}\n\n\tpowerOff(length) {\n\t\tconst _this = this;\n\t\tthis.props.vco.forEach((vco, i) => {\n\t\t\t_this.stopVCO(i, length);\n\t\t});\n\t}\n\n\tstartVCO(index) {\n\t\tconst ctx = this.audioCtx;\n\n\t\tconst frequency = this.getVCOFrequency(\n\t\t\tindex,\n\t\t\tthis.getBaseFrequency(this.props.keyboard.note)\n\t\t);\n\n\t\tthis.vco[index] = ctx.createOscillator();\n\t\tthis.vco[index].type = this.props.vco[index].type;\n\t\tthis.vco[index].frequency.setValueAtTime(frequency, ctx.currentTime); // value in hertz\n\n\t\tthis.vcoGain[index] = ctx.createGain();\n\t\tthis.vcoGain[index].gain.setValueAtTime(\n\t\t\tthis.props.vco[index].gain,\n\t\t\tctx.currentTime\n\t\t);\n\n\t\t// connect\n\t\tthis.vco[index].connect(this.vcoGain[index]);\n\t\tthis.vcoGain[index].connect(this.biquadFilter);\n\n\t\tthis.vco[index].start();\n\t}\n\n\tstopVCO(index, time = 0) {\n\t\tconst ctx = this.audioCtx;\n\t\tthis.vco[index].stop(ctx.currentTime + time + this.props.envelope.release);\n\t}\n\n\ttriggerEnvelope(velocity = 1) {\n\t\tconst ctx = this.audioCtx;\n\t\tconst { envelope, filterEnvelope, filter } = this.props;\n\t\tconst startTime = ctx.currentTime;\n\t\tconst startFrequency = this.biquadFilter.frequency.value;\n\n\t\tthis.envelope.gain.cancelScheduledValues(0);\n\t\tthis.envelope.gain.setValueAtTime(this.envelope.gain.value, startTime);\n\n\t\tthis.biquadFilter.frequency.cancelScheduledValues(0);\n\t\tthis.biquadFilter.frequency.setValueAtTime(startFrequency, startTime);\n\n\t\tif (envelope.attack === 0) {\n\t\t\tthis.envelope.gain.linearRampToValueAtTime(velocity, startTime);\n\t\t} else {\n\t\t\tthis.envelope.gain.linearRampToValueAtTime(\n\t\t\t\tvelocity,\n\t\t\t\tstartTime + envelope.attack\n\t\t\t);\n\t\t}\n\n\t\tvar minv = Math.log(filter.frequency);\n\t\tvar maxv = Math.log(20000);\n\t\tvar scale = (maxv - minv) / 100;\n\n\t\tconst attackFrequency = Math.exp(filterEnvelope.intensity * scale + minv); //scale * filterEnvelope.intensity\n\t\tconst sustainFrequency = Math.exp(\n\t\t\tfilterEnvelope.intensity * (filterEnvelope.sustain / 100) * scale + minv\n\t\t);\n\n\t\tthis.biquadFilter.frequency.exponentialRampToValueAtTime(\n\t\t\tattackFrequency,\n\t\t\tstartTime + filterEnvelope.attack\n\t\t);\n\t\tthis.biquadFilter.frequency.setValueAtTime(\n\t\t\tattackFrequency,\n\t\t\tstartTime + filterEnvelope.attack\n\t\t);\n\t\tthis.biquadFilter.frequency.setTargetAtTime(\n\t\t\tsustainFrequency,\n\t\t\tstartTime + filterEnvelope.attack,\n\t\t\tthis.getTimeConstant(filterEnvelope.decay)\n\t\t);\n\n\t\tthis.envelope.gain.setValueAtTime(velocity, startTime + envelope.attack);\n\t\tthis.envelope.gain.setTargetAtTime(\n\t\t\t(envelope.sustain / 100) * velocity,\n\t\t\tstartTime + envelope.attack,\n\t\t\tthis.getTimeConstant(envelope.decay)\n\t\t);\n\t}\n\n\treleaseEnvelope() {\n\t\tconst { envelope, filter, filterEnvelope } = this.props;\n\t\tconst ctx = this.audioCtx;\n\t\tconst startTime = ctx.currentTime;\n\t\tconst startFrequency = this.biquadFilter.frequency.value;\n\n\t\tthis.envelope.gain.cancelScheduledValues(startTime);\n\t\tthis.envelope.gain.setValueAtTime(this.envelope.gain.value, startTime);\n\n\t\tthis.biquadFilter.frequency.cancelScheduledValues(startTime);\n\t\tthis.biquadFilter.frequency.setValueAtTime(startFrequency, startTime);\n\n\t\tconst releaseConstant =\n\t\t\tenvelope.release > 0 ? this.getTimeConstant(envelope.release) : 0.0001;\n\n\t\tthis.biquadFilter.frequency.exponentialRampToValueAtTime(\n\t\t\tfilter.frequency,\n\t\t\tstartTime + filterEnvelope.release\n\t\t);\n\n\t\tthis.envelope.gain.setTargetAtTime(0, startTime, releaseConstant);\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tconst ctx = this.audioCtx;\n\n\t\t// console.log(nextProps.vco[1].gain, this.props.vco[1].gain)\n\t\t//  console.log(nextProps.vco[1].detune, this.props.vco[1].detune)\n\t\t// update VCOs\n\t\tthis.vco.forEach((vco, i) => {\n\t\t\tif (nextProps.vco[i].type !== this.props.vco[i].type)\n\t\t\t\tvco.type = nextProps.vco[i].type;\n\t\t\tif (\n\t\t\t\tnextProps.general.octave !== this.props.general.octave ||\n\t\t\t\tnextProps.vco[i].semitones !== this.props.vco[i].semitones ||\n\t\t\t\tnextProps.vco[i].detune !== this.props.vco[i].detune\n\t\t\t)\n\t\t\t\tvco.frequency.setValueAtTime(\n\t\t\t\t\tthis.getVCOFrequency(\n\t\t\t\t\t\ti,\n\t\t\t\t\t\tthis.getBaseFrequency(\n\t\t\t\t\t\t\tnextProps.keyboard.note,\n\t\t\t\t\t\t\tnextProps.general.octave\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tctx.currentTime\n\t\t\t\t);\n\t\t\tif (nextProps.vco[i].gain !== this.props.vco[i].gain)\n\t\t\t\tthis.vcoGain[i].gain.setValueAtTime(\n\t\t\t\t\tnextProps.vco[i].gain * nextProps.keyboard.velocity,\n\t\t\t\t\tctx.currentTime\n\t\t\t\t);\n\t\t});\n\n\t\t// power\n\t\tif (nextProps.power.active && !this.props.power.active) {\n\t\t\tthis.powerOn();\n\t\t} else if (!nextProps.power.active && this.props.power.active) {\n\t\t\tthis.powerOff();\n\t\t}\n\n\t\tif (nextProps.amp.gain !== this.props.amp.gain)\n\t\t\tthis.gain.gain.setValueAtTime(nextProps.amp.gain, ctx.currentTime);\n\t\tif (nextProps.filter.frequency !== this.props.filter.frequency)\n\t\t\tthis.biquadFilter.frequency.setValueAtTime(\n\t\t\t\tnextProps.filter.frequency,\n\t\t\t\tctx.currentTime\n\t\t\t);\n\t\tif (nextProps.filter.resonance !== this.props.filter.resonance)\n\t\t\tthis.biquadFilter.Q.setValueAtTime(\n\t\t\t\tnextProps.filter.resonance / 4,\n\t\t\t\tctx.currentTime\n\t\t\t);\n\t}\n\n\trender() {\n\t\treturn <div></div>;\n\t}\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\t...state.state,\n\t};\n};\nconst mapDispatchToProps = (dispatch) => {\n\treturn bindActionCreators(\n\t\t{ tick, pressNote, updateOscilloscope, updateCurrentTime },\n\t\tdispatch\n\t);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AudioEngine);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { bindActionCreators } from \"redux\";\nimport { setPower } from \"../actions/actions.js\";\n\nimport { connect } from \"react-redux\";\n\nconst Lamp = styled.div`\n\theight: 8px;\n\twidth: 8px;\n\tborder-radius: 100%;\n\n\tbackground: ${(props) => (props.active ? \"#40EC00\" : \"#434343\")};\n\tbackground-image: linear-gradient(\n\t\t180deg,\n\t\trgba(255, 255, 255, 0.5) 0%,\n\t\trgba(255, 255, 255, 0.02) 100%\n\t);\n\tbox-shadow: ${(props) =>\n\t\tprops.active\n\t\t\t? \"0 -1px 0 0 rgba(0,0,0,0.08), 0 1px 0 0 rgba(255,255,255,0.08), 0 0 10px 0 #40EC00, inset 0 -2px 4px 0 rgba(21,76,9,0.50), inset 0 2px 4px 0 rgba(212,255,170,0.50)\"\n\t\t\t: \" 0 -1px 0 0 rgba(0,0,0,0.08), 0 1px 0 0 rgba(255,255,255,0.08), 0 0 10px 0 rgba(64,236,0,0.00), inset 0 -2px 4px 0 rgba(0,0,0,0.42), inset 0 2px 4px 0 rgba(51,51,51,0.50)\"};\n\n\ttransition: all 0.1s;\n`;\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tflex: 1;\n\tjustify-content: space-around;\n`;\nconst Track = styled.div`\n\tbox-shadow: inset 0 1px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 -1px 0 0 rgba(255, 255, 255, 0.16);\n\tborder-radius: 15px;\n\theight: 24px;\n\twidth: 48px;\n\toverflow: auto;\n\tcursor: pointer;\n\ttransition: all 0.2s;\n`;\n\nconst Knob = styled.div`\n\theight: 20px;\n\twidth: 20px;\n\tborder-radius: 100%;\n\tmargin: 2px;\n\ttransition: all 0.3s;\n\n\tbackground-image: linear-gradient(\n\t\t180deg,\n\t\t#4d4d4d 0%,\n\t\t#393939 42%,\n\t\t#1c1c1c 99%\n\t);\n\tbox-shadow: 0 5px 3px 0 rgba(0, 0, 0, 0.19), 0 8px 7px 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 -1px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 1px 0 0 rgba(255, 255, 255, 0.16);\n`;\n\nclass PowerSwitch extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\ttoggle() {\n\t\tconst { value } = this.props;\n\n\t\tthis.props.setPower(!value);\n\t}\n\tcomponentDidUpdate(prevProps) {\n\t\tconst { value } = this.props;\n\t\t//when prev animation finished\n\t\tif (prevProps.value !== value) {\n\t\t\tconst audio = new Audio(\"sounds/switch.mp3\");\n\t\t\taudio.play();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { value } = this.props;\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<Lamp active={value}></Lamp>\n\t\t\t\t<Track\n\t\t\t\t\tstyle={{ background: value ? \"#aaa\" : \"#111\" }}\n\t\t\t\t\tonClick={this.toggle.bind(this)}\n\t\t\t\t\tactive={value}\n\t\t\t\t>\n\t\t\t\t\t<Knob style={{ marginLeft: value ? 26 : 2 }}></Knob>\n\t\t\t\t</Track>\n\t\t\t</Container>\n\t\t);\n\t}\n}\n\nPowerSwitch.defaultProps = {\n\tvalue: true,\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn bindActionCreators({ setPower }, dispatch);\n};\nexport default connect(null, mapDispatchToProps)(PowerSwitch);\n","import styled from \"styled-components\";\n\nexport default styled.div`\n\tcolor: white;\n\tpadding: 4px;\n\ttext-align: center;\n\ttext-transform: uppercase;\n\tfont-size: 12px;\n\tletter-spacing: 1.8px;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { bindActionCreators } from \"redux\";\nimport { setParam } from \"../actions/actions.js\";\nimport { connect } from \"react-redux\";\nimport { motion } from \"framer-motion\";\nimport Label from \"./Label\";\n\nconst Container = styled.div`\n\tposition: relative;\n\tmargin: 10px 0;\n`;\n\nconst Inner = styled.div`\n\tpadding: 0 15px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-bottom: 8px;\n`;\n\nconst KnobInner = styled.div`\n\theight: 100%;\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: flex-end;\n`;\nconst KnobBase = styled.div`\n\ttouch-action: none;\n\tcursor: pointer;\n\theight: ${(props) => props.size}px;\n\twidth: ${(props) => props.size}px;\n\tborder-radius: 100%;\n\tbackground-image: linear-gradient(180deg, #4d4d4d 0%, #1c1c1c 99%);\n\tbox-shadow: 0 5px 6px 0 rgba(0, 0, 0, 0.18), 0 22px 22px 0 rgba(0, 0, 0, 0.39),\n\t\tinset 0 -1px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 1px 0 0 rgba(255, 255, 255, 0.16);\n`;\n\nconst Pointer = styled.div`\n\tbackground-image: linear-gradient(180deg, #1c1c1c 0%, #4d4d4d 99%);\n\theight: 10px;\n\twidth: 10px;\n\tborder-radius: 100%;\n\tmargin: 10px;\n`;\n\nconst Value = styled(motion.div)`\n\tbackground: #191919;\n\tbox-shadow: 0 12px 33px 0 rgba(0, 0, 0, 0.37);\n\tborder-radius: 20px;\n\theight: 40px;\n\tpadding: 0 15px;\n\tfont-size: 16px;\n\tcolor: #b0b0b0;\n\tletter-spacing: 1px;\n\ttext-align: center;\n\tline-height: 40px;\n\tposition: absolute;\n\tmargin-left: 50%;\n\twidth: auto;\n\twhite-space: nowrap;\n\tz-index: 999;\n\tpointer-events: none;\n`;\n\nconst ValueVariants = {\n\thidden: { opacity: 0, transform: `translate(-50%, 20px)` },\n\tvisible: { opacity: 1, transform: `translate(-50%, 0px)` },\n};\n\nclass KnobControl extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\trotate: this.getRotation(props.value),\n\t\t\tdragging: false,\n\t\t};\n\t}\n\n\tonKeyDown(e) {\n\t\tif (e.key === \"Shift\") {\n\t\t\tthis.setState({\n\t\t\t\tfreezeValue: this.props.value,\n\t\t\t\tfreezeRotation: this.getRotation(this.props.value),\n\t\t\t});\n\t\t}\n\t}\n\n\tonKeyUp(e) {\n\t\tif (e.key === \"Shift\") {\n\t\t\tthis.setState({\n\t\t\t\tfreezeValue: this.props.value,\n\t\t\t\tfreezeRotation: this.getRotation(this.props.value),\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener(\"keydown\", this.onKeyDown.bind(this));\n\t\twindow.addEventListener(\"keyup\", this.onKeyUp.bind(this));\n\n\t\tdocument.addEventListener(\"mousemove\", this.onMouseMove.bind(this), false);\n\t\tdocument.addEventListener(\"touchmove\", this.onMouseMove.bind(this), false);\n\t\tdocument.addEventListener(\"mouseup\", this.onMouseUp.bind(this), false);\n\t\tdocument.addEventListener(\"touchend\", this.onMouseUp.bind(this), false);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener(\"mousemove\", this.onMouseMove, false);\n\t\tdocument.removeEventListener(\"mouseup\", this.onMouseUp, false);\n\t\tdocument.removeEventListener(\"touchmove\", this.onMouseMove, false);\n\t\tdocument.removeEventListener(\"touchend\", this.onMouseUp, false);\n\t}\n\n\tgetRotation(value) {\n\t\tif (this.props.log) {\n\t\t\treturn this.getRotationLog(value);\n\t\t} else {\n\t\t\treturn this.getRotationLin(value);\n\t\t}\n\t}\n\n\tgetRotationLin(value) {\n\t\tconst { min, max, minDeg, maxDeg } = this.props;\n\t\tconst scale = (maxDeg - minDeg) / (max - min);\n\t\tlet rotation = minDeg + (value - min) * scale;\n\t\treturn rotation;\n\t}\n\n\tgetRotationLog(value) {\n\t\tconst { min, max, minDeg, maxDeg } = this.props;\n\n\t\tif (value === 0) return minDeg;\n\n\t\tconst minV = Math.log(min);\n\t\tconst maxV = Math.log(max);\n\t\tconst scale = (maxV - minV) / (maxDeg - minDeg);\n\n\t\treturn minDeg + (Math.log(value) - minV) / scale;\n\t}\n\n\tonMouseDown(event) {\n\t\tconst dragStartY = event.clientY || event.touches[0].clientY;\n\n\t\tthis.setState({\n\t\t\tdragStartY,\n\t\t\tdragging: true,\n\t\t\tfreezeValue: this.props.value,\n\t\t\tfreezeRotation: this.getRotation(this.props.value),\n\t\t});\n\t}\n\n\tonMouseUp(event) {\n\t\tthis.setState({\n\t\t\tdragging: false,\n\t\t});\n\t}\n\n\tgetValue(position) {\n\t\tif (this.props.log) {\n\t\t\treturn this.getValueLog(position);\n\t\t} else {\n\t\t\treturn this.getValueLin(position);\n\t\t}\n\t}\n\n\tgetValueLin(position) {\n\t\tconst { min, max, minDeg, maxDeg } = this.props;\n\t\tvar scale = (max - min) / (maxDeg - minDeg);\n\t\treturn (position - minDeg) * scale + min;\n\t}\n\n\tgetValueLog(position) {\n\t\tconst { min, max, minDeg, maxDeg } = this.props;\n\t\tconst minV = Math.log(min);\n\t\tconst maxV = Math.log(max);\n\t\tconst scale = (maxV - minV) / (maxDeg - minDeg);\n\n\t\treturn Math.exp((position - minDeg) * scale + minV);\n\t}\n\n\tonMouseMove(event) {\n\t\tif (!this.state.dragging) return;\n\t\tconsole.log(event);\n\n\t\tconst { min, max, param, module, moduleIndex, degreePerPixel } = this.props;\n\n\t\tconst clientY = event.clientY || event.touches[0].clientY;\n\n\t\tlet delta = (this.state.dragStartY - clientY) * degreePerPixel;\n\n\t\tif (event.shiftKey) {\n\t\t\tdelta = delta * 0.2;\n\t\t}\n\n\t\tlet newValue = this.getValue(this.state.freezeRotation + delta);\n\n\t\tif (this.props.snap !== false) {\n\t\t\tnewValue = Math.round(newValue);\n\t\t}\n\n\t\tif (newValue === this.props.value) return;\n\n\t\tif (newValue > max) newValue = max;\n\t\telse if (newValue < min) {\n\t\t\tnewValue = min;\n\t\t}\n\t\tthis.props.setParam(module, moduleIndex, param, newValue);\n\t}\n\n\tonDoubleClick(e) {\n\t\tconst { param, module, moduleIndex } = this.props;\n\n\t\tthis.props.setParam(module, moduleIndex, param, this.props.default);\n\t}\n\n\trender() {\n\t\t/* map va;l sto size: transform(this.props.value, [this.props.min, this.props.max],[40,200])*/\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<Inner>\n\t\t\t\t\t<KnobBase\n\t\t\t\t\t\tsize={this.props.size}\n\t\t\t\t\t\tonDoubleClick={this.onDoubleClick.bind(this)}\n\t\t\t\t\t\tonTouchStart={this.onMouseDown.bind(this)}\n\t\t\t\t\t\tonMouseDown={this.onMouseDown.bind(this)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<KnobInner\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttransform: `rotate(${this.getRotation(this.props.value)}deg)`,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Pointer\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\ttransform: `rotate(-${this.getRotation(\n\t\t\t\t\t\t\t\t\t\tthis.props.value\n\t\t\t\t\t\t\t\t\t)}deg)`,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></Pointer>\n\t\t\t\t\t\t</KnobInner>\n\t\t\t\t\t</KnobBase>\n\t\t\t\t</Inner>\n\t\t\t\t<Label>{this.props.label}</Label>\n\n\t\t\t\t<Value\n\t\t\t\t\tinitial=\"hidden\"\n\t\t\t\t\tanimate={this.state.dragging ? \"visible\" : \"hidden\"}\n\t\t\t\t\tvariants={ValueVariants}\n\t\t\t\t\ttransition={{\n\t\t\t\t\t\ttype: \"spring\",\n\t\t\t\t\t\tdamping: 20,\n\t\t\t\t\t\tstiffness: 300,\n\t\t\t\t\t\tdelay: this.state.dragging ? 0 : 1,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{this.props.value.toFixed(this.props.decimals)} {this.props.unit}\n\t\t\t\t</Value>\n\t\t\t</Container>\n\t\t);\n\t}\n}\nKnobControl.defaultProps = {\n\tmin: 0,\n\tmax: 100,\n\tminDeg: 40,\n\tmaxDeg: 320,\n\tvalue: 50,\n\tlabel: \"Pitch\",\n\tparam: \"pitch\",\n\tunit: \"\",\n\tmoduleIndex: false,\n\tsize: 60,\n\tdecimals: 0,\n\tsnap: false,\n\tlog: false,\n\tdegreePerPixel: 1.5,\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn bindActionCreators({ setParam }, dispatch);\n};\nexport default connect(null, mapDispatchToProps)(KnobControl);\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { bindActionCreators } from \"redux\";\nimport { setParam } from \"../actions/actions.js\";\nimport { connect } from \"react-redux\";\nimport { transform } from \"framer-motion\";\n\nconst knobWidth = 34;\nconst knobHeight = 48;\nconst Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tmargin: 20px 0 30px;\n`;\n\nconst Track = styled.div`\n\tbackground: #181818;\n\tbox-shadow: inset 0 1px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 -1px 0 0 rgba(255, 255, 255, 0.16);\n\tborder-radius: 7px;\n\twidth: 4px;\n\theight: 100%;\n\tmargin: 0 5px;\n`;\n\nconst Scale = styled.div`\n\tdisplay: flex;\n\talign-items: ${(props) => `flex-${props.align}`};\n\tflex-direction: column;\n\theight: 100%;\n\tjustify-content: space-between;\n`;\n\nconst Background = styled.div`\n\tposition: absolute;\n\ttop: ${knobHeight / 2}px;\n\tbottom: -${knobHeight / 2}px;\n\tdisplay: flex;\n\twidth: 100%;\n\talign-items: center;\n\tjustify-content: center;\n`;\n\nconst Tick = styled.div`\n\tbackground-color: white;\n\theight: 1px;\n\twidth: ${(props) => (props.size === \"big\" ? 18 : 12)}px;\n\topacity: 0.3;\n`;\nconst Inner = styled.div`\n\tposition: relative;\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n`;\n\nconst Outer = styled.div`\n\twidth: ${knobWidth}px;\n\twidth: 100%;\n\n\tposition: relative;\n\theight: ${(props) => props.size}px;\n\tmargin-bottom: ${knobHeight}px;\n`;\n\nconst Grip = styled.div`\n\tbackground-image: linear-gradient(180deg, #1c1c1c 0%, #4d4d4d 99%);\n\twidth: 100%;\n\theight: 2px;\n\topacity: 0.5;\n`;\n\nconst Knob = styled.div`\n\tposition: relative;\n\tpadding: 5px 0;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: space-around;\n\theight: ${knobHeight}px;\n\twidth: ${knobWidth}px;\n\tbackground-image: linear-gradient(180deg, #1c1c1c 0%, #4d4d4d 99%);\n\tbox-shadow: 0 5px 3px 0 rgba(0, 0, 0, 0.19), 0 8px 7px 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 -1px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 1px 0 0 rgba(255, 255, 255, 0.16);\n\tborder-radius: 5px;\n\tz-index: 5;\n\tcursor: pointer;\n\ttouch-action: none;\n`;\n\nconst Pointer = styled.div`\n\twidth: 100%;\n\theight: 4px;\n\tbackground: #bcbcbc;\n\tmargin: 5px 0;\n`;\n\nclass FaderControl extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdragging: false,\n\t\t};\n\t\tthis.defaultValue = props.value;\n\t}\n\n\tcomponentDidMount() {\n\t\tdocument.addEventListener(\"mousemove\", this.onMouseMove.bind(this), false);\n\t\tdocument.addEventListener(\"mouseup\", this.onMouseUp.bind(this), false);\n\t\tdocument.addEventListener(\"touchmove\", this.onMouseMove.bind(this), false);\n\t\tdocument.addEventListener(\"touchend\", this.onMouseUp.bind(this), false);\n\t}\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener(\"mousemove\", this.onMouseMove, false);\n\t\tdocument.removeEventListener(\"mouseup\", this.onMouseUp, false);\n\t\tdocument.removeEventListener(\"touchmove\", this.onMouseMove, false);\n\t\tdocument.removeEventListener(\"touchend\", this.onMouseUp, false);\n\t}\n\n\tgetTransform(value = this.props.value) {\n\t\tconst { min, max, size } = this.props;\n\t\tconst y = size - transform(value, [min, max], [0, size]);\n\n\t\treturn y;\n\t}\n\n\tonMouseDown(event) {\n\t\tconst dragStartY = event.clientY || event.touches[0].clientY;\n\t\tthis.setState({\n\t\t\tdragStartY,\n\t\t\tdragging: true,\n\t\t\tfreezeValue: this.props.value,\n\t\t});\n\t}\n\n\tonMouseUp(event) {\n\t\tthis.setState({\n\t\t\tdragging: false,\n\t\t});\n\t}\n\n\tonMouseMove(event) {\n\t\tif (!this.state.dragging) return;\n\n\t\tconst { min, max, param, module, moduleIndex, size } = this.props;\n\t\tconst clientY = event.clientY || event.touches[0].clientY;\n\n\t\tconst delta = this.state.dragStartY - clientY;\n\n\t\tconst increase = transform(Math.abs(delta), [0, size], [min, max]);\n\n\t\tlet newValue =\n\t\t\tthis.state.freezeValue + (delta < 0 ? -1 * increase : increase); //transform(newY + size, [0, size], [min, max]);\n\n\t\tif (newValue > max) newValue = max;\n\t\telse if (newValue < min) {\n\t\t\tnewValue = min;\n\t\t}\n\t\t// console.log(module, moduleIndex, param, newValue)\n\t\tthis.props.setParam(module, moduleIndex, param, newValue);\n\t}\n\n\tonDoubleClick(e) {\n\t\t//  const { param, module, moduleIndex } = this.props;\n\t\t//this.props.setParam(module, moduleIndex, param, this.defaultValue)\n\t}\n\n\trenderScale() {\n\t\tconst scale = 31;\n\n\t\tconst ticks = [];\n\t\tfor (let i = 0; i < scale; i++) {\n\t\t\tticks.push(<Tick key={i} size={i % 5 === 0 ? \"big\" : \"small\"}></Tick>);\n\t\t}\n\t\treturn ticks;\n\t}\n\n\trender() {\n\t\t/* map va;l sto size: transform(this.props.value, [this.props.min, this.props.max],[40,200])*/\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<Outer size={this.props.size}>\n\t\t\t\t\t<Inner>\n\t\t\t\t\t\t<Background>\n\t\t\t\t\t\t\t<Scale align={\"end\"}>{this.renderScale()}</Scale>\n\t\t\t\t\t\t\t<Track></Track>\n\t\t\t\t\t\t\t<Scale align={\"start\"}>{this.renderScale()}</Scale>\n\t\t\t\t\t\t</Background>\n\t\t\t\t\t\t{this.getTransform.bind(this)}\n\t\t\t\t\t\t<Knob\n\t\t\t\t\t\t\tonDoubleClick={this.onDoubleClick.bind(this)}\n\t\t\t\t\t\t\tonMouseDown={this.onMouseDown.bind(this)}\n\t\t\t\t\t\t\tonTouchStart={this.onMouseDown.bind(this)}\n\t\t\t\t\t\t\tstyle={{ transform: `translateY(${this.getTransform()}px)` }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Grip></Grip>\n\t\t\t\t\t\t\t<Grip></Grip>\n\t\t\t\t\t\t\t<Grip></Grip>\n\t\t\t\t\t\t\t<Pointer></Pointer>\n\t\t\t\t\t\t\t<Grip></Grip>\n\t\t\t\t\t\t\t<Grip></Grip>\n\t\t\t\t\t\t\t<Grip></Grip>\n\t\t\t\t\t\t</Knob>\n\t\t\t\t\t</Inner>\n\t\t\t\t</Outer>\n\t\t\t</Container>\n\t\t);\n\t}\n}\nFaderControl.defaultProps = {\n\tmin: 0,\n\tmax: 100,\n\tvalue: 50,\n\tlabel: \"Gain\",\n\tparam: \"gain\",\n\tunit: \"\",\n\tmoduleIndex: false,\n\tsize: 220,\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn bindActionCreators({ setParam }, dispatch);\n};\nexport default connect(null, mapDispatchToProps)(FaderControl);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { bindActionCreators } from \"redux\";\nimport { setParam } from \"../actions/actions.js\";\n\nimport { connect } from \"react-redux\";\n\nconst trackHeight = 80;\nconst Container = styled.div`\n\tdisplay: flex;\n\theight: ${trackHeight}px;\n\tjustify-content: center;\n`;\n\nconst Labels = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\tmargin-left: 10px;\n`;\n\nconst Track = styled.div`\n\tcursor: pointer;\n\theight: 100%;\n\twidth: 20px;\n\tbackground: #111111;\n\tbox-shadow: inset 0 1px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 -1px 0 0 rgba(255, 255, 255, 0.16);\n\tborder-radius: 10px;\n`;\nconst Knob = styled.div`\n\tcursor: pointer;\n\twidth: 20px;\n\theight: 20px;\n\tborder-radius: 100%;\n\tbackground-image: linear-gradient(180deg, #4d4d4d 0%, #1c1c1c 99%);\n\tbox-shadow: 0 5px 3px 0 rgba(0, 0, 0, 0.19), 0 8px 7px 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 -1px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 1px 0 0 rgba(255, 255, 255, 0.16);\n\tposition: relative;\n\ttransition: all 0.2s;\n\ttouch-action: none;\n`;\n\nconst ShapeImage = styled.div`\n\tcursor: pointer;\n`;\n\nconst shapeSVG = {\n\tsine: (\n\t\t<svg\n\t\t\twidth=\"20px\"\n\t\t\theight=\"11px\"\n\t\t\tviewBox=\"0 0 20 11\"\n\t\t\tversion=\"1.1\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<g\n\t\t\t\tid=\"Artboard\"\n\t\t\t\tstroke=\"none\"\n\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\tfill=\"none\"\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\td=\"M19,5.5 C19,7.985 16.985,10 14.5,10 C12.015,10 10,7.985 10,5.5 C10,3.015 7.985,1 5.5,1 C3.015,1 1,3.015 1,5.5\"\n\t\t\t\t\tid=\"Stroke-1\"\n\t\t\t\t\tstroke=\"#C6C6C6\"\n\t\t\t\t></path>\n\t\t\t</g>\n\t\t</svg>\n\t),\n\ttriangle: (\n\t\t<svg\n\t\t\twidth=\"20px\"\n\t\t\theight=\"11px\"\n\t\t\tviewBox=\"0 0 20 11\"\n\t\t\tversion=\"1.1\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<g\n\t\t\t\tid=\"Artboard-Copy-36\"\n\t\t\t\tstroke=\"none\"\n\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\tfill=\"none\"\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t>\n\t\t\t\t<polyline\n\t\t\t\t\tid=\"Path-4\"\n\t\t\t\t\tstroke=\"#C6C6C6\"\n\t\t\t\t\tpoints=\"1 10 10 1 19 10\"\n\t\t\t\t></polyline>\n\t\t\t</g>\n\t\t</svg>\n\t),\n\tsawtooth: (\n\t\t<svg\n\t\t\twidth=\"20px\"\n\t\t\theight=\"11px\"\n\t\t\tviewBox=\"0 0 20 11\"\n\t\t\tversion=\"1.1\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<g\n\t\t\t\tid=\"Artboard-Copy-38\"\n\t\t\t\tstroke=\"none\"\n\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\tfill=\"none\"\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t>\n\t\t\t\t<polyline\n\t\t\t\t\tid=\"Path-7\"\n\t\t\t\t\tstroke=\"#C6C6C6\"\n\t\t\t\t\tpoints=\"1 10 19 1 19 10\"\n\t\t\t\t></polyline>\n\t\t\t</g>\n\t\t</svg>\n\t),\n\tsquare: (\n\t\t<svg\n\t\t\twidth=\"20px\"\n\t\t\theight=\"11px\"\n\t\t\tviewBox=\"0 0 20 11\"\n\t\t\tversion=\"1.1\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<g\n\t\t\t\tid=\"Artboard-Copy-37\"\n\t\t\t\tstroke=\"none\"\n\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\tfill=\"none\"\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t>\n\t\t\t\t<polyline\n\t\t\t\t\tid=\"Path-5-Copy\"\n\t\t\t\t\tstroke=\"#C6C6C6\"\n\t\t\t\t\tpoints=\"1 10 1 1 10 1 10 10 19 10\"\n\t\t\t\t></polyline>\n\t\t\t</g>\n\t\t</svg>\n\t),\n};\n\nclass WaveformSelector extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\n\t\tthis.shapes = [\"sine\", \"triangle\", \"sawtooth\", \"square\"];\n\t\tthis.audio = new Audio(\"sounds/switch.mp3\");\n\t}\n\n\tcomponentDidMount() {\n\t\tdocument.addEventListener(\"mousemove\", this.onMouseMove.bind(this), false);\n\t\tdocument.addEventListener(\"mouseup\", this.onMouseUp.bind(this), false);\n\t\tdocument.addEventListener(\"touchmove\", this.onMouseMove.bind(this), false);\n\t\tdocument.addEventListener(\"touchend\", this.onMouseUp.bind(this), false);\n\t}\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener(\"mousemove\", this.onMouseMove, false);\n\t\tdocument.removeEventListener(\"mouseup\", this.onMouseUp, false);\n\t\tdocument.removeEventListener(\"touchmove\", this.onMouseMove, false);\n\t\tdocument.removeEventListener(\"touchend\", this.onMouseUp, false);\n\t}\n\n\tselect(type) {\n\t\tconst { module, moduleIndex } = this.props;\n\t\tconst audio = new Audio(\"sounds/switch.mp3\");\n\t\taudio.play();\n\t\tthis.props.setParam(module, moduleIndex, \"type\", type);\n\t}\n\n\tgetShapes() {\n\t\treturn this.shapes.map((s, i) => (\n\t\t\t<ShapeImage\n\t\t\t\tkey={`${this.props.moduleIndex}shape_${i}`}\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\tthis.select(s);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{shapeSVG[s]}\n\t\t\t</ShapeImage>\n\t\t));\n\t}\n\n\tgetIndex(type) {\n\t\treturn this.shapes.indexOf(type);\n\t}\n\n\tonMouseDown(event) {\n\t\tconst dragStartY = event.clientY || event.touches[0].clientY;\n\t\tthis.setState({\n\t\t\tdragStartY,\n\t\t\tdragging: true,\n\t\t\tfreezeValue: this.props.value,\n\t\t});\n\t}\n\n\tonMouseMove(event) {\n\t\tif (!this.state.dragging) return;\n\t\tconst clientY = event.clientY || event.touches[0].clientY;\n\t\tconst delta = this.state.dragStartY - clientY;\n\n\t\tconst stepSize = trackHeight / this.shapes.length;\n\n\t\t//if (Math.abs(delta / stepSize) > 1) {\n\t\tconst diff = -1 * Math.round(delta / stepSize);\n\t\tlet newVal = this.getIndex(this.state.freezeValue) + diff;\n\n\t\tif (\n\t\t\tnewVal > -1 &&\n\t\t\tnewVal < this.shapes.length &&\n\t\t\tthis.shapes[newVal] !== this.props.value\n\t\t) {\n\t\t\tconsole.log(this.shapes[newVal], this.props.value);\n\n\t\t\tthis.select(this.shapes[newVal]);\n\t\t}\n\t\t//  }\n\t}\n\tonMouseUp(event) {\n\t\tthis.setState({\n\t\t\tdragging: false,\n\t\t});\n\t}\n\n\thandleTrackClick(e) {\n\t\tvar bb = e.target.getBoundingClientRect();\n\n\t\tconst newVal = Math.floor(\n\t\t\t(e.clientY - bb.top) / (trackHeight / this.shapes.length)\n\t\t);\n\n\t\tif (this.shapes[newVal] !== this.props.value) {\n\t\t\tthis.select(this.shapes[newVal]);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { value } = this.props;\n\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<Track onClick={this.handleTrackClick.bind(this)}>\n\t\t\t\t\t<Knob\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonTouchStart={this.onMouseDown.bind(this)}\n\t\t\t\t\t\tonMouseDown={this.onMouseDown.bind(this)}\n\t\t\t\t\t\tstyle={{ top: this.getIndex(value) * 25 + \"%\" }}\n\t\t\t\t\t></Knob>\n\t\t\t\t</Track>\n\t\t\t\t<Labels>{this.getShapes()}</Labels>\n\t\t\t</Container>\n\t\t);\n\t}\n}\n\nWaveformSelector.defaultProps = {\n\tvalue: \"sine\",\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn bindActionCreators({ setParam }, dispatch);\n};\nexport default connect(null, mapDispatchToProps)(WaveformSelector);\n\n/*  <br />\n                <Select active={value === 'sine'} onClick={() => { this.select('sine') }}>\n\n                    <svg width=\"34px\" height=\"18px\" viewBox=\"0 0 34 18\" version=\"1.1\"  >\n                        <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\" strokeLinecap=\"round\">\n                            <g id=\"Group-3\" transform=\"translate(1.000000, 1.000000)\" strokeWidth=\"2\">\n                                <path d=\"M16,8 C16,3.581722 12.4181687,0 7.99992957,0 C3.58169047,0 0,3.581722 0,8\" id=\"Path\"></path>\n                                <path d=\"M32,8 C32,12.418278 28.4181687,16 23.9999296,16 C19.5816905,16 16,12.418278 16,8\" id=\"Path\"></path>\n                            </g>\n                        </g>\n                    </svg>\n                </Select>\n\n                <Select active={value === 'triangle'} onClick={() => { this.select('triangle') }}>\n                    <svg width=\"34px\" height=\"18px\" viewBox=\"0 0 34 18\" version=\"1.1\"  >\n                        <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                            <polyline id=\"Path-4\" strokeWidth=\"2\" points=\"1 17 17 1 33 17\"></polyline>\n                        </g>\n                    </svg>\n                </Select>\n\n                <Select active={value === 'sawtooth'} onClick={() => { this.select('sawtooth') }}>\n\n                    <svg width=\"38px\" height=\"20px\" viewBox=\"0 0 38 20\" version=\"1.1\" >\n                        <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                            <polyline id=\"Path-7\" strokeWidth=\"2\" points=\"1 19 37 1 37 19\"></polyline>\n                        </g>\n                    </svg>\n                </Select>\n                <Select active={value === 'square'} onClick={() => { this.select('square') }}>\n\n                    <svg width=\"38px\" height=\"20px\" viewBox=\"0 0 38 20\" version=\"1.1\"  >\n                        <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                            <polyline id=\"Path-5-Copy\" strokeWidth=\"2\" points=\"1 19 1 1 19 1 19 19 37 19\"></polyline>\n                        </g>\n                    </svg>\n                </Select>\n */\n","export const loadState = () => {\n\ttry {\n\t\tconst serializedState = localStorage.getItem(\"state\");\n\t\tif (serializedState === null) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn JSON.parse(serializedState);\n\t} catch (err) {\n\t\treturn undefined;\n\t}\n};\n\nexport const saveState = (state) => {\n\ttry {\n\t\tconst serializedState = JSON.stringify(state);\n\t\tlocalStorage.setItem(\"state\", serializedState);\n\t} catch {\n\t\t// ignore write errors\n\t}\n};\n\nexport const getPreset = (presets, presetName) => {\n\treturn presets.find((p) => p.meta.presetName === presetName);\n};\n\nexport const getPresetIndex = (presets, preset) => {\n\treturn presets.findIndex((p) => p.meta.presetName === preset.meta.presetName);\n};\n\nexport const clearPresets = () => {\n\tlocalStorage.setItem(\"presets\", \"[]\");\n};\n\nexport const getPresets = () => {\n\ttry {\n\t\tconst serializedState = localStorage.getItem(\"presets\");\n\t\tif (serializedState === null) {\n\t\t\treturn [];\n\t\t}\n\t\treturn JSON.parse(serializedState);\n\t} catch (err) {\n\t\treturn [];\n\t}\n};\n\nexport const savePreset = (preset) => {\n\ttry {\n\t\tlet presets = getPresets();\n\t\tconst presetIndex = getPresetIndex(presets, preset);\n\n\t\tif (presetIndex === -1) {\n\t\t\tpresets.push(preset);\n\t\t} else {\n\t\t\tpresets[presetIndex] = preset;\n\t\t}\n\t\tconsole.log(presetIndex);\n\n\t\tconst serializedState = JSON.stringify(presets);\n\t\tlocalStorage.setItem(\"presets\", serializedState);\n\t} catch {\n\t\t// ignore write errors\n\t}\n};\n\nexport const createPreset = (state, presetName) => {\n\t/*const preset = {\n\n    }*/\n};\n\nexport const getOnboardingState = () => {\n\ttry {\n\t\tconst onboardingState = localStorage.getItem(\"onboardingState\");\n\t\tif (onboardingState === null) {\n\t\t\treturn false;\n\t\t}\n\t\treturn onboardingState;\n\t} catch (err) {\n\t\treturn false;\n\t}\n};\n\nexport const setOnboardingState = (value) => {\n\ttry {\n\t\tlocalStorage.setItem(\"onboardingState\", value);\n\t} catch (err) {}\n};\n","import * as tonal from \"@tonaljs/tonal\";\nimport { getOnboardingState } from \"../localStorage\";\n\nexport let defaultState = {\n\tmeta: {\n\t\tpresetName: \"\",\n\t\tpreset: 0,\n\t\tpatchLink: \"\",\n\t},\n\tonboarding: {\n\t\tfinished: getOnboardingState(),\n\t\tcurrentStep: 0,\n\t\tanimating: false,\n\t\tshareModal: false,\n\t},\n\tpower: {\n\t\tactive: false,\n\t},\n\tgeneral: {\n\t\toctave: 0,\n\t\tglide: 0,\n\t},\n\toscilloscope: {\n\t\tdataArray: [],\n\t\tfftSize: 2048,\n\t},\n\tvco: [\n\t\t{\n\t\t\tpitch: 0,\n\t\t\ttype: \"sawtooth\",\n\t\t\tgain: 1,\n\t\t\toctave: 0,\n\t\t\tsemitones: 0,\n\t\t\tdetune: 0,\n\t\t},\n\t\t{\n\t\t\tpitch: 0,\n\t\t\ttype: \"sawtooth\",\n\t\t\tgain: 0,\n\t\t\toctave: 0,\n\t\t\tsemitones: 0,\n\t\t\tdetune: 0,\n\t\t},\n\t\t{\n\t\t\tpitch: 0,\n\t\t\ttype: \"sawtooth\",\n\t\t\tgain: 0,\n\t\t\toctave: 0,\n\t\t\tsemitones: 0,\n\t\t\tdetune: 0,\n\t\t},\n\t],\n\tenvelope: {\n\t\tattack: 0.2,\n\t\tdecay: 0.2,\n\t\tsustain: 100,\n\t\trelease: 0.5,\n\t},\n\tfilterEnvelope: {\n\t\tattack: 0.2,\n\t\tdecay: 0.2,\n\t\tsustain: 100,\n\t\trelease: 0.5,\n\t\tintensity: 50,\n\t},\n\tfilter: {\n\t\tfrequency: 1500,\n\t\tresonance: 1,\n\t},\n\tsequencer: {\n\t\ttempo: 90,\n\t\tgate: 50,\n\t\tcurrentStep: 0,\n\t\tsteps: 16,\n\t},\n\tamp: {\n\t\tgain: 1,\n\t},\n\tkeyboard: {\n\t\tnote: tonal.note(\"C3\"),\n\t\tvelocity: 1,\n\t},\n};\n\nconst reducers = (state = defaultState, action) => {\n\tswitch (action.type) {\n\t\tcase \"SET_PARAM\":\n\t\t\tif (action.moduleIndex === false) {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t[action.module]: {\n\t\t\t\t\t\t...state[action.module],\n\t\t\t\t\t\t[action.param]: action.value,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t[action.module]: state[action.module].map((module, index) => {\n\t\t\t\t\t\tif (index === action.moduleIndex) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...module,\n\t\t\t\t\t\t\t\t[action.param]: action.value,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn module;\n\t\t\t\t\t}),\n\t\t\t\t};\n\t\t\t}\n\n\t\tcase \"SET_POWER\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpower: {\n\t\t\t\t\t...state.power,\n\t\t\t\t\tactive: action.active,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"LOAD_PRESET\":\n\t\t\treturn {\n\t\t\t\t...defaultState,\n\t\t\t\t...state,\n\t\t\t\t...action.preset,\n\t\t\t\tenvelope: {\n\t\t\t\t\t...state.envelope,\n\t\t\t\t\t...action.preset.envelope,\n\t\t\t\t},\n\t\t\t\tpower: {\n\t\t\t\t\tactive: state.power.active,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"SET_PRESET\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tmeta: {\n\t\t\t\t\t...state.meta,\n\t\t\t\t\tpreset: action.preset,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"PRESS_NOTE\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tkeyboard: {\n\t\t\t\t\t...state.keyboard,\n\t\t\t\t\tnote: {\n\t\t\t\t\t\t...action.note,\n\t\t\t\t\t},\n\t\t\t\t\tvelocity: action.velocity,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"TICK\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsequencer: {\n\t\t\t\t\t...state.sequencer,\n\t\t\t\t\tcurrentStep:\n\t\t\t\t\t\tstate.sequencer.currentStep === state.sequencer.steps - 1\n\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t: state.sequencer.currentStep + 1,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"UPDATE_OSCILLOSCOPE\": {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\toscilloscope: {\n\t\t\t\t\t...state.oscilloscope,\n\t\t\t\t\tdataArray: action.dataArray.map((e) => e),\n\t\t\t\t},\n\t\t\t\tgeneral: {\n\t\t\t\t\t...state.general,\n\t\t\t\t\tcurrentTime: action.currentTime,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t\tcase \"UPDATE_CURRENT_TIME\": {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tgeneral: {\n\t\t\t\t\t...state.general,\n\t\t\t\t\tcurrentTime: action.currentTime,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase \"ONBOARDING_ANIMATION_COMPLETE\": {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tonboarding: {\n\t\t\t\t\t...state.onboarding,\n\t\t\t\t\tanimating: false,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase \"ONBOARDING_FINISH\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tonboarding: {\n\t\t\t\t\t...state.onboarding,\n\t\t\t\t\tfinished: true,\n\t\t\t\t},\n\t\t\t\tpower: {\n\t\t\t\t\t...state.power,\n\t\t\t\t\tactive: true,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"ONBOARDING_NEXT_STEP\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tonboarding: {\n\t\t\t\t\t...state.onboarding,\n\t\t\t\t\tanimating: true,\n\t\t\t\t\tcurrentStep: state.onboarding.currentStep + 1,\n\t\t\t\t},\n\t\t\t};\n\t\tcase \"ONBOARDING_RESET\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tonboarding: {\n\t\t\t\t\t...state.onboarding,\n\t\t\t\t\tanimating: false,\n\t\t\t\t\tcurrentStep: 0,\n\t\t\t\t\tfinished: false,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"SHARE_PATCH\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tmeta: {\n\t\t\t\t\t...state.meta,\n\t\t\t\t\tpatchLink: action.patchLink,\n\t\t\t\t},\n\t\t\t\tonboarding: {\n\t\t\t\t\t...state.onboarding,\n\t\t\t\t\tshareModal: true,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"CLOSE_SHARE_MODAL\":\n\t\t\treturn {\n\t\t\t\t...state,\n\n\t\t\t\tonboarding: {\n\t\t\t\t\t...state.onboarding,\n\t\t\t\t\tshareModal: false,\n\t\t\t\t},\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default reducers;\n\n/*\n  let stateCopy = state\n\n            if (action.moduleIndex === false) {\n                stateCopy[action.module][action.param] = action.value\n            } else {\n                stateCopy[action.module][action.moduleIndex][action.param] = action.value\n            }\n            return stateCopy;\n*/\n","import { createStore, combineReducers } from \"redux\";\nimport reducers from \"../reducers/reducers.js\";\nimport { loadState, saveState } from \"../localStorage\";\n\nconst keepState = false;\nlet _store;\nif (keepState) {\n\tconst persistedState = loadState();\n\n\t_store = createStore(\n\t\tcombineReducers({\n\t\t\tstate: reducers,\n\t\t}),\n\t\tpersistedState\n\t);\n\n\t_store.subscribe(() => {\n\t\tconsole.log(store.getState());\n\t\t//const currentState = store.getState();\n\t\tsaveState(store.getState());\n\t});\n} else {\n\t_store = createStore(\n\t\tcombineReducers({\n\t\t\tstate: reducers,\n\t\t})\n\t);\n}\n\nexport const store = _store;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { bindActionCreators } from \"redux\";\nimport { setPreset } from \"../actions/actions.js\";\nimport { connect } from \"react-redux\";\n\nconst colors = [\n\t\"#FFFFFF\",\n\t\"#E89A0A\",\n\t\"#EB420A\",\n\t\"#D0227E\",\n\t\"#7829D6\",\n\t\"#235ED6\",\n\t\"#23AC9E\",\n\t\"#63BF17\",\n];\n\nconst Base = styled.div`\n\tcursor: pointer;\n\tbackground: ${(props) => props.color};\n\tbox-shadow: ${(props) =>\n\t\tprops.active\n\t\t\t? \" 0 0 0 1px rgba(0,0,0,0.50), 0 1px 2px 0 rgba(0,0,0,0.19), 0 2px 5px 0 rgba(0,0,0,0.50), inset 0 -2px 3px 0 rgba(0,0,0,0.50), inset 0 3px 4px 0 rgba(255,255,255,0.09)\"\n\t\t\t: \" 0 0 0 1px rgba(0,0,0,0.50), 0 5px 5px 0 rgba(0,0,0,0.19), 0 12px 13px 0 rgba(0,0,0,0.50), inset 0 -2px 3px 0 rgba(0,0,0,0.50), inset 0 3px 4px 0 rgba(255,255,255,0.09)\"};\n\tborder-radius: 3px;\n\ttransition: all 0.1s ease-out;\n\theight: 44px;\n\tflex: 1;\n\tmargin-right: 10px;\n\tposition: relative;\n\tz-index: ${(props) => (props.active ? 1 : 5)};\n\t&:last-child {\n\t\tmargin-right: 0;\n\t}\n\t&::before {\n\t\ttransition: all 0.1s ease-out;\n\t\tcontent: \"\";\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tright: 0;\n\t\tbackground-image: linear-gradient(\n\t\t\t180deg,\n\t\t\trgba(0, 0, 0, 0.16) 0%,\n\t\t\trgba(0, 0, 0, 0.37) 98%\n\t\t);\n\t\topacity: ${(props) => (props.active ? 1 : 0)};\n\t}\n\n\t&::after {\n\t\ttransition: all 0.1s ease-out;\n\t\tdisplay: block;\n\n\t\tcontent: \"\";\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tright: 0;\n\t\tbackground-image: linear-gradient(\n\t\t\t180deg,\n\t\t\trgba(255, 255, 255, 0.18) 0%,\n\t\t\trgba(255, 255, 255, 0) 100%\n\t\t);\n\t\topacity: ${(props) => (props.active ? 0 : 1)};\n\t}\n`;\n\nclass PowerSwitch extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\n\thandleClick() {\n\t\tif (this.props.active) return;\n\t\tconst audio = new Audio(\"/sounds/button.mp3\");\n\t\taudio.play();\n\t\tthis.props.onClick();\n\t}\n\n\trender() {\n\t\tconst { active } = this.props;\n\t\treturn (\n\t\t\t<Base\n\t\t\t\tcolor={colors[this.props.preset]}\n\t\t\t\tonClick={this.handleClick.bind(this)}\n\t\t\t\tactive={active}\n\t\t\t></Base>\n\t\t);\n\t}\n}\n\nPowerSwitch.defaultProps = {\n\tvalue: true,\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn bindActionCreators({ setPreset }, dispatch);\n};\nexport default connect(null, mapDispatchToProps)(PowerSwitch);\n","const presets = [\n\t{\n\t\t//0 - white\n\n\t\tgeneral: {\n\t\t\toctave: 0,\n\t\t\tglide: 0,\n\t\t},\n\n\t\tvco: [\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\tgain: 1,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: 0,\n\t\t\t\tdetune: 0,\n\t\t\t\ttype: \"sawtooth\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\ttype: \"sawtooth\",\n\t\t\t\tgain: 0,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: 0,\n\t\t\t\tdetune: 0,\n\t\t\t},\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\ttype: \"sawtooth\",\n\t\t\t\tgain: 0,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: 0,\n\t\t\t\tdetune: 0,\n\t\t\t},\n\t\t],\n\n\t\tenvelope: {\n\t\t\tattack: 0,\n\t\t\tdecay: 0,\n\t\t\trelease: 0,\n\t\t\tsustain: 100,\n\t\t},\n\t\tfilter: {\n\t\t\tfrequency: 1512.7153011703033,\n\t\t\tresonance: 0,\n\t\t},\n\t\tfilterEnvelope: {\n\t\t\tsustain: 100,\n\t\t\tintensity: 0,\n\t\t\tattack: 0,\n\t\t\tdecay: 0,\n\t\t\trelease: 0,\n\t\t},\n\t},\n\t{\n\t\t//1 - yellow\n\n\t\tvco: [\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\ttype: \"sawtooth\",\n\t\t\t\tgain: 1,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: 0,\n\t\t\t\tdetune: 0,\n\t\t\t},\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\ttype: \"sawtooth\",\n\t\t\t\toctave: 0,\n\t\t\t\tdetune: 10,\n\t\t\t\tsemitones: 7,\n\t\t\t\tgain: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: 0,\n\t\t\t\ttype: \"square\",\n\t\t\t\tdetune: 2.142857142857146,\n\t\t\t\tgain: 0.31363636363636366,\n\t\t\t},\n\t\t],\n\t\tgeneral: {\n\t\t\toctave: -1,\n\t\t\tglide: 0.08035714285714286,\n\t\t},\n\t\tfilter: {\n\t\t\tresonance: 1,\n\t\t\tfrequency: 899.9248073623645,\n\t\t},\n\t\tfilterEnvelope: {\n\t\t\tattack: 0.2,\n\t\t\trelease: 0.5,\n\t\t\tsustain: 48.035714285714285,\n\t\t\tdecay: 0.95,\n\t\t\tintensity: 36.60714285714286,\n\t\t},\n\t\tenvelope: {\n\t\t\tdecay: 0.2,\n\t\t\tsustain: 100,\n\t\t\trelease: 0.8321428571428571,\n\t\t\tattack: 0.01499999999999996,\n\t\t},\n\t},\n\t//2 - orange\n\t{\n\t\tmeta: {\n\t\t\tpresetName: \"Bell\",\n\t\t},\n\t\tpower: {\n\t\t\tactive: true,\n\t\t},\n\t\tenvelope: {\n\t\t\tsustain: 0,\n\t\t\tattack: 0.006428571428571418,\n\t\t\tdecay: 0.7821428571428571,\n\t\t\trelease: 0.7392857142857142,\n\t\t},\n\t\tgeneral: {\n\t\t\toctave: 2,\n\t\t\tglide: 0,\n\t\t},\n\t\tfilterEnvelope: {\n\t\t\tattack: 0.010714285714285714,\n\t\t\tintensity: 100,\n\t\t\tdecay: 0.46785714285714286,\n\t\t\trelease: 0.3964285714285714,\n\t\t\tsustain: 40.714285714285715,\n\t\t},\n\t\tvco: [\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: 0,\n\t\t\t\tdetune: 0,\n\t\t\t\tgain: 0.8136363636363636,\n\t\t\t\ttype: \"square\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\toctave: 0,\n\t\t\t\ttype: \"triangle\",\n\t\t\t\tdetune: 11.25,\n\t\t\t\tsemitones: 7,\n\t\t\t\tgain: 0.6363636363636365,\n\t\t\t},\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\toctave: 0,\n\t\t\t\tgain: 1,\n\t\t\t\tsemitones: 12,\n\t\t\t\tdetune: 18.214285714285722,\n\t\t\t\ttype: \"square\",\n\t\t\t},\n\t\t],\n\t\tfilter: {\n\t\t\tresonance: 0,\n\t\t\tfrequency: 765.4388234673022,\n\t\t},\n\t},\n\t//4 - pink\n\t{\n\t\tmeta: {\n\t\t\tpresetName: \"Troy\",\n\t\t},\n\t\tpower: {\n\t\t\tactive: true,\n\t\t},\n\t\tgeneral: {\n\t\t\tglide: 0,\n\t\t\toctave: -1,\n\t\t},\n\t\tfilter: {\n\t\t\tresonance: 0,\n\t\t\tfrequency: 514.4382313196404,\n\t\t},\n\t\tfilterEnvelope: {\n\t\t\tsustain: 0,\n\t\t\tintensity: 54.10714285714286,\n\t\t\trelease: 0.45,\n\t\t\tattack: 0.48214285714285693,\n\t\t\tdecay: 0.6749999999999999,\n\t\t},\n\t\tenvelope: {\n\t\t\tdecay: 0,\n\t\t\trelease: 0,\n\t\t\tsustain: 100,\n\t\t\tattack: 0.36428571428571427,\n\t\t},\n\t\tvco: [\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: 0,\n\t\t\t\tdetune: 0,\n\t\t\t\ttype: \"sawtooth\",\n\t\t\t\tgain: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\toctave: 0,\n\t\t\t\tdetune: 0,\n\t\t\t\ttype: \"sine\",\n\t\t\t\tsemitones: -12,\n\t\t\t\tgain: 0.6727272727272726,\n\t\t\t},\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: 0,\n\t\t\t\tdetune: 0,\n\t\t\t\ttype: \"sine\",\n\t\t\t\tgain: 0,\n\t\t\t},\n\t\t],\n\t}, // 5 = purple\n\t{\n\t\tpower: {\n\t\t\tactive: true,\n\t\t},\n\t\tenvelope: {\n\t\t\tattack: 2,\n\t\t\tdecay: 2,\n\t\t\tsustain: 54.46428571428571,\n\t\t\trelease: 2,\n\t\t},\n\t\tfilter: {\n\t\t\tresonance: 2.142857142857143,\n\t\t\tfrequency: 100,\n\t\t},\n\t\tfilterEnvelope: {\n\t\t\tsustain: 100,\n\t\t\tdecay: 0,\n\t\t\tattack: 2,\n\t\t\trelease: 1.7571428571428571,\n\t\t\tintensity: 50.35714285714286,\n\t\t},\n\t\tvco: [\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: 0,\n\t\t\t\tdetune: 0,\n\t\t\t\ttype: \"sine\",\n\t\t\t\tgain: 0.75,\n\t\t\t},\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\toctave: 0,\n\t\t\t\tgain: 0.7954545454545454,\n\t\t\t\ttype: \"triangle\",\n\t\t\t\tdetune: 12.32142857142857,\n\t\t\t\tsemitones: 3,\n\t\t\t},\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\toctave: 0,\n\t\t\t\ttype: \"square\",\n\t\t\t\tgain: 0.4681818181818182,\n\t\t\t\tdetune: -7.5,\n\t\t\t\tsemitones: 7,\n\t\t\t},\n\t\t],\n\t\tgeneral: {\n\t\t\tglide: 0.41785714285714287,\n\t\t\toctave: 1,\n\t\t},\n\t}, // 6 - blue\n\t{\n\t\tmeta: {\n\t\t\tpresetName: \"WahWah\",\n\t\t},\n\t\tgeneral: {\n\t\t\toctave: -2,\n\t\t\tglide: 0.13,\n\t\t\tcurrentTime: 0,\n\t\t},\n\t\tvco: [\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\tgain: 1,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: 0,\n\t\t\t\tdetune: 0,\n\t\t\t\ttype: \"sawtooth\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\ttype: \"triangle\",\n\t\t\t\tgain: 0.7227272727272727,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: 12,\n\t\t\t\tdetune: 0,\n\t\t\t},\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\ttype: \"square\",\n\t\t\t\tgain: 0,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: 0,\n\t\t\t\tdetune: 0,\n\t\t\t},\n\t\t],\n\t\tenvelope: {\n\t\t\tattack: 0.16926666150378772,\n\t\t\tdecay: 6.520572293428623,\n\t\t\tsustain: 100,\n\t\t\trelease: 0.25118864315095835,\n\t\t},\n\t\tfilterEnvelope: {\n\t\t\tsustain: 28,\n\t\t\tintensity: 36.428571428571416,\n\t\t\tattack: 0.5531681197617235,\n\t\t\tdecay: 7.56,\n\t\t\trelease: 0.12589254117941692,\n\t\t},\n\t\tfilter: {\n\t\t\tfrequency: 213.40171133990876,\n\t\t\tresonance: 95.71428571428572,\n\t\t},\n\t},\n\t// 7 -teal\n\t{\n\t\tpower: { active: true },\n\t\tgeneral: {\n\t\t\toctave: 0,\n\t\t\tglide: 0,\n\t\t},\n\t\tvco: [\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\ttype: \"square\",\n\t\t\t\tgain: 1,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: 0,\n\t\t\t\tdetune: 10.714285714285694,\n\t\t\t},\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\ttype: \"square\",\n\t\t\t\tgain: 0.6590909090909092,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: -7,\n\t\t\t\tdetune: 0.5357142857142847,\n\t\t\t},\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\ttype: \"square\",\n\t\t\t\tgain: 0.7181818181818183,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: 7,\n\t\t\t\tdetune: 10.17857142857143,\n\t\t\t},\n\t\t],\n\t\tenvelope: {\n\t\t\tattack: 0.005094984382828271,\n\t\t\tdecay: 2.357537269587174,\n\t\t\tsustain: 26.071428571428573,\n\t\t\trelease: 0.5179474679231217,\n\t\t},\n\t\tfilterEnvelope: {\n\t\t\tattack: 0.001,\n\t\t\tdecay: 0.9699386857056398,\n\t\t\tsustain: 4.821428571428571,\n\t\t\trelease: 0.0048496934285282,\n\t\t\tintensity: 70.71428571428572,\n\t\t},\n\t\tfilter: {\n\t\t\tfrequency: 571.4458476045286,\n\t\t\tresonance: 65.89285714285714,\n\t\t},\n\t},\n\t{\n\t\t// aua - green\n\n\t\tgeneral: {\n\t\t\toctave: -1,\n\t\t\tglide: 0.24107142857142827,\n\t\t},\n\t\tvco: [\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\ttype: \"triangle\",\n\t\t\t\tgain: 0.6500000000000001,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: 5,\n\t\t\t\tdetune: 0,\n\t\t\t},\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\ttype: \"square\",\n\t\t\t\tgain: 0.8818181818181818,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: -7,\n\t\t\t\tdetune: -15,\n\t\t\t},\n\t\t\t{\n\t\t\t\tpitch: 0,\n\t\t\t\ttype: \"sawtooth\",\n\t\t\t\tgain: 0.9318181818181818,\n\t\t\t\toctave: 0,\n\t\t\t\tsemitones: 0,\n\t\t\t\tdetune: 24.10714285714286,\n\t\t\t},\n\t\t],\n\t\tenvelope: {\n\t\t\tattack: 0.003789408531634213,\n\t\t\tdecay: 4.941822455971212,\n\t\t\tsustain: 0,\n\t\t\trelease: 2.308105833452399,\n\t\t},\n\t\tfilterEnvelope: {\n\t\t\tattack: 0.3377313908791014,\n\t\t\tdecay: 0.5179474679231217,\n\t\t\tsustain: 24.107142857142858,\n\t\t\trelease: 9.676410537094561,\n\t\t\tintensity: -55,\n\t\t},\n\t\tfilter: {\n\t\t\tfrequency: 874.7405861451177,\n\t\t\tresonance: 90,\n\t\t},\n\t},\n];\n\nexport default presets;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { store } from \"../store\";\nimport { savePreset, getPresets, clearPresets } from \"../localStorage\";\nimport { bindActionCreators } from \"redux\";\nimport { setParam, setPreset, loadPreset } from \"../actions/actions.js\";\nimport { connect } from \"react-redux\";\nimport PresetButton from \"../components/PresetButton\";\nimport presets from \"../presets\";\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tpadding: 10px;\n`;\n\nclass PresetManager extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpresetName: props.meta.presetName,\n\t\t\tpresets: [],\n\t\t};\n\t}\n\tcomponentDidMount() {\n\t\tthis.fetch();\n\t\twindow.addEventListener(\"hashchange\", this.loadFromUrl.bind(this), false);\n\n\t\tthis.loadFromUrl();\n\t}\n\n\tloadFromUrl(href) {\n\t\tif (window.location.hash) {\n\t\t\tvar hash = decodeURIComponent(window.location.hash.substring(1)); //Puts hash in variable, and removes the # character\n\t\t\tvar loadState = JSON.parse(hash);\n\t\t\tif (loadState) {\n\t\t\t\tconsole.log(loadState);\n\t\t\t\tthis.props.setPreset(-1);\n\n\t\t\t\tthis.props.loadPreset(loadState);\n\t\t\t}\n\t\t}\n\t\twindow.dispatchEvent(new Event(\"popstate\"));\n\t}\n\tonNameChange(e) {\n\t\tthis.setState({ presetName: e.target.value });\n\t}\n\n\tonSave() {\n\t\tthis.props.setParam(\"meta\", false, \"presetName\", this.state.presetName);\n\n\t\tconst state = store.getState();\n\t\tsavePreset(state.state, this.state.presetName);\n\t\tthis.fetch();\n\t}\n\n\tonClear() {\n\t\tlet confirmed = window.confirm(\"DELETE ALL? SURE?\");\n\t\tif (!confirmed) return;\n\n\t\tclearPresets();\n\t\tthis.setState({ presetName: \"\" });\n\t\tthis.fetch();\n\t}\n\n\tonExport() {\n\t\tvar element = document.createElement(\"a\");\n\t\telement.setAttribute(\n\t\t\t\"href\",\n\t\t\t\"data:text/plain;charset=utf-8,\" +\n\t\t\t\tencodeURIComponent(JSON.stringify(this.state.presets))\n\t\t);\n\t\telement.setAttribute(\"download\", \"synth-presets\");\n\t\telement.style.display = \"none\";\n\t\tdocument.body.appendChild(element);\n\t\telement.click();\n\t\tdocument.body.removeChild(element);\n\t}\n\n\tfetch() {\n\t\tconsole.log(getPresets());\n\t\tthis.setState({ presets: getPresets() });\n\t}\n\n\tloadPreset(presetIndex) {\n\t\tthis.props.loadPreset(presets[presetIndex]);\n\t\tthis.props.setPreset(presetIndex);\n\t\t// this.setState({ presetName: preset.meta.presetName });\n\t}\n\n\trenderButtons() {\n\t\tlet buttons = [];\n\t\tfor (let i = 0; i < 8; i++) {\n\t\t\tbuttons.push(\n\t\t\t\t<PresetButton\n\t\t\t\t\tkey={`button_${i}`}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tthis.loadPreset(i);\n\t\t\t\t\t}}\n\t\t\t\t\tpreset={i}\n\t\t\t\t\tactive={this.props.meta.preset === i}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn buttons;\n\t}\n\n\trender() {\n\t\treturn <Container>{this.renderButtons()}</Container>;\n\t}\n}\nconst mapStateToProps = (state) => {\n\treturn {\n\t\t...state.state,\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn bindActionCreators({ setParam, setPreset, loadPreset }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PresetManager);\n","import React from \"react\";\nimport { useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\n\nimport { connect } from \"react-redux\";\n\nconst Container = styled.div`\n\tpadding: 4px;\n\tbackground: linear-gradient(\n\t\t180deg,\n\t\trgba(36, 36, 36, 0.9) 0%,\n\t\trgba(23, 23, 23, 0.9) 100%\n\t);\n\tborder: 1px solid rgba(33, 33, 33, 0.4);\n\tborder-radius: 6px;\n\tmargin: 8px;\n\twidth: auto;\n\theight: 110px;\n\tposition: relative;\n`;\n\nconst Display = styled.div`\n\tbackground: linear-gradient(180deg, #1e1e1e 0.01%, #101010 100%);\n\tborder-radius: 2px;\n\tposition: relative;\n\theight: 100%;\n\t& > * {\n\t\topacity: ${(props) => (props.power === true ? 1 : 0)};\n\t\ttransition: all 0.5s;\n\t\ttransition-delay: 0.2s;\n\t}\n`;\n\nconst Canvas = styled.canvas`\nwidth:auto;\nposition:absolute;\ntop:0;\nleft:0;\nwidth:100%;\nheight:100%;\n`;\n\nfunction Oscilloscope(props) {\n\tconst { dataArray, note, power } = props;\n\tconst canvasRef = useRef();\n\n\tuseEffect(() => {\n\t\tlet canvas = canvasRef.current;\n\t\tlet context = canvas.getContext(\"2d\");\n\n\t\tcontext.clearRect(0, 0, canvas.width, canvas.height);\n\t\tif (!power) return;\n\n\t\tlet requestId;\n\n\t\tconst render = () => {\n\t\t\tcontext.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\t\tvar x = 0;\n\n\t\t\tcontext.lineWidth = 2;\n\t\t\tcontext.strokeStyle = \"#11CD43\";\n\t\t\tcontext.shadowOffsetX = 0;\n\t\t\tcontext.shadowOffsetY = 0;\n\t\t\tcontext.shadowBlur = 12;\n\t\t\tcontext.shadowColor = \"rgba(17, 205, 67, 0.88)\";\n\t\t\tcontext.beginPath();\n\t\t\tconst sampleRate = 44100;\n\t\t\tlet period = (sampleRate / note.freq) * 3;\n\n\t\t\t/*\n             const sampleTime = sampleRate * currentTime;\n             const sampleOffset = sampleTime % period;\n            */\n\n\t\t\tlet last;\n\t\t\tlet start = 0;\n\t\t\t//let end = dataArray.length;\n\t\t\tfor (var i = 0; i < dataArray.length; i++) {\n\t\t\t\tif (last > 0 && dataArray[i] <= 0) {\n\t\t\t\t\tstart = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t/*if (start && last < 0 && dataArray[i] >= 0) {\n                    end = i + (i - start) * 5\n                    break;\n\n                }*/\n\t\t\t\tlast = dataArray[i];\n\t\t\t}\n\n\t\t\t// period = end - start\n\t\t\tlet max = Math.max(...dataArray);\n\t\t\tmax = max < 1 ? 1 : max;\n\t\t\tvar sliceWidth = (canvas.width * 1) / period;\n\n\t\t\tfor (var j = 0; j < period; j++) {\n\t\t\t\tvar v = (dataArray[j + start] * 95) / (max * 2);\n\t\t\t\tvar y = v + canvas.height / 2;\n\t\t\t\tx = sliceWidth * j;\n\t\t\t\tif (j === 0) {\n\t\t\t\t\tcontext.moveTo(x, y);\n\t\t\t\t} else {\n\t\t\t\t\tcontext.lineTo(x, y);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontext.stroke();\n\n\t\t\trequestId = requestAnimationFrame(render);\n\t\t};\n\n\t\trender();\n\n\t\treturn () => {\n\t\t\tcancelAnimationFrame(requestId);\n\t\t};\n\t});\n\n\treturn (\n\t\t<Container>\n\t\t\t<Display power={power}>\n\t\t\t\t<Canvas ref={canvasRef} />\n\t\t\t</Display>\n\t\t</Container>\n\t);\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tdataArray: state.state.oscilloscope.dataArray,\n\t\tfftSize: state.state.oscilloscope.fftSize,\n\t\tcurrentTime: state.state.general.currentTime,\n\t\tnote: state.state.keyboard.note,\n\t\tpower: state.state.power.active,\n\t};\n};\n\nexport default connect(mapStateToProps, null)(Oscilloscope);\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { connect } from \"react-redux\";\nimport PowerSwitch from \"../components/PowerSwitch\";\nimport KnobControl from \"../components/KnobControl\";\nimport FaderControl from \"../components/FaderControl\";\nimport WaveformSelector from \"../components/WaveformSelector\";\nimport PresetManager from \"../components/PresetManager\";\nimport Oscilloscope from \"../components/Oscilloscope\";\n\nconst Row = styled.div`\n\tdisplay: flex;\n\ttext-align: center;\n\tjustify-content: space-between;\n\talign-items: flex-end;\n`;\n\nconst Container = styled.div`\n\tdisplay: flex;\n\talign-items: space-between;\n\tjustify-content: stretch;\n`;\n\nconst Column = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\ttext-align: center;\n\talign-items: stretch;\n`;\n\nconst ModuleLabel = styled.h2`\n\tbackground: white;\n\tmargin: 4px;\n\tcolor: #313131;\n\tfont-size: 16px;\n\tletter-spacing: 2.5px;\n\ttext-transform: uppercase;\n\tpadding: 5px;\n\tfont-weight: bold;\n\tborder-radius: 3px;\n`;\n\nconst ModuleContent = styled.div`\n\tpadding: 20px;\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: column;\n`;\nconst Module = styled.div`\n\ttext-align: center;\n\tborder: 0.5px solid;\n\tmargin: 8px;\n\tborder-radius: 6px;\n\tflex: ${(props) => (typeof props.flex !== \"undefined\" ? props.flex : 1)};\n\tdisplay: flex;\n\tflex-direction: column;\n`;\n\nclass Controls extends React.Component {\n\trender() {\n\t\tconst { props } = this;\n\n\t\treturn (\n\t\t\t<Container className=\"Controls\">\n\t\t\t\t<Column>\n\t\t\t\t\t<Module flex={`0 0 auto`}>\n\t\t\t\t\t\t<ModuleLabel>Master</ModuleLabel>\n\t\t\t\t\t\t<ModuleContent>\n\t\t\t\t\t\t\t<KnobControl\n\t\t\t\t\t\t\t\tdecimals={2}\n\t\t\t\t\t\t\t\tlabel={\"Gain\"}\n\t\t\t\t\t\t\t\tunit={\"\"}\n\t\t\t\t\t\t\t\tmodule={\"amp\"}\n\t\t\t\t\t\t\t\tparam={\"gain\"}\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tmax={1}\n\t\t\t\t\t\t\t\tdefault={1}\n\t\t\t\t\t\t\t\tvalue={props.amp.gain}\n\t\t\t\t\t\t\t></KnobControl>\n\t\t\t\t\t\t\t<KnobControl\n\t\t\t\t\t\t\t\tsnap={1}\n\t\t\t\t\t\t\t\tlabel={\"Octave\"}\n\t\t\t\t\t\t\t\tunit={\"\"}\n\t\t\t\t\t\t\t\tmodule={\"general\"}\n\t\t\t\t\t\t\t\tparam={\"octave\"}\n\t\t\t\t\t\t\t\tmin={-3}\n\t\t\t\t\t\t\t\tmax={3}\n\t\t\t\t\t\t\t\tdefault={0}\n\t\t\t\t\t\t\t\tvalue={props.general.octave}\n\t\t\t\t\t\t\t></KnobControl>\n\t\t\t\t\t\t\t<KnobControl\n\t\t\t\t\t\t\t\tlabel={\"Glide\"}\n\t\t\t\t\t\t\t\tdecimals={2}\n\t\t\t\t\t\t\t\tunit={\"s\"}\n\t\t\t\t\t\t\t\tmodule={\"general\"}\n\t\t\t\t\t\t\t\tparam={\"glide\"}\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tmax={3}\n\t\t\t\t\t\t\t\tdefault={0}\n\t\t\t\t\t\t\t\tvalue={props.general.glide}\n\t\t\t\t\t\t\t></KnobControl>\n\t\t\t\t\t\t</ModuleContent>\n\t\t\t\t\t</Module>\n\t\t\t\t\t<Oscilloscope></Oscilloscope>\n\n\t\t\t\t\t<Module>\n\t\t\t\t\t\t<ModuleLabel>POWER</ModuleLabel>\n\t\t\t\t\t\t<ModuleContent>\n\t\t\t\t\t\t\t<PowerSwitch module={\"power\"} value={props.power.active} />\n\t\t\t\t\t\t</ModuleContent>\n\t\t\t\t\t</Module>\n\t\t\t\t</Column>\n\n\t\t\t\t{props.vco.map((vco, i) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Column key={`vco_${i}`}>\n\t\t\t\t\t\t\t<Module>\n\t\t\t\t\t\t\t\t<ModuleLabel key={`vco_title_${i}`}>VCO {i + 1}</ModuleLabel>\n\t\t\t\t\t\t\t\t<ModuleContent>\n\t\t\t\t\t\t\t\t\t<KnobControl\n\t\t\t\t\t\t\t\t\t\tkey={`vco_semitones_${i}`}\n\t\t\t\t\t\t\t\t\t\tsnap={1}\n\t\t\t\t\t\t\t\t\t\tlabel={\"semitones\"}\n\t\t\t\t\t\t\t\t\t\tmodule={\"vco\"}\n\t\t\t\t\t\t\t\t\t\tmoduleIndex={i}\n\t\t\t\t\t\t\t\t\t\tparam={\"semitones\"}\n\t\t\t\t\t\t\t\t\t\tmin={-24}\n\t\t\t\t\t\t\t\t\t\tmax={24}\n\t\t\t\t\t\t\t\t\t\tdefault={0}\n\t\t\t\t\t\t\t\t\t\tvalue={props.vco[i].semitones}\n\t\t\t\t\t\t\t\t\t></KnobControl>\n\t\t\t\t\t\t\t\t\t<KnobControl\n\t\t\t\t\t\t\t\t\t\tkey={`vco_detune_${i}`}\n\t\t\t\t\t\t\t\t\t\tlabel={\"detune\"}\n\t\t\t\t\t\t\t\t\t\tunit={\"ct\"}\n\t\t\t\t\t\t\t\t\t\tmodule={\"vco\"}\n\t\t\t\t\t\t\t\t\t\tmoduleIndex={i}\n\t\t\t\t\t\t\t\t\t\tparam={\"detune\"}\n\t\t\t\t\t\t\t\t\t\tmin={-50}\n\t\t\t\t\t\t\t\t\t\tmax={50}\n\t\t\t\t\t\t\t\t\t\tdefault={0}\n\t\t\t\t\t\t\t\t\t\tvalue={props.vco[i].detune}\n\t\t\t\t\t\t\t\t\t></KnobControl>\n\t\t\t\t\t\t\t\t\t<FaderControl\n\t\t\t\t\t\t\t\t\t\tkey={`vco_gain2_${i}`}\n\t\t\t\t\t\t\t\t\t\tlabel={\"Gain\"}\n\t\t\t\t\t\t\t\t\t\tmodule={\"vco\"}\n\t\t\t\t\t\t\t\t\t\tmoduleIndex={i}\n\t\t\t\t\t\t\t\t\t\tparam={\"gain\"}\n\t\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\t\tmax={1}\n\t\t\t\t\t\t\t\t\t\tdefault={1}\n\t\t\t\t\t\t\t\t\t\tvalue={props.vco[i].gain}\n\t\t\t\t\t\t\t\t\t></FaderControl>\n\t\t\t\t\t\t\t\t\t<WaveformSelector\n\t\t\t\t\t\t\t\t\t\tkey={`vco_shape_${i}`}\n\t\t\t\t\t\t\t\t\t\tlabel={\"Type\"}\n\t\t\t\t\t\t\t\t\t\tmodule={\"vco\"}\n\t\t\t\t\t\t\t\t\t\tmoduleIndex={i}\n\t\t\t\t\t\t\t\t\t\tparam={\"type\"}\n\t\t\t\t\t\t\t\t\t\tvalue={props.vco[i].type}\n\t\t\t\t\t\t\t\t\t></WaveformSelector>\n\t\t\t\t\t\t\t\t</ModuleContent>\n\t\t\t\t\t\t\t</Module>\n\t\t\t\t\t\t</Column>\n\t\t\t\t\t);\n\t\t\t\t})}\n\n\t\t\t\t<Column>\n\t\t\t\t\t<Module flex={1.2}>\n\t\t\t\t\t\t<ModuleLabel>FILTER</ModuleLabel>\n\t\t\t\t\t\t<ModuleContent>\n\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t<KnobControl\n\t\t\t\t\t\t\t\t\tlabel={\"Cutoff\"}\n\t\t\t\t\t\t\t\t\tlog={true}\n\t\t\t\t\t\t\t\t\tunit={\"Hz\"}\n\t\t\t\t\t\t\t\t\tmodule={\"filter\"}\n\t\t\t\t\t\t\t\t\tsize={90}\n\t\t\t\t\t\t\t\t\tparam={\"frequency\"}\n\t\t\t\t\t\t\t\t\tmin={100}\n\t\t\t\t\t\t\t\t\tmax={20000}\n\t\t\t\t\t\t\t\t\tdefault={300}\n\t\t\t\t\t\t\t\t\tvalue={props.filter.frequency}\n\t\t\t\t\t\t\t\t></KnobControl>\n\t\t\t\t\t\t\t\t<KnobControl\n\t\t\t\t\t\t\t\t\tlabel={\"Resonance\"}\n\t\t\t\t\t\t\t\t\tmodule={\"filter\"}\n\t\t\t\t\t\t\t\t\tparam={\"resonance\"}\n\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\t\t\t\tdefault={0}\n\t\t\t\t\t\t\t\t\tvalue={props.filter.resonance}\n\t\t\t\t\t\t\t\t></KnobControl>\n\t\t\t\t\t\t\t\t<KnobControl\n\t\t\t\t\t\t\t\t\tlabel={\"EG INT\"}\n\t\t\t\t\t\t\t\t\tunit={\"%\"}\n\t\t\t\t\t\t\t\t\tmodule={\"filterEnvelope\"}\n\t\t\t\t\t\t\t\t\tparam={\"intensity\"}\n\t\t\t\t\t\t\t\t\tmin={-100}\n\t\t\t\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\t\t\t\tdefault={0}\n\t\t\t\t\t\t\t\t\tvalue={props.filterEnvelope.intensity}\n\t\t\t\t\t\t\t\t></KnobControl>\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t</ModuleContent>\n\t\t\t\t\t</Module>\n\t\t\t\t\t<Module flex={1}>\n\t\t\t\t\t\t<ModuleLabel>FILTER EG</ModuleLabel>\n\t\t\t\t\t\t<ModuleContent>\n\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t<KnobControl\n\t\t\t\t\t\t\t\t\tlabel={\"Attack\"}\n\t\t\t\t\t\t\t\t\tdecimals={2}\n\t\t\t\t\t\t\t\t\tunit={\"s\"}\n\t\t\t\t\t\t\t\t\tmodule={\"filterEnvelope\"}\n\t\t\t\t\t\t\t\t\tparam={\"attack\"}\n\t\t\t\t\t\t\t\t\tlog={true}\n\t\t\t\t\t\t\t\t\tmin={0.001}\n\t\t\t\t\t\t\t\t\tmax={10}\n\t\t\t\t\t\t\t\t\tvalue={props.filterEnvelope.attack}\n\t\t\t\t\t\t\t\t></KnobControl>\n\t\t\t\t\t\t\t\t<KnobControl\n\t\t\t\t\t\t\t\t\tlabel={\"Decay\"}\n\t\t\t\t\t\t\t\t\tdecimals={2}\n\t\t\t\t\t\t\t\t\tunit={\"s\"}\n\t\t\t\t\t\t\t\t\tmodule={\"filterEnvelope\"}\n\t\t\t\t\t\t\t\t\tparam={\"decay\"}\n\t\t\t\t\t\t\t\t\tlog={true}\n\t\t\t\t\t\t\t\t\tmin={0.001}\n\t\t\t\t\t\t\t\t\tmax={10}\n\t\t\t\t\t\t\t\t\tvalue={props.filterEnvelope.decay}\n\t\t\t\t\t\t\t\t></KnobControl>\n\t\t\t\t\t\t\t\t<KnobControl\n\t\t\t\t\t\t\t\t\tlabel={\"Sustain\"}\n\t\t\t\t\t\t\t\t\tunit={\"%\"}\n\t\t\t\t\t\t\t\t\tmodule={\"filterEnvelope\"}\n\t\t\t\t\t\t\t\t\tparam={\"sustain\"}\n\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\t\t\t\tvalue={props.filterEnvelope.sustain}\n\t\t\t\t\t\t\t\t></KnobControl>\n\t\t\t\t\t\t\t\t<KnobControl\n\t\t\t\t\t\t\t\t\tlabel={\"Release\"}\n\t\t\t\t\t\t\t\t\tdecimals={2}\n\t\t\t\t\t\t\t\t\tunit={\"s\"}\n\t\t\t\t\t\t\t\t\tmodule={\"filterEnvelope\"}\n\t\t\t\t\t\t\t\t\tparam={\"release\"}\n\t\t\t\t\t\t\t\t\tlog={true}\n\t\t\t\t\t\t\t\t\tmin={0.001}\n\t\t\t\t\t\t\t\t\tmax={10}\n\t\t\t\t\t\t\t\t\tvalue={props.filterEnvelope.release}\n\t\t\t\t\t\t\t\t></KnobControl>\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t</ModuleContent>\n\t\t\t\t\t</Module>\n\t\t\t\t\t<Module flex={1}>\n\t\t\t\t\t\t<ModuleLabel>AMP EG</ModuleLabel>\n\t\t\t\t\t\t<ModuleContent>\n\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<KnobControl\n\t\t\t\t\t\t\t\t\t\tlabel={\"Attack\"}\n\t\t\t\t\t\t\t\t\t\tdecimals={2}\n\t\t\t\t\t\t\t\t\t\tunit={\"s\"}\n\t\t\t\t\t\t\t\t\t\tmodule={\"envelope\"}\n\t\t\t\t\t\t\t\t\t\tparam={\"attack\"}\n\t\t\t\t\t\t\t\t\t\tlog={true}\n\t\t\t\t\t\t\t\t\t\tmin={0.001}\n\t\t\t\t\t\t\t\t\t\tmax={10}\n\t\t\t\t\t\t\t\t\t\tvalue={props.envelope.attack}\n\t\t\t\t\t\t\t\t\t></KnobControl>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<KnobControl\n\t\t\t\t\t\t\t\t\t\tlabel={\"Decay\"}\n\t\t\t\t\t\t\t\t\t\tdecimals={2}\n\t\t\t\t\t\t\t\t\t\tunit={\"s\"}\n\t\t\t\t\t\t\t\t\t\tmodule={\"envelope\"}\n\t\t\t\t\t\t\t\t\t\tparam={\"decay\"}\n\t\t\t\t\t\t\t\t\t\tlog={true}\n\t\t\t\t\t\t\t\t\t\tmin={0.001}\n\t\t\t\t\t\t\t\t\t\tmax={10}\n\t\t\t\t\t\t\t\t\t\tvalue={props.envelope.decay}\n\t\t\t\t\t\t\t\t\t></KnobControl>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<KnobControl\n\t\t\t\t\t\t\t\t\t\tlabel={\"Sustain\"}\n\t\t\t\t\t\t\t\t\t\tunit={\"%\"}\n\t\t\t\t\t\t\t\t\t\tmodule={\"envelope\"}\n\t\t\t\t\t\t\t\t\t\tparam={\"sustain\"}\n\t\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\t\t\t\t\tvalue={props.envelope.sustain}\n\t\t\t\t\t\t\t\t\t></KnobControl>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<KnobControl\n\t\t\t\t\t\t\t\t\t\tlabel={\"Release\"}\n\t\t\t\t\t\t\t\t\t\tdecimals={2}\n\t\t\t\t\t\t\t\t\t\tunit={\"s\"}\n\t\t\t\t\t\t\t\t\t\tmodule={\"envelope\"}\n\t\t\t\t\t\t\t\t\t\tparam={\"release\"}\n\t\t\t\t\t\t\t\t\t\tlog={true}\n\t\t\t\t\t\t\t\t\t\tmin={0.001}\n\t\t\t\t\t\t\t\t\t\tmax={10}\n\t\t\t\t\t\t\t\t\t\tvalue={props.envelope.release}\n\t\t\t\t\t\t\t\t\t></KnobControl>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t</ModuleContent>\n\t\t\t\t\t</Module>\n\n\t\t\t\t\t<Module style={{ flex: \"none\" }}>\n\t\t\t\t\t\t<PresetManager></PresetManager>\n\t\t\t\t\t</Module>\n\t\t\t\t</Column>\n\n\t\t\t\t{/*\n                    <Module>\n                        <ModuleLabel>Sequencer</ModuleLabel>\n                        <KnobControl label={\"Tempo\"} unit={\"BPM\"} module={'sequencer'} param={'tempo'} min={40} max={180} value={props.sequencer.tempo}></KnobControl>\n                        <KnobControl label={\"Gate\"} unit={\"%\"} module={'sequencer'} param={'gate'} min={0} max={100} value={props.sequencer.gate}></KnobControl>\n\n                        <Sequencer></Sequencer>\n                    </Module>\n                     */}\n\t\t\t</Container>\n\t\t);\n\t}\n}\nconst mapStateToProps = (state) => {\n\treturn {\n\t\t...state.state,\n\t};\n};\n/*\nconst mapDispatchToProps = (dispatch) => {\nreturn bindActionCreators({setPitch}, dispatch)\n}\n*/\n\nexport default connect(mapStateToProps, null)(Controls);\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport Controls from \"./Controls\";\n\nconst Container = styled.div`\n\tdisplay: flex;\n\twidth: 1200px;\n\theight: 820px;\n\tmin-height: 800px;\n\tmargin-top: -15px;\n\t@media (max-width: 1240px), (max-height: 870px) {\n\t\ttransform: scale(0.9);\n\t}\n\t@media (max-width: 1140px), (max-height: 780px) {\n\t\ttransform: scale(0.8);\n\t}\n\t@media (max-width: 1100px), (max-height: 700px) {\n\t\ttransform: scale(0.75);\n\t}\n`;\nconst Wood = styled.div`\n\tdisplay: flex;\n\tbackground: #9e5934;\n\tbackground-image: linear-gradient(\n\t\t180deg,\n\t\trgba(0, 0, 0, 0.04) 3%,\n\t\trgba(0, 0, 0, 0.18) 100%\n\t);\n\tbox-shadow: 0 12px 25px 0 rgba(0, 0, 0, 0.25),\n\t\t0 52px 54px 0 rgba(0, 0, 0, 0.2), inset -1px -2px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 2px 1px 0 rgba(255, 255, 255, 0.13);\n\tborder-radius: 4px 4px 4px 4px 0;\n\twidth: 50px;\n\tz-index: 9;\n\tposition: relative;\n\tbackground-size: cover;\n\tborder-radius: 4px;\n`;\nconst Header = styled.div`\n\tmargin-bottom: 5px;\n\tpadding-left: 8px;\n`;\n\nconst Panel = styled.div`\n\tdisplay: flex;\n\talign-items: space-between;\n\tjustify-content: stretch;\n\tflex-direction: column;\n\n\tbackground: #313131;\n\tbox-shadow: 0 12px 25px 0 rgba(0, 0, 0, 0.21),\n\t\t0 52px 54px 0 rgba(0, 0, 0, 0.12), inset 0 -1px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 1px 0 0 rgba(255, 255, 255, 0.13);\n\tborder-radius: 3px;\n\tpadding: 30px;\n\tpadding-top: 25px;\n\tposition: relative;\n\tz-index: 1;\n\tmargin: 10px 0;\n`;\n\nfunction Base() {\n\treturn (\n\t\t<Container>\n\t\t\t<Wood style={{ backgroundImage: \"url(images/wood-1.jpg)\" }} />\n\t\t\t<Panel>\n\t\t\t\t<Header>\n\t\t\t\t\t<img alt=\"Subtract one\" src=\"images/logo.svg\" />\n\t\t\t\t</Header>\n\n\t\t\t\t<Controls></Controls>\n\t\t\t</Panel>\n\t\t\t<Wood style={{ backgroundImage: \"url(images/wood-2.jpg)\" }} />\n\t\t</Container>\n\t);\n}\n\nexport default Base;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { onboardingReset, sharePatch } from \"../actions/actions.js\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { store } from \"../store\";\n\nconst Container = styled.div`\n\ttext-transform: uppercase;\n\tfont-size: 12px;\n\n\tletter-spacing: 2px;\n\tposition: absolute;\n\tbottom: 20px;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tleft: 20px;\n\tright: 20px;\n\tspan {\n\t\topacity: 0.5;\n\t}\n\tbutton,\n\ta {\n\t\topacity: 0.5;\n\t\tcolor: white;\n\t\ttext-decoration: none;\n\t\tdisplay: inline-block;\n\t\tborder: none;\n\t\ttext-transform: uppercase;\n\t\tfont-size: 12px;\n\t\tletter-spacing: 2px;\n\n\t\tborder-bottom: 1px dashed;\n\t\tbackground: none;\n\t\toutline: none;\n\t\tdisplay: inline;\n\t\tpadding: 0;\n\n\t\tcursor: pointer;\n\t\t&:hover {\n\t\t\topacity: 0.8;\n\t\t}\n\t}\n`;\n\nconst Item = styled(motion.div)``;\n\nfunction BottomBar({ onboardingReset, setPatchLink, show, sharePatch }) {\n\tconst animate = {\n\t\tanimate: { opacity: 1 },\n\t\texit: { opacity: 0 },\n\t\ttransition: { duration: 0.3 },\n\t};\n\n\tasync function share() {\n\t\tconst url = \"https://subtract.one\";\n\n\t\t//const url = \"http://localhost:3000\";\n\t\tconst state = store.getState();\n\t\tconst {\n\t\t\tpower,\n\t\t\tkeyboard,\n\t\t\tsequencer,\n\t\t\tamp,\n\t\t\tmeta,\n\t\t\toscilloscope,\n\t\t\tonboarding,\n\t\t\t...patch\n\t\t} = state.state;\n\n\t\tconst string = JSON.stringify(patch);\n\n\t\tconst whatsthis = `0fd40510df1fb0a5d106d8c02e61eb92145390ca`;\n\n\t\t//var queryString = Object.keys(state.state).map(key => key + '=' + state.state[key]).join('&');\n\t\t//  copyStringToClipboard(string)\n\n\t\tconst long_url = url + \"#\" + encodeURIComponent(string);\n\t\tconsole.log(long_url);\n\n\t\tawait fetch(\"https://api-ssl.bitly.com/v4/shorten\", {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: new Headers({\n\t\t\t\tAuthorization: `Bearer ${whatsthis}`,\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t}),\n\t\t\tbody: JSON.stringify({\n\t\t\t\tlong_url,\n\t\t\t}),\n\t\t})\n\t\t\t.then((res) => res.json())\n\t\t\t.then(\n\t\t\t\t(result) => {\n\t\t\t\t\tconsole.log(result.link);\n\t\t\t\t\tsharePatch(result.link);\n\t\t\t\t},\n\t\t\t\t// Note: it's important to handle errors here\n\t\t\t\t// instead of a catch() block so that we don't swallow\n\t\t\t\t// exceptions from actual bugs in components.\n\t\t\t\t(error) => {\n\t\t\t\t\talert(\"Something went wrong\");\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\treturn (\n\t\t<Container>\n\t\t\t<AnimatePresence>\n\t\t\t\t{show && [\n\t\t\t\t\t<Item {...animate}>\n\t\t\t\t\t\t<button onClick={onboardingReset}>How to use </button>\n\t\t\t\t\t</Item>,\n\t\t\t\t\t<Item {...animate}>\n\t\t\t\t\t\t{/* <span>Code by </span>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\thref=\"https://twitter.com/juliussohn\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tJulius Sohn\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t&nbsp; */}\n\t\t\t\t\t\t<span>Made by </span>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\thref=\"https://www.linkedin.com/in/jakichen/\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tJaki Chen\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</Item>,\n\t\t\t\t\t<Item {...animate}>\n\t\t\t\t\t\t<button onClick={share}>Share Patch </button>{\" \"}\n\t\t\t\t\t</Item>,\n\t\t\t\t]}\n\t\t\t</AnimatePresence>\n\t\t</Container>\n\t);\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\t...state.state.onboarding,\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn bindActionCreators({ onboardingReset, sharePatch }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BottomBar);\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { closeShareModal } from \"../actions/actions.js\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\nconst Overlay = styled(motion.div)`\n\tbackground-color: rgba(0, 0, 0, 0.3);\n\tposition: fixed;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0%;\n\tright: 0;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tz-index: 99;\n`;\n\nconst Modal = styled(motion.div)`\n\tbackground-color: #141414;\n\tpadding: 60px;\n\tborder-radius: 10px;\n\tbox-shadow: 0px 24px 44px rgba(0, 0, 0, 0.15);\n\tposition: relative;\n\twidth: 640px;\n\tposition: fixed;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translateX(-50%) translateY(-50%);\n\tz-index: 999;\n`;\nconst CopyButton = styled.button`\n\tpadding: 16px;\n\tborder-top-right-radius: 4px;\n\tborder-bottom-right-radius: 4px;\n\tbackground: #333333;\n\tfont-size: 14px;\n\ttext-transform: uppercase;\n\tfont-weight: 600;\n\tcolor: white;\n\tborder: none;\n\toutline: none;\n\twidth: 120px;\n\tcursor: pointer;\n\t&:hover {\n\t\tbackground-color: #444444;\n\t}\n`;\n\nconst Input = styled.input`\n\tborder: 1px solid #333333;\n\tbox-sizing: border-box;\n\tborder-top-left-radius: 4px;\n\tborder-bottom-left-radius: 4px;\n\tbackground: none;\n\tpadding: 12px;\n\tcolor: white;\n\tfont-size: 20px;\n\toutline: none;\n\tmargin-right: 0;\n\tflex: 1;\n\twidth: auto;\n\tdisplay: block;\n\tmin-width: 0;\n`;\nconst Close = styled.a`\n\tposition: absolute;\n\ttop: 20px;\n\tright: 20px;\n\topacity: 0.5;\n\tcursor: pointer;\n\t&:hover {\n\t\topacity: 0.8;\n\t}\n`;\nconst Title = styled.div`\n\tfont-family: \"Syne Bold\";\n\tfont-size: 50px;\n\tmargin: 0;\n\tfont-weight: bold;\n`;\n\nconst SocialShare = styled.a`\n\tcursor: pointer;\n\tflex-shrink: 0;\n\theight: 58px;\n\twidth: 58px;\n\tborder-radius: 4px;\n\tbackground-color: #333333;\n\tmargin-left: 12px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\timg {\n\t\twidth: 30px;\n\t}\n\t&:hover {\n\t\tbackground-color: #444444;\n\t}\n`;\n\nconst Link = styled.div`\n\tdisplay: flex;\n\tflex: 1;\n`;\nconst Description = styled.p`\n\tmargin-left: 70px;\n\tfont-size: 16px;\n\tline-height: 1.5;\n\tmargin-top: 0;\n\tmargin-bottom: 5px;\n\tcolor: #a8a8a8;\n`;\n\nconst Header = styled.div`\n\tdisplay: flex;\n\tmargin-bottom: 30px;\n\talign-items: flex-end;\n`;\n\nconst ShareOptions = styled.div`\n\tdisplay: flex;\n`;\n\nfunction BottomBar({ shareModal, patchLink, closeShareModal }) {\n\tconst [copyLabel, setCopyLabel] = useState(\"Copy Link\");\n\n\tfunction copyToClipBoard() {\n\t\tvar el = document.createElement(\"textarea\");\n\t\tel.value = patchLink;\n\t\tel.setAttribute(\"readonly\", \"\");\n\t\tel.style = { position: \"absolute\", left: \"-9999px\" };\n\t\tdocument.body.appendChild(el);\n\t\tel.select();\n\t\tdocument.execCommand(\"copy\");\n\t\tdocument.body.removeChild(el);\n\t\tsetCopyLabel(\"Copied!\");\n\t}\n\n\tfunction closeModal() {\n\t\tcloseShareModal();\n\t}\n\n\treturn (\n\t\t<AnimatePresence>\n\t\t\t{shareModal && [\n\t\t\t\t<Overlay\n\t\t\t\t\tkey=\"overlay\"\n\t\t\t\t\tinitial={{ opacity: 0 }}\n\t\t\t\t\tanimate={{ opacity: 1 }}\n\t\t\t\t\texit={{ opacity: 0 }}\n\t\t\t\t></Overlay>,\n\t\t\t\t<Modal\n\t\t\t\t\tkey=\"modal\"\n\t\t\t\t\tinitial={{ y: `-35%`, x: `-50%`, opacity: 0 }}\n\t\t\t\t\tanimate={{ y: `-50%`, x: `-50%`, opacity: 1 }}\n\t\t\t\t\texit={{\n\t\t\t\t\t\ty: `-35%`,\n\t\t\t\t\t\tx: `-50%`,\n\t\t\t\t\t\topacity: 0,\n\t\t\t\t\t}}\n\t\t\t\t\tonAnimationComplete={() => {\n\t\t\t\t\t\tsetCopyLabel(\"Copy Link\");\n\t\t\t\t\t}}\n\t\t\t\t\ttransition={{ type: \"spring\", stiffness: 100, damping: 300 }}\n\t\t\t\t>\n\t\t\t\t\t<Close onClick={closeModal}>\n\t\t\t\t\t\t<img alt=\"close\" src=\"images/x.svg\" />\n\t\t\t\t\t</Close>\n\t\t\t\t\t<Header>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Title>Share Patch</Title>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Description>\n\t\t\t\t\t\t\tWhen opening the link below, all settings will be preserved and\n\t\t\t\t\t\t\tthe synth will create the exact same sound.\n\t\t\t\t\t\t</Description>\n\t\t\t\t\t</Header>\n\n\t\t\t\t\t<ShareOptions>\n\t\t\t\t\t\t<Link>\n\t\t\t\t\t\t\t<Input type=\"text\" readonly value={patchLink} />\n\t\t\t\t\t\t\t<CopyButton onClick={copyToClipBoard}>{copyLabel}</CopyButton>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<SocialShare\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\thref={`https://twitter.com/intent/tweet?url=${patchLink}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img alt=\"Twitter\" src=\"images/twitter.svg\" />\n\t\t\t\t\t\t</SocialShare>\n\t\t\t\t\t\t<SocialShare\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\thref={`https://www.facebook.com/sharer/sharer.php?u=${patchLink}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img alt=\"Facebook\" src=\"images/facebook.svg\" />\n\t\t\t\t\t\t</SocialShare>\n\t\t\t\t\t</ShareOptions>\n\t\t\t\t</Modal>,\n\t\t\t]}\n\t\t</AnimatePresence>\n\t);\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\t...state.state.onboarding,\n\t\t...state.state.meta,\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn bindActionCreators({ closeShareModal }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BottomBar);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { onboardingNextStep, onboardingFinish } from \"../../actions/actions.js\";\nimport { motion } from \"framer-motion\";\nimport { setOnboardingState } from \"../../localStorage\";\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tposition: relative;\n\tz-index: 10;\n`;\nconst CounterContainer = styled.div`\n\tdisplay: flex;\n\theight: 20px;\n\tfont-size: 20px;\n\tletter-spacing: 8px;\n\tline-height: 1;\n\tposition: relative;\n\twidth: 100px;\n\toverflow: hidden;\n\theight: 40px;\n`;\nconst CurrentPageContainer = styled.div`\n\twidth: 20px;\n\tposition: absolute;\n\tbottom: 0;\n`;\n\nconst Page = styled(motion.div)`\n\tposition: absolute;\n\ttext-align: right;\n\tfont-size: 40px;\n\tleft: 0px;\n\tbottom: 0px;\n\twidth: 30px;\n`;\n\nconst TotalSteps = styled.div`\n\tposition: absolute;\n\tbottom: 0;\n\tleft: 30px;\n`;\n\nconst ArrowButtonContainer = styled(motion.div)`\n\tcursor: pointer;\n`;\n\nconst circleMotion = {\n\trest: {\n\t\tstrokeDasharray: 170,\n\t\tstrokeDashoffset: 170,\n\t\trotate: 0,\n\t\tstroke: \"white\",\n\t},\n\thover: {\n\t\trotate: 270,\n\t\tstrokeDashoffset: 0,\n\t},\n\tloading: {\n\t\tstrokeDasharray: 170,\n\t\tstrokeDashoffset: 170,\n\t\trotate: 900,\n\t},\n};\n\nconst arrowMotion = {\n\trest: {\n\t\topacity: 0.8,\n\t\ttranslateX: 0,\n\t},\n\thover: {\n\t\topacity: 1,\n\t\ttranslateX: 0,\n\t},\n\ttap: {},\n\tloading: {\n\t\topacity: [1, 1, 0, 0, 1],\n\t\ttranslateX: [0, 200, 200, -200, -200],\n\t\ttransition: {\n\t\t\tduration: 2,\n\t\t\ttimes: [0, 0.3, 0.4, 0.6, 1],\n\t\t},\n\t},\n};\n\nclass ArrowButton extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\thover: false,\n\t\t\tstate: \"rest\",\n\t\t};\n\n\t\tthis.onTap = this.onTap.bind(this);\n\t\tthis.onHoverStart = this.onHoverStart.bind(this);\n\t\tthis.onHoverEnd = this.onHoverEnd.bind(this);\n\t\tthis.onTapStart = this.onTapStart.bind(this);\n\t}\n\tonTap() {\n\t\tif (this.state.state === \"loading\") return;\n\n\t\tthis.props.onClick();\n\t\tthis.setState({ state: \"loading\" });\n\t\tsetTimeout(() => {\n\t\t\tthis.setState({ state: this.state.hover ? \"hover\" : \"rest\" });\n\t\t}, 2000);\n\t}\n\tonHoverStart() {\n\t\tthis.setState({ hover: true });\n\t\tif (this.state.state === \"loading\") return;\n\t\tthis.setState({ state: \"hover\" });\n\t}\n\tonHoverEnd() {\n\t\tthis.setState({ hover: false });\n\t\tif (this.state.state === \"loading\") return;\n\t\tthis.setState({ state: \"rest\" });\n\t}\n\tonTapStart() {\n\t\tif (this.state.state === \"loading\") return;\n\t\tthis.setState({ state: \"tap\" });\n\t}\n\n\trender() {\n\t\tconst { state } = this.state;\n\t\treturn (\n\t\t\t<ArrowButtonContainer\n\t\t\t\tonHoverEnd={this.onHoverEnd}\n\t\t\t\tonTapStart={this.onTapStart}\n\t\t\t\tonHoverStart={this.onHoverStart}\n\t\t\t\tonTap={this.onTap}\n\t\t\t\ttransition={{ damping: 300, type: \"spring\" }}\n\t\t\t\tinitial=\"rest\"\n\t\t\t>\n\t\t\t\t<svg width=\"54\" height=\"54\" viewBox=\"0 0 54 54\" fill=\"none\">\n\t\t\t\t\t<circle cx=\"27\" cy=\"27\" r=\"26.5\" stroke=\"grey\" />\n\t\t\t\t\t<motion.circle\n\t\t\t\t\t\ttransition={{ damping: 300, type: \"spring\", mass: 2 }}\n\t\t\t\t\t\tanimate={state}\n\t\t\t\t\t\tvariants={circleMotion}\n\t\t\t\t\t\tcx=\"27\"\n\t\t\t\t\t\tcy=\"27\"\n\t\t\t\t\t\tr=\"26.5\"\n\t\t\t\t\t\tstroke=\"white\"\n\t\t\t\t\t/>\n\t\t\t\t\t<motion.path\n\t\t\t\t\t\ttransition={{ damping: 300, type: \"spring\", mass: 2 }}\n\t\t\t\t\t\tanimate={state}\n\t\t\t\t\t\tvariants={arrowMotion}\n\t\t\t\t\t\td=\"M32.7895 21.12L31.1395 22.74L34.5895 26.52H16.4395V28.77H34.5895L31.1395 32.55L32.7895 34.17L38.6995 27.63L32.7895 21.12Z\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t</ArrowButtonContainer>\n\t\t);\n\t}\n}\n\nclass ControlBar extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tprevStep: 0,\n\t\t\tanimating: false,\n\t\t};\n\t\tthis.totalSteps = 3;\n\t\tthis.onPressNext = this.onPressNext.bind(this);\n\t}\n\trenderCounter() {\n\t\tconst { currentStep } = this.props;\n\t\tconst { animating } = this.state;\n\t\tconst transition = { type: \"spring\", damping: 300, mass: 2 };\n\t\treturn (\n\t\t\t<CounterContainer>\n\t\t\t\t<CurrentPageContainer>\n\t\t\t\t\t{animating && (\n\t\t\t\t\t\t<Page\n\t\t\t\t\t\t\tkey={currentStep}\n\t\t\t\t\t\t\tanimate={{ y: `-100%` }}\n\t\t\t\t\t\t\ttransition={transition}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{currentStep}\n\t\t\t\t\t\t</Page>\n\t\t\t\t\t)}\n\t\t\t\t\t{animating && (\n\t\t\t\t\t\t<Page\n\t\t\t\t\t\t\tkey={currentStep + 1}\n\t\t\t\t\t\t\tinitial={{ y: `100%` }}\n\t\t\t\t\t\t\tanimate={{ y: 0 }}\n\t\t\t\t\t\t\tonAnimationComplete={() => {\n\t\t\t\t\t\t\t\tthis.setState({ animating: false });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttransition={transition}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{currentStep + 1}\n\t\t\t\t\t\t</Page>\n\t\t\t\t\t)}\n\t\t\t\t\t{!animating && <Page>{currentStep + 1}</Page>}\n\t\t\t\t</CurrentPageContainer>\n\t\t\t\t<TotalSteps>/{this.totalSteps}</TotalSteps>\n\t\t\t</CounterContainer>\n\t\t);\n\t}\n\n\tonPressNext() {\n\t\tconst { currentStep, onboardingNextStep, onboardingFinish } = this.props;\n\t\tif (currentStep < 2) {\n\t\t\tonboardingNextStep();\n\t\t} else {\n\t\t\tsetOnboardingState(true);\n\t\t\tonboardingFinish();\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t{this.renderCounter()}\n\t\t\t\t<ArrowButton onClick={this.onPressNext}></ArrowButton>\n\t\t\t</Container>\n\t\t);\n\t}\n\tcomponentDidUpdate(prevProps) {\n\t\tif (prevProps.currentStep === this.props.currentStep) return;\n\t\tthis.setState({ animating: true, prevStep: prevProps.currentStep });\n\t}\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\t...state.state.onboarding,\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn bindActionCreators({ onboardingNextStep, onboardingFinish }, dispatch);\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(ControlBar);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { connect } from \"react-redux\";\nimport { onboardingAnimationComplete } from \"../../actions/actions.js\";\nimport { bindActionCreators } from \"redux\";\n\nconst Headline = styled(motion.h1)`\n\tmargin-bottom: 40px;\n`;\n\nconst Paragraph = styled(motion.p)`\n\tfont-family: Arimo;\n\tfont-style: normal;\n\tfont-weight: normal;\n\tfont-size: 20px;\n\tline-height: 1.55;\n\tmargin: 0;\n\topacity: 1;\n`;\nconst Container = styled.div``;\n\nconst HeadlineContainer = styled.div`\n\tposition: relative;\n`;\n\nconst ParagraphContainer = styled.div`\n\tposition: relative;\n\talign-self: flex-start;\n`;\n\nconst Bar = styled(motion.div)`\n\tbackground: white;\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tpointer-events: none;\n\topacity: 1;\n`;\n\nconst bar = {\n\theadline: 77,\n\tparagraph: 24,\n\tspacing: 7,\n};\n\nconst animation = {\n\toffset: 0.06,\n\tspeed: 0.5,\n\tease: \"easeInOut\",\n};\n\nconst ImageContainer = styled.div`\n\tposition: relative;\n\tdisplay: flex;\n\talign-self: flex-start;\n`;\n\nconst Image = styled(motion.div)`\n\tdisplay: flex;\n\tflex-direction: column;\n\ttext-align: center;\n\tmargin-right: 90px;\n\twidth: 200px;\n\tmargin-top: 40px;\n\n\timg {\n\t\twidth: 100%;\n\t}\n`;\nconst ImageLabel = styled.div`\n\tmargin-top: 40px;\n\tfont-size: 16px;\n\tline-height: 145%;\n`;\n\nconst ImageSmallLabel = styled.div`\n\tfont-size: 12px;\n\topacity: 0.6;\n\tmargin-top: 4px;\n`;\n\nclass AnimatedText extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tshow: false,\n\t\t\theadlineBarCount: 0,\n\t\t\tparagraphBarCount: 0,\n\t\t\tfinished: {\n\t\t\t\tparagraph: false,\n\t\t\t\theadline: false,\n\t\t\t\timages: this.props.images ? false : true,\n\t\t\t},\n\t\t};\n\t}\n\n\tisCurrent() {\n\t\tconst { show } = this.props;\n\t\treturn show && this.state.show;\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tconst { animating, show } = this.props;\n\t\t//when prev animation finished\n\t\tif (prevProps.animating !== animating && !animating && show) {\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tif (this.props.show) this.show();\n\t}\n\n\tshow() {\n\t\tthis.setState({ show: true }, () => {\n\t\t\t//Headline\n\t\t\tconst headlineHeight = this.headlineContainer.getBoundingClientRect()\n\t\t\t\t.height;\n\t\t\tconst headlineBarCount = Math.ceil(\n\t\t\t\theadlineHeight / (bar.headline + bar.spacing + 0.5 * bar.spacing)\n\t\t\t);\n\n\t\t\t//Text\n\t\t\tconst paragraphHeight = this.paragraphContainer.getBoundingClientRect()\n\t\t\t\t.height;\n\t\t\tconst paragraphBarCount = Math.ceil(\n\t\t\t\tparagraphHeight / (bar.paragraph + bar.spacing + 0.5 * bar.spacing)\n\t\t\t);\n\t\t\tconsole.log(paragraphBarCount);\n\n\t\t\tthis.setState({ headlineBarCount, paragraphBarCount });\n\t\t});\n\t}\n\n\tsetBars() {\n\t\tconst { barHeight } = this.props;\n\t\tconst containerHeight = this.container.getBoundingClientRect().height;\n\t\tconst barCount = Math.ceil(\n\t\t\tcontainerHeight / (barHeight + bar.spacing + 0.5 * bar.spacing)\n\t\t);\n\t\tthis.setState({ barCount });\n\t}\n\n\tbarAnimationComplete(i) {\n\t\tif (!this.props.isVisible && i === this.state.barCount - 1) {\n\t\t\talert(`done`);\n\t\t}\n\t}\n\n\tgetTransition(count) {\n\t\tconst restTime = animation.offset * count;\n\t\tconst duration = animation.speed * 2 + restTime;\n\t\tconst restRelative = restTime / duration;\n\t\tconst inOutRelative = animation.speed / duration;\n\t\tconst times = [0, inOutRelative, inOutRelative + restRelative, 1];\n\n\t\treturn {\n\t\t\tease: animation.ease,\n\t\t\ttimes,\n\t\t\tduration,\n\t\t};\n\t}\n\n\tgetBars(height, count, callback) {\n\t\tconst transition = this.getTransition(count);\n\t\tconst finished = (i) => {\n\t\t\tif (i === count - 1 && !this.isCurrent()) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t};\n\n\t\treturn [...Array(count)].map((b, i) => {\n\t\t\tconst top = i * (height + bar.spacing) + 0.5 * bar.spacing;\n\t\t\tconst delay = i * animation.offset;\n\n\t\t\treturn (\n\t\t\t\t<Bar\n\t\t\t\t\tkey={`bar_${i}`}\n\t\t\t\t\tstyle={{ height: `${height}px`, top: `${top}px` }}\n\t\t\t\t\tinitial={{ left: `0%`, right: `100%` }}\n\t\t\t\t\tanimate={{\n\t\t\t\t\t\tleft: [`0%`, `0%`, `0%`, `100%`],\n\t\t\t\t\t\tright: [`100%`, `0%`, `0%`, `0%`],\n\t\t\t\t\t}}\n\t\t\t\t\texit={{\n\t\t\t\t\t\tleft: [`100%`, `0%`, `0%`, `0%`],\n\t\t\t\t\t\tright: [`0%`, `0%`, `0%`, `100%`],\n\t\t\t\t\t}}\n\t\t\t\t\ttransition={{ ...transition, delay }}\n\t\t\t\t\tonAnimationComplete={() => {\n\t\t\t\t\t\tfinished(i);\n\t\t\t\t\t}}\n\t\t\t\t></Bar>\n\t\t\t);\n\t\t});\n\t}\n\n\tgetText(content, wrapper, lineCount) {\n\t\tconst transition = this.getTransition(lineCount);\n\t\tconst delay = animation.offset * (lineCount - 1);\n\t\tconst Wrapper = wrapper;\n\n\t\treturn (\n\t\t\t<Wrapper\n\t\t\t\tref={`text`}\n\t\t\t\tinitial={{ opacity: 0 }}\n\t\t\t\tanimate={{ opacity: [0, 0, 1, 1] }}\n\t\t\t\texit={{ opacity: [1, 1, 0, 0] }}\n\t\t\t\ttransition={{ ...transition, ease: \"linear\", delay }}\n\t\t\t>\n\t\t\t\t{content}\n\t\t\t</Wrapper>\n\t\t);\n\t}\n\n\tgetImages() {\n\t\tconst { images } = this.props;\n\t\tif (!images) return;\n\t\treturn images.map((item, i) => (\n\t\t\t<Image\n\t\t\t\tkey={i}\n\t\t\t\tinitial={{ opacity: 0, y: 30 }}\n\t\t\t\tanimate={{ opacity: 1, y: 0 }}\n\t\t\t\texit={{ opacity: 0, y: 30 }}\n\t\t\t\ttransition={{\n\t\t\t\t\tdelay: 0.3 + i * 0.2,\n\t\t\t\t\ty: { type: \"spring\", stiffness: 100 },\n\t\t\t\t}}\n\t\t\t\tonAnimationComplete={() => {\n\t\t\t\t\tthis.animationComplete(\"images\");\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<img alt={item.text} src={`images/${item.image}`} />\n\t\t\t\t<ImageLabel>{item.text}</ImageLabel>\n\t\t\t\t{item.small && <ImageSmallLabel>{item.small}</ImageSmallLabel>}\n\t\t\t</Image>\n\t\t));\n\t}\n\n\tanimationComplete(element) {\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tfinished: {\n\t\t\t\t\t...this.state.finished,\n\t\t\t\t\t[element]: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tconst { paragraph, headline, images } = this.state.finished;\n\t\t\t\tif (paragraph && headline && images) {\n\t\t\t\t\tsetTimeout(this.props.onboardingAnimationComplete, 300);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { headlineBarCount, paragraphBarCount } = this.state;\n\t\tconst { headline, children } = this.props;\n\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<HeadlineContainer\n\t\t\t\t\tref={(el) => {\n\t\t\t\t\t\tthis.headlineContainer = el;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<AnimatePresence>\n\t\t\t\t\t\t{this.isCurrent() &&\n\t\t\t\t\t\t\tthis.getBars(bar.headline, headlineBarCount, () => {\n\t\t\t\t\t\t\t\tthis.animationComplete(\"headline\");\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t{this.isCurrent() &&\n\t\t\t\t\t\t\tthis.getText(headline, Headline, headlineBarCount)}\n\t\t\t\t\t</AnimatePresence>\n\t\t\t\t</HeadlineContainer>\n\t\t\t\t<ParagraphContainer\n\t\t\t\t\tref={(el) => {\n\t\t\t\t\t\tthis.paragraphContainer = el;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<AnimatePresence>\n\t\t\t\t\t\t{this.isCurrent() &&\n\t\t\t\t\t\t\tthis.getBars(bar.paragraph, paragraphBarCount, () => {\n\t\t\t\t\t\t\t\tthis.animationComplete(\"paragraph\");\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t{this.isCurrent() &&\n\t\t\t\t\t\t\tthis.getText(children, Paragraph, paragraphBarCount)}\n\t\t\t\t\t</AnimatePresence>\n\t\t\t\t</ParagraphContainer>\n\t\t\t\t<ImageContainer>\n\t\t\t\t\t<AnimatePresence>\n\t\t\t\t\t\t{this.isCurrent() && this.getImages()}\n\t\t\t\t\t</AnimatePresence>\n\t\t\t\t</ImageContainer>\n\t\t\t</Container>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\t...state.state.onboarding,\n\t};\n};\nconst mapDispatchToProps = (dispatch) => {\n\treturn bindActionCreators({ onboardingAnimationComplete }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AnimatedText);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport ControlBar from \"./ControlBar\";\nimport AnimatedText from \"./AnimatedText\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { connect } from \"react-redux\";\n\nconst Container = styled(motion.div)`\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0%;\n\tbottom: 0;\n\tmin-width: 600px;\n\twidth: 45%;\n\tpadding: 110px;\n\tjustify-content: space-between;\n\tflex-direction: column;\n\tz-index: 99;\n\tdisplay: flex;\n\t@media (max-height: 800px) {\n\t\tpadding: 60px;\n\t}\n`;\n\nfunction Onboarding({ finished, currentStep }) {\n\treturn (\n\t\t<AnimatePresence initial={false}>\n\t\t\t{!finished && (\n\t\t\t\t<Container\n\t\t\t\t\tinitial={{ x: `0%`, opacity: 1 }}\n\t\t\t\t\tanimate={{ x: `0%`, opacity: 1 }}\n\t\t\t\t\texit={{ x: `-100%`, opacity: 0 }}\n\t\t\t\t\ttransition={{\n\t\t\t\t\t\ttype: \"spring\",\n\t\t\t\t\t\tstiffness: 100,\n\t\t\t\t\t\tmass: 2,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<ControlBar></ControlBar>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<AnimatedText headline=\"SUBTRACT ONE\" show={0 === currentStep}>\n\t\t\t\t\t\t\tThis is Subtract One, an analog inspired, subtractive, monophonic\n\t\t\t\t\t\t\tsynthesizer, powered by 3 oscillators, a filter, and two envelope\n\t\t\t\t\t\t\tgenerators, controlling the amplitude and the filter. It’s\n\t\t\t\t\t\t\tcompletely written in JavaScript, using the Web Audio API.\n\t\t\t\t\t\t</AnimatedText>\n\t\t\t\t\t\t<AnimatedText\n\t\t\t\t\t\t\theadline=\"Playing a note\"\n\t\t\t\t\t\t\tshow={1 === currentStep}\n\t\t\t\t\t\t\timages={[\n\t\t\t\t\t\t\t\t{ image: \"keyboard.png\", text: \"Use your keyboard\" },\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\timage: \"midi-keyboard.png\",\n\t\t\t\t\t\t\t\t\ttext: \"Connect a MIDI Device\",\n\t\t\t\t\t\t\t\t\tsmall: \"Only in Chrome\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAs you see, there is no piano roll attached to the synthesizer.\n\t\t\t\t\t\t\tThat’s a very common thing. These types of synthesizers are called\n\t\t\t\t\t\t\tmodules and are controlled by external devices like keyboards or\n\t\t\t\t\t\t\tsequencers.\n\t\t\t\t\t\t</AnimatedText>\n\t\t\t\t\t\t<AnimatedText\n\t\t\t\t\t\t\theadline=\"Changing the sound\"\n\t\t\t\t\t\t\tshow={2 === currentStep}\n\t\t\t\t\t\t\timages={[\n\t\t\t\t\t\t\t\t{ image: \"knobs.png\", text: \"Turn some knobs\" },\n\t\t\t\t\t\t\t\t{ image: \"presets.png\", text: \"Try & modify a preset.\" },\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAnalog synthesizers offer an indefinite amount of different\n\t\t\t\t\t\t\tsounds. You can create heavy bass sounds, bright bells,\n\t\t\t\t\t\t\tatmospheric pads and so much more.\n\t\t\t\t\t\t</AnimatedText>\n\t\t\t\t\t</div>\n\t\t\t\t</Container>\n\t\t\t)}\n\t\t</AnimatePresence>\n\t);\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\t...state.state.onboarding,\n\t};\n};\n\nexport default connect(mapStateToProps, null)(Onboarding);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport AudioEngine from \"./components/AudioEngine\";\nimport Base from \"./components/Base\";\nimport BottomBar from \"./components/BottomBar\";\nimport ShareModal from \"./components/ShareModal\";\nimport Onboarding from \"./components/Onboarding/Onboarding\";\nimport { motion } from \"framer-motion\";\nimport { connect } from \"react-redux\";\nimport { useState, useEffect } from \"react\";\nimport AnimatedText from \"./components/Onboarding/AnimatedText\";\n\nconst AppContainer = styled.div`\n\talign-items: center;\n\t/*justify-content:center;*/\n\theight: ${(props) => props.height}px;\n\twidth: 100vw;\n\talign-items: stretch;\n\toverflow: hidden;\n`;\n\nconst SynthContainer = styled(motion.div)`\n\twidth: 100vw;\n\theight: 100%;\n\toverflow: hidden;\n\tpadding: 50px;\n\talign-items: center;\n\tjustify-content: space-around;\n\tdisplay: flex;\n\tflex-direction: column;\n\tpointer-events: ${(props) => (props.clickable ? \"auto\" : \"none\")};\n`;\n\nconst PhoneContainer = styled.div`\n\twidth: 80%;\n\tmax-width: 500px;\n\tpadding: 20px;\n\tposition: fixed;\n\ttop: 20px;\n\tleft: 20px;\n`;\nconst variants = {\n\tonboarding: { x: `45%` },\n\tonboardingSmall: { x: `100%` },\n\tdefault: { x: `0%` },\n};\n\nfunction App({ finished }) {\n\tconst size = useWindowSize();\n\n\tif (size.height < 600 || size.width < 900)\n\t\treturn (\n\t\t\t<PhoneContainer>\n\t\t\t\t<AnimatedText headline=\"Oh, Heck!\" show={true}>\n\t\t\t\t\tThis screen is to small to properly shred. Those knobs would be tiny.\n\t\t\t\t\tHow did you imagine this would work? Please open this site on a tablet\n\t\t\t\t\tor desktop device.\n\t\t\t\t</AnimatedText>\n\t\t\t</PhoneContainer>\n\t\t);\n\treturn (\n\t\t<AppContainer height={size.height}>\n\t\t\t<ShareModal></ShareModal>\n\t\t\t<AudioEngine></AudioEngine>\n\t\t\t<Onboarding></Onboarding>\n\t\t\t<SynthContainer\n\t\t\t\tclickable={finished}\n\t\t\t\tvariants={variants}\n\t\t\t\tinitial={\n\t\t\t\t\tfinished\n\t\t\t\t\t\t? `default`\n\t\t\t\t\t\t: size.width <= 1024\n\t\t\t\t\t\t? `onboardingSmall`\n\t\t\t\t\t\t: `onboarding`\n\t\t\t\t}\n\t\t\t\tanimate={\n\t\t\t\t\tfinished\n\t\t\t\t\t\t? `default`\n\t\t\t\t\t\t: size.width <= 1024\n\t\t\t\t\t\t? `onboardingSmall`\n\t\t\t\t\t\t: `onboarding`\n\t\t\t\t}\n\t\t\t\ttransition={{\n\t\t\t\t\ttype: \"spring\",\n\t\t\t\t\tstiffness: 60,\n\t\t\t\t\tdamping: 22,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Base></Base>\n\t\t\t\t<BottomBar show={finished} />\n\t\t\t</SynthContainer>\n\t\t</AppContainer>\n\t);\n}\n\nfunction useWindowSize() {\n\tconst isClient = typeof window === \"object\";\n\n\tfunction getSize() {\n\t\treturn {\n\t\t\twidth: isClient ? window.innerWidth : undefined,\n\t\t\theight: isClient ? window.innerHeight : undefined,\n\t\t};\n\t}\n\n\tconst [windowSize, setWindowSize] = useState(getSize);\n\n\tuseEffect(() => {\n\t\tif (!isClient) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction handleResize() {\n\t\t\tsetWindowSize(getSize());\n\t\t}\n\n\t\twindow.addEventListener(\"resize\", handleResize);\n\t\treturn () => window.removeEventListener(\"resize\", handleResize);\n\t}); // Empty array ensures that effect is only run on mount and unmount\n\n\treturn windowSize;\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\t...state.state.onboarding,\n\t};\n};\n\nexport default connect(mapStateToProps, null)(App);\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport { Provider } from \"react-redux\";\nimport { store } from \"./store/index.js\";\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<App />\n\t</Provider>,\n\tdocument.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}