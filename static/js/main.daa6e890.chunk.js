(this["webpackJsonpsubtract.one"]=this["webpackJsonpsubtract.one"]||[]).push([[0],{712:function(e,t,n){e.exports=n(734)},717:function(e,t,n){},734:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(64),o=n.n(r),s=(n(717),n(1)),c=n(11),u=n(4),l=n(5),p=n(20),d=n(6),h=n(7),m=n(9),v=n(8),f=n(17),g=function(e,t,n,a){return{type:"SET_PARAM",value:a,module:e,moduleIndex:t,param:n}},b=function(e){return{type:"SET_POWER",active:e}},y=function(e){return{type:"LOAD_PRESET",preset:e}},x=function(e){return{type:"SET_PRESET",preset:e}},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{type:"PRESS_NOTE",note:e,velocity:t}},E=function(){return{type:"TICK"}},k=function(e){return{type:"UPDATE_CURRENT_TIME",currentTime:e}},j=function(e,t){return{type:"UPDATE_OSCILLOSCOPE",dataArray:e,currentTime:t}},w=function(){return{type:"ONBOARDING_ANIMATION_COMPLETE"}},C=function(){return{type:"ONBOARDING_FINISH"}},S=function(){return{type:"ONBOARDING_NEXT_STEP"}},T=function(){return{type:"ONBOARDING_RESET"}},M=function(e){return{type:"SHARE_PATCH",patchLink:e}},A=function(){return{type:"CLOSE_SHARE_MODAL"}},q=n(22),D=n(18),I=n(28),L=n(62),N=n(548),P=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var a;Object(d.a)(this,n),(a=t.call(this,e)).state={playing:!1},a.audioCtx=new N.AudioContext,a.vco=[],a.vcoGain=[],a.gain=a.audioCtx.createGain(),a.envelope=a.audioCtx.createGain(),a.envelope.gain.value=0,a.biquadFilter=a.audioCtx.createBiquadFilter(),a.biquadFilter.type="lowpass",a.biquadFilter.frequency.value=e.filter.frequency,a.biquadFilter.gain.value=0,a.biquadFilter.Q.value=e.filter.resonance/4,a.compressor=a.audioCtx.createDynamicsCompressor(),a.analyzer=a.audioCtx.createAnalyser(),a.analyzer.fftSize=e.oscilloscope.fftSize,a.analyzerBufferLength=a.analyzer.frequencyBinCount;var i=new Float32Array(a.analyzer.fftSize);return a.biquadFilter.connect(a.envelope),a.envelope.connect(a.analyzer),a.analyzer.connect(a.gain),a.gain.connect(a.compressor),a.compressor.connect(a.audioCtx.destination),a.pressedNotes=[],setInterval((function(){a.analyzer.getFloatTimeDomainData(i),e.updateOscilloscope(i,a.audioCtx.currentTime)}),1e3/60),a}return Object(h.a)(n,[{key:"mapKeyboardToMidi",value:function(e){switch(e.toLowerCase()){case"a":return 48;case"w":return 49;case"s":return 50;case"e":return 51;case"d":return 52;case"f":return 53;case"t":return 54;case"g":return 55;case"y":return 56;case"h":return 57;case"u":return 58;case"j":return 59;case"k":return 60;case"o":return 61;case"l":return 62;case"p":return 63;case";":return 64;case"Dead":return 65;default:return!1}}},{key:"onMIDISuccess",value:function(e){this.inputs=e.inputs;var t,n=Object(p.a)(e.inputs.values());try{for(n.s();!(t=n.n()).done;){t.value.onmidimessage=this.getMIDIMessage.bind(this)}}catch(a){n.e(a)}finally{n.f()}}},{key:"getMIDIMessage",value:function(e){var t=e.data[1],n=Object(D.c)(e.data[2],[1,127],[0,1]),a=I.b(t);switch(e.data[0]){case 144:this.playNote(a,n);break;case 128:this.releaseNote(a);break;default:return null}}},{key:"playNote",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this.audioCtx;this.triggerEnvelope(n),-1===this.pressedNotes.indexOf(e)&&this.pressedNotes.push(e);var i=L.a(e);this.props.pressNote(i,n);var r=this.getBaseFrequency(i);this.vco.forEach((function(e,n){var i=t.getVCOFrequency(n,r);t.envelope.gain.value>.1&&t.props.general.glide?(e.frequency.cancelScheduledValues(a.currentTime),e.frequency.setValueAtTime(e.frequency.value,a.currentTime),e.frequency.linearRampToValueAtTime(i,a.currentTime+t.props.general.glide)):e.frequency.setValueAtTime(i,a.currentTime)}))}},{key:"releaseNote",value:function(e){var t=this.pressedNotes.indexOf(e);this.pressedNotes=this.pressedNotes.filter((function(e,n,a){return n!==t})),this.pressedNotes.length?this.playNote(this.pressedNotes[this.pressedNotes.length-1],this.props.keyboard.velocity):this.releaseEnvelope()}},{key:"getBaseFrequency",value:function(e,t){return t||(t=this.props.general.octave),L.a(e.pc+(e.oct+t)).freq}},{key:"getVCOFrequency",value:function(e,t){var n,a,i=function(e,t){var n=Math.pow(2,1/12);return e*Math.pow(n,t)}(t,this.props.vco[e].semitones);return n=i,a=this.props.vco[e].detune,n*Math.pow(2,a/1200)}},{key:"onMIDIFailure",value:function(){console.log("Could not access your MIDI devices.")}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDown.bind(this)),window.addEventListener("keyup",this.onKeyUp.bind(this)),navigator.requestMIDIAccess&&navigator.requestMIDIAccess().then(this.onMIDISuccess.bind(this),this.onMIDIFailure.bind(this))}},{key:"onKeyDown",value:function(e){var t=this.mapKeyboardToMidi(e.key),n=I.b(t);t&&-1===this.pressedNotes.indexOf(n)&&(this.keyPressed=e.key,this.playNote(n))}},{key:"onKeyUp",value:function(e){var t=this.mapKeyboardToMidi(e.key);if(t){var n=I.b(t);this.releaseNote(n)}}},{key:"getTimeConstant",value:function(e){return Math.log(e+1)/Math.log(100)}},{key:"keyToPitch",value:function(e){var t=this.keys.indexOf(e);if(-1===t)return!1;var n=Math.floor(t/12);return{note:t-12*n,octave:n}}},{key:"powerOn",value:function(){var e=this;this.props.vco.forEach((function(t,n){e.startVCO(n)}))}},{key:"powerOff",value:function(e){var t=this;this.props.vco.forEach((function(n,a){t.stopVCO(a,e)}))}},{key:"startVCO",value:function(e){var t=this.audioCtx,n=this.getVCOFrequency(e,this.getBaseFrequency(this.props.keyboard.note));this.vco[e]=t.createOscillator(),this.vco[e].type=this.props.vco[e].type,this.vco[e].frequency.setValueAtTime(n,t.currentTime),this.vcoGain[e]=t.createGain(),this.vcoGain[e].gain.setValueAtTime(this.props.vco[e].gain,t.currentTime),this.vco[e].connect(this.vcoGain[e]),this.vcoGain[e].connect(this.biquadFilter),this.vco[e].start()}},{key:"stopVCO",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.audioCtx;this.vco[e].stop(n.currentTime+t+this.props.envelope.release)}},{key:"triggerEnvelope",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.audioCtx,n=this.props,a=n.envelope,i=n.filterEnvelope,r=n.filter,o=t.currentTime,s=this.biquadFilter.frequency.value;this.envelope.gain.cancelScheduledValues(0),this.envelope.gain.setValueAtTime(this.envelope.gain.value,o),this.biquadFilter.frequency.cancelScheduledValues(0),this.biquadFilter.frequency.setValueAtTime(s,o),0===a.attack?this.envelope.gain.linearRampToValueAtTime(e,o):this.envelope.gain.linearRampToValueAtTime(e,o+a.attack);var c=Math.log(r.frequency),u=Math.log(2e4),l=(u-c)/100,p=Math.exp(i.intensity*l+c),d=Math.exp(i.intensity*(i.sustain/100)*l+c);this.biquadFilter.frequency.exponentialRampToValueAtTime(p,o+i.attack),this.biquadFilter.frequency.setValueAtTime(p,o+i.attack),this.biquadFilter.frequency.setTargetAtTime(d,o+i.attack,this.getTimeConstant(i.decay)),this.envelope.gain.setValueAtTime(e,o+a.attack),this.envelope.gain.setTargetAtTime(a.sustain/100*e,o+a.attack,this.getTimeConstant(a.decay))}},{key:"releaseEnvelope",value:function(){var e=this.props,t=e.envelope,n=e.filter,a=e.filterEnvelope,i=this.audioCtx.currentTime,r=this.biquadFilter.frequency.value;this.envelope.gain.cancelScheduledValues(i),this.envelope.gain.setValueAtTime(this.envelope.gain.value,i),this.biquadFilter.frequency.cancelScheduledValues(i),this.biquadFilter.frequency.setValueAtTime(r,i);var o=t.release>0?this.getTimeConstant(t.release):1e-4;this.biquadFilter.frequency.exponentialRampToValueAtTime(n.frequency,i+a.release),this.envelope.gain.setTargetAtTime(0,i,o)}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.audioCtx;this.vco.forEach((function(a,i){e.vco[i].type!==t.props.vco[i].type&&(a.type=e.vco[i].type),e.general.octave===t.props.general.octave&&e.vco[i].semitones===t.props.vco[i].semitones&&e.vco[i].detune===t.props.vco[i].detune||a.frequency.setValueAtTime(t.getVCOFrequency(i,t.getBaseFrequency(e.keyboard.note,e.general.octave)),n.currentTime),e.vco[i].gain!==t.props.vco[i].gain&&t.vcoGain[i].gain.setValueAtTime(e.vco[i].gain*e.keyboard.velocity,n.currentTime)})),e.power.active&&!this.props.power.active?this.powerOn():!e.power.active&&this.props.power.active&&this.powerOff(),e.amp.gain!==this.props.amp.gain&&this.gain.gain.setValueAtTime(e.amp.gain,n.currentTime),e.filter.frequency!==this.props.filter.frequency&&this.biquadFilter.frequency.setValueAtTime(e.filter.frequency,n.currentTime),e.filter.resonance!==this.props.filter.resonance&&this.biquadFilter.Q.setValueAtTime(e.filter.resonance/4,n.currentTime)}},{key:"render",value:function(){return i.a.createElement("div",null)}}]),n}(i.a.Component),R=Object(f.b)((function(e){return Object(s.a)({},e.state)}),(function(e){return Object(q.a)({tick:E,pressNote:O,updateOscilloscope:j,updateCurrentTime:k},e)}))(P);function z(){var e=Object(u.a)(["\n\theight: 20px;\n\twidth: 20px;\n\tborder-radius: 100%;\n\tmargin: 2px;\n\ttransition: all 0.3s;\n\n\tbackground-image: linear-gradient(\n\t\t180deg,\n\t\t#4d4d4d 0%,\n\t\t#393939 42%,\n\t\t#1c1c1c 99%\n\t);\n\tbox-shadow: 0 5px 3px 0 rgba(0, 0, 0, 0.19), 0 8px 7px 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 -1px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 1px 0 0 rgba(255, 255, 255, 0.16);\n"]);return z=function(){return e},e}function _(){var e=Object(u.a)(["\n\tbox-shadow: inset 0 1px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 -1px 0 0 rgba(255, 255, 255, 0.16);\n\tborder-radius: 15px;\n\theight: 24px;\n\twidth: 48px;\n\toverflow: auto;\n\tcursor: pointer;\n\ttransition: all 0.2s;\n"]);return _=function(){return e},e}function F(){var e=Object(u.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tflex: 1;\n\tjustify-content: space-around;\n"]);return F=function(){return e},e}function V(){var e=Object(u.a)(["\n\theight: 8px;\n\twidth: 8px;\n\tborder-radius: 100%;\n\n\tbackground: ",";\n\tbackground-image: linear-gradient(\n\t\t180deg,\n\t\trgba(255, 255, 255, 0.5) 0%,\n\t\trgba(255, 255, 255, 0.02) 100%\n\t);\n\tbox-shadow: ",";\n\n\ttransition: all 0.1s;\n"]);return V=function(){return e},e}var B=l.a.div(V(),(function(e){return e.active?"#40EC00":"#434343"}),(function(e){return e.active?"0 -1px 0 0 rgba(0,0,0,0.08), 0 1px 0 0 rgba(255,255,255,0.08), 0 0 10px 0 #40EC00, inset 0 -2px 4px 0 rgba(21,76,9,0.50), inset 0 2px 4px 0 rgba(212,255,170,0.50)":" 0 -1px 0 0 rgba(0,0,0,0.08), 0 1px 0 0 rgba(255,255,255,0.08), 0 0 10px 0 rgba(64,236,0,0.00), inset 0 -2px 4px 0 rgba(0,0,0,0.42), inset 0 2px 4px 0 rgba(51,51,51,0.50)"})),U=l.a.div(F()),H=l.a.div(_()),G=l.a.div(z()),Y=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={},a}return Object(h.a)(n,[{key:"toggle",value:function(){var e=this.props.value;this.props.setPower(!e)}},{key:"componentDidUpdate",value:function(e){var t=this.props.value;e.value!==t&&new Audio("/sounds/switch.mp3").play()}},{key:"render",value:function(){var e=this.props.value;return i.a.createElement(U,null,i.a.createElement(B,{active:e}),i.a.createElement(H,{style:{background:e?"#aaa":"#111"},onClick:this.toggle.bind(this),active:e},i.a.createElement(G,{style:{marginLeft:e?26:2}})))}}]),n}(i.a.Component);Y.defaultProps={value:!0};var W=Object(f.b)(null,(function(e){return Object(q.a)({setPower:b},e)}))(Y);function K(){var e=Object(u.a)(["\n\tcolor: white;\n\tpadding: 4px;\n\ttext-align: center;\n\ttext-transform: uppercase;\n\tfont-size: 12px;\n\tletter-spacing: 1.8px;\n"]);return K=function(){return e},e}var J=l.a.div(K());function X(){var e=Object(u.a)(["\n\tbackground: #191919;\n\tbox-shadow: 0 12px 33px 0 rgba(0, 0, 0, 0.37);\n\tborder-radius: 20px;\n\theight: 40px;\n\tpadding: 0 15px;\n\tfont-size: 16px;\n\tcolor: #b0b0b0;\n\tletter-spacing: 1px;\n\ttext-align: center;\n\tline-height: 40px;\n\tposition: absolute;\n\tmargin-left: 50%;\n\twidth: auto;\n\twhite-space: nowrap;\n\tz-index: 999;\n\tpointer-events: none;\n"]);return X=function(){return e},e}function Q(){var e=Object(u.a)(["\n\tbackground-image: linear-gradient(180deg, #1c1c1c 0%, #4d4d4d 99%);\n\theight: 10px;\n\twidth: 10px;\n\tborder-radius: 100%;\n\tmargin: 10px;\n"]);return Q=function(){return e},e}function Z(){var e=Object(u.a)(["\n\ttouch-action: none;\n\tcursor: pointer;\n\theight: ","px;\n\twidth: ","px;\n\tborder-radius: 100%;\n\tbackground-image: linear-gradient(180deg, #4d4d4d 0%, #1c1c1c 99%);\n\tbox-shadow: 0 5px 6px 0 rgba(0, 0, 0, 0.18), 0 22px 22px 0 rgba(0, 0, 0, 0.39),\n\t\tinset 0 -1px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 1px 0 0 rgba(255, 255, 255, 0.16);\n"]);return Z=function(){return e},e}function $(){var e=Object(u.a)(["\n\theight: 100%;\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: flex-end;\n"]);return $=function(){return e},e}function ee(){var e=Object(u.a)(["\n\tpadding: 0 15px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-bottom: 8px;\n"]);return ee=function(){return e},e}function te(){var e=Object(u.a)(["\n\tposition: relative;\n\tmargin: 10px 0;\n"]);return te=function(){return e},e}var ne=l.a.div(te()),ae=l.a.div(ee()),ie=l.a.div($()),re=l.a.div(Z(),(function(e){return e.size}),(function(e){return e.size})),oe=l.a.div(Q()),se=Object(l.a)(D.b.div)(X()),ce={hidden:{opacity:0,transform:"translate(-50%, 20px)"},visible:{opacity:1,transform:"translate(-50%, 0px)"}},ue=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={rotate:a.getRotation(e.value),dragging:!1},a}return Object(h.a)(n,[{key:"onKeyDown",value:function(e){"Shift"===e.key&&this.setState({freezeValue:this.props.value,freezeRotation:this.getRotation(this.props.value)})}},{key:"onKeyUp",value:function(e){"Shift"===e.key&&this.setState({freezeValue:this.props.value,freezeRotation:this.getRotation(this.props.value)})}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDown.bind(this)),window.addEventListener("keyup",this.onKeyUp.bind(this)),document.addEventListener("mousemove",this.onMouseMove.bind(this),!1),document.addEventListener("touchmove",this.onMouseMove.bind(this),!1),document.addEventListener("mouseup",this.onMouseUp.bind(this),!1),document.addEventListener("touchend",this.onMouseUp.bind(this),!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),document.removeEventListener("touchmove",this.onMouseMove,!1),document.removeEventListener("touchend",this.onMouseUp,!1)}},{key:"getRotation",value:function(e){return this.props.log?this.getRotationLog(e):this.getRotationLin(e)}},{key:"getRotationLin",value:function(e){var t=this.props,n=t.min,a=t.max,i=t.minDeg;return i+(e-n)*((t.maxDeg-i)/(a-n))}},{key:"getRotationLog",value:function(e){var t=this.props,n=t.min,a=t.max,i=t.minDeg,r=t.maxDeg;if(0===e)return i;var o=Math.log(n),s=(Math.log(a)-o)/(r-i);return i+(Math.log(e)-o)/s}},{key:"onMouseDown",value:function(e){var t=e.clientY||e.touches[0].clientY;this.setState({dragStartY:t,dragging:!0,freezeValue:this.props.value,freezeRotation:this.getRotation(this.props.value)})}},{key:"onMouseUp",value:function(e){this.setState({dragging:!1})}},{key:"getValue",value:function(e){return this.props.log?this.getValueLog(e):this.getValueLin(e)}},{key:"getValueLin",value:function(e){var t=this.props,n=t.min,a=t.max,i=t.minDeg;return(e-i)*((a-n)/(t.maxDeg-i))+n}},{key:"getValueLog",value:function(e){var t=this.props,n=t.min,a=t.max,i=t.minDeg,r=t.maxDeg,o=Math.log(n),s=(Math.log(a)-o)/(r-i);return Math.exp((e-i)*s+o)}},{key:"onMouseMove",value:function(e){if(this.state.dragging){console.log(e);var t=this.props,n=t.min,a=t.max,i=t.param,r=t.module,o=t.moduleIndex,s=t.degreePerPixel,c=e.clientY||e.touches[0].clientY,u=(this.state.dragStartY-c)*s;e.shiftKey&&(u*=.2);var l=this.getValue(this.state.freezeRotation+u);!1!==this.props.snap&&(l=Math.round(l)),l!==this.props.value&&(l>a?l=a:l<n&&(l=n),this.props.setParam(r,o,i,l))}}},{key:"onDoubleClick",value:function(e){var t=this.props,n=t.param,a=t.module,i=t.moduleIndex;this.props.setParam(a,i,n,this.props.default)}},{key:"render",value:function(){return i.a.createElement(ne,null,i.a.createElement(ae,null,i.a.createElement(re,{size:this.props.size,onDoubleClick:this.onDoubleClick.bind(this),onTouchStart:this.onMouseDown.bind(this),onMouseDown:this.onMouseDown.bind(this)},i.a.createElement(ie,{style:{transform:"rotate(".concat(this.getRotation(this.props.value),"deg)")}},i.a.createElement(oe,{style:{transform:"rotate(-".concat(this.getRotation(this.props.value),"deg)")}})))),i.a.createElement(J,null,this.props.label),i.a.createElement(se,{initial:"hidden",animate:this.state.dragging?"visible":"hidden",variants:ce,transition:{type:"spring",damping:20,stiffness:300,delay:this.state.dragging?0:1}},this.props.value.toFixed(this.props.decimals)," ",this.props.unit))}}]),n}(i.a.Component);ue.defaultProps={min:0,max:100,minDeg:40,maxDeg:320,value:50,label:"Pitch",param:"pitch",unit:"",moduleIndex:!1,size:60,decimals:0,snap:!1,log:!1,degreePerPixel:1.5};var le=Object(f.b)(null,(function(e){return Object(q.a)({setParam:g},e)}))(ue);function pe(){var e=Object(u.a)(["\n\twidth: 100%;\n\theight: 4px;\n\tbackground: #bcbcbc;\n\tmargin: 5px 0;\n"]);return pe=function(){return e},e}function de(){var e=Object(u.a)(["\n\tposition: relative;\n\tpadding: 5px 0;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: space-around;\n\theight: ","px;\n\twidth: ","px;\n\tbackground-image: linear-gradient(180deg, #1c1c1c 0%, #4d4d4d 99%);\n\tbox-shadow: 0 5px 3px 0 rgba(0, 0, 0, 0.19), 0 8px 7px 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 -1px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 1px 0 0 rgba(255, 255, 255, 0.16);\n\tborder-radius: 5px;\n\tz-index: 5;\n\tcursor: pointer;\n\ttouch-action: none;\n"]);return de=function(){return e},e}function he(){var e=Object(u.a)(["\n\tbackground-image: linear-gradient(180deg, #1c1c1c 0%, #4d4d4d 99%);\n\twidth: 100%;\n\theight: 2px;\n\topacity: 0.5;\n"]);return he=function(){return e},e}function me(){var e=Object(u.a)(["\n\twidth: ","px;\n\twidth: 100%;\n\n\tposition: relative;\n\theight: ","px;\n\tmargin-bottom: ","px;\n"]);return me=function(){return e},e}function ve(){var e=Object(u.a)(["\n\tposition: relative;\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n"]);return ve=function(){return e},e}function fe(){var e=Object(u.a)(["\n\tbackground-color: white;\n\theight: 1px;\n\twidth: ","px;\n\topacity: 0.3;\n"]);return fe=function(){return e},e}function ge(){var e=Object(u.a)(["\n\tposition: absolute;\n\ttop: ","px;\n\tbottom: -","px;\n\tdisplay: flex;\n\twidth: 100%;\n\talign-items: center;\n\tjustify-content: center;\n"]);return ge=function(){return e},e}function be(){var e=Object(u.a)(["\n\tdisplay: flex;\n\talign-items: ",";\n\tflex-direction: column;\n\theight: 100%;\n\tjustify-content: space-between;\n"]);return be=function(){return e},e}function ye(){var e=Object(u.a)(["\n\tbackground: #181818;\n\tbox-shadow: inset 0 1px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 -1px 0 0 rgba(255, 255, 255, 0.16);\n\tborder-radius: 7px;\n\twidth: 4px;\n\theight: 100%;\n\tmargin: 0 5px;\n"]);return ye=function(){return e},e}function xe(){var e=Object(u.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tmargin: 20px 0 30px;\n"]);return xe=function(){return e},e}var Oe=l.a.div(xe()),Ee=l.a.div(ye()),ke=l.a.div(be(),(function(e){return"flex-".concat(e.align)})),je=l.a.div(ge(),24,24),we=l.a.div(fe(),(function(e){return"big"===e.size?18:12})),Ce=l.a.div(ve()),Se=l.a.div(me(),34,(function(e){return e.size}),48),Te=l.a.div(he()),Me=l.a.div(de(),48,34),Ae=l.a.div(pe()),qe=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={dragging:!1},a.defaultValue=e.value,a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousemove",this.onMouseMove.bind(this),!1),document.addEventListener("mouseup",this.onMouseUp.bind(this),!1),document.addEventListener("touchmove",this.onMouseMove.bind(this),!1),document.addEventListener("touchend",this.onMouseUp.bind(this),!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),document.removeEventListener("touchmove",this.onMouseMove,!1),document.removeEventListener("touchend",this.onMouseUp,!1)}},{key:"getTransform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.value,t=this.props,n=t.min,a=t.max,i=t.size,r=i-Object(D.c)(e,[n,a],[0,i]);return r}},{key:"onMouseDown",value:function(e){var t=e.clientY||e.touches[0].clientY;this.setState({dragStartY:t,dragging:!0,freezeValue:this.props.value})}},{key:"onMouseUp",value:function(e){this.setState({dragging:!1})}},{key:"onMouseMove",value:function(e){if(this.state.dragging){var t=this.props,n=t.min,a=t.max,i=t.param,r=t.module,o=t.moduleIndex,s=t.size,c=e.clientY||e.touches[0].clientY,u=this.state.dragStartY-c,l=Object(D.c)(Math.abs(u),[0,s],[n,a]),p=this.state.freezeValue+(u<0?-1*l:l);p>a?p=a:p<n&&(p=n),this.props.setParam(r,o,i,p)}}},{key:"onDoubleClick",value:function(e){}},{key:"renderScale",value:function(){for(var e=[],t=0;t<31;t++)e.push(i.a.createElement(we,{key:t,size:t%5===0?"big":"small"}));return e}},{key:"render",value:function(){return i.a.createElement(Oe,null,i.a.createElement(Se,{size:this.props.size},i.a.createElement(Ce,null,i.a.createElement(je,null,i.a.createElement(ke,{align:"end"},this.renderScale()),i.a.createElement(Ee,null),i.a.createElement(ke,{align:"start"},this.renderScale())),this.getTransform.bind(this),i.a.createElement(Me,{onDoubleClick:this.onDoubleClick.bind(this),onMouseDown:this.onMouseDown.bind(this),onTouchStart:this.onMouseDown.bind(this),style:{transform:"translateY(".concat(this.getTransform(),"px)")}},i.a.createElement(Te,null),i.a.createElement(Te,null),i.a.createElement(Te,null),i.a.createElement(Ae,null),i.a.createElement(Te,null),i.a.createElement(Te,null),i.a.createElement(Te,null)))))}}]),n}(i.a.Component);qe.defaultProps={min:0,max:100,value:50,label:"Gain",param:"gain",unit:"",moduleIndex:!1,size:220};var De=Object(f.b)(null,(function(e){return Object(q.a)({setParam:g},e)}))(qe);function Ie(){var e=Object(u.a)(["\n\tcursor: pointer;\n"]);return Ie=function(){return e},e}function Le(){var e=Object(u.a)(["\n\tcursor: pointer;\n\twidth: 20px;\n\theight: 20px;\n\tborder-radius: 100%;\n\tbackground-image: linear-gradient(180deg, #4d4d4d 0%, #1c1c1c 99%);\n\tbox-shadow: 0 5px 3px 0 rgba(0, 0, 0, 0.19), 0 8px 7px 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 -1px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 1px 0 0 rgba(255, 255, 255, 0.16);\n\tposition: relative;\n\ttransition: all 0.2s;\n\ttouch-action: none;\n"]);return Le=function(){return e},e}function Ne(){var e=Object(u.a)(["\n\tcursor: pointer;\n\theight: 100%;\n\twidth: 20px;\n\tbackground: #111111;\n\tbox-shadow: inset 0 1px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 -1px 0 0 rgba(255, 255, 255, 0.16);\n\tborder-radius: 10px;\n"]);return Ne=function(){return e},e}function Pe(){var e=Object(u.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\tmargin-left: 10px;\n"]);return Pe=function(){return e},e}function Re(){var e=Object(u.a)(["\n\tdisplay: flex;\n\theight: ","px;\n\tjustify-content: center;\n"]);return Re=function(){return e},e}var ze=l.a.div(Re(),80),_e=l.a.div(Pe()),Fe=l.a.div(Ne()),Ve=l.a.div(Le()),Be=l.a.div(Ie()),Ue={sine:i.a.createElement("svg",{width:"20px",height:"11px",viewBox:"0 0 20 11",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("g",{id:"Artboard",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",strokeLinecap:"round"},i.a.createElement("path",{d:"M19,5.5 C19,7.985 16.985,10 14.5,10 C12.015,10 10,7.985 10,5.5 C10,3.015 7.985,1 5.5,1 C3.015,1 1,3.015 1,5.5",id:"Stroke-1",stroke:"#C6C6C6"}))),triangle:i.a.createElement("svg",{width:"20px",height:"11px",viewBox:"0 0 20 11",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("g",{id:"Artboard-Copy-36",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},i.a.createElement("polyline",{id:"Path-4",stroke:"#C6C6C6",points:"1 10 10 1 19 10"}))),sawtooth:i.a.createElement("svg",{width:"20px",height:"11px",viewBox:"0 0 20 11",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("g",{id:"Artboard-Copy-38",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},i.a.createElement("polyline",{id:"Path-7",stroke:"#C6C6C6",points:"1 10 19 1 19 10"}))),square:i.a.createElement("svg",{width:"20px",height:"11px",viewBox:"0 0 20 11",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("g",{id:"Artboard-Copy-37",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},i.a.createElement("polyline",{id:"Path-5-Copy",stroke:"#C6C6C6",points:"1 10 1 1 10 1 10 10 19 10"})))},He=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={},a.shapes=["sine","triangle","sawtooth","square"],a.audio=new Audio("/sounds/switch.mp3"),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousemove",this.onMouseMove.bind(this),!1),document.addEventListener("mouseup",this.onMouseUp.bind(this),!1),document.addEventListener("touchmove",this.onMouseMove.bind(this),!1),document.addEventListener("touchend",this.onMouseUp.bind(this),!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),document.removeEventListener("touchmove",this.onMouseMove,!1),document.removeEventListener("touchend",this.onMouseUp,!1)}},{key:"select",value:function(e){var t=this.props,n=t.module,a=t.moduleIndex;new Audio("/sounds/switch.mp3").play(),this.props.setParam(n,a,"type",e)}},{key:"getShapes",value:function(){var e=this;return this.shapes.map((function(t,n){return i.a.createElement(Be,{key:"".concat(e.props.moduleIndex,"shape_").concat(n),onClick:function(n){e.select(t)}},Ue[t])}))}},{key:"getIndex",value:function(e){return this.shapes.indexOf(e)}},{key:"onMouseDown",value:function(e){var t=e.clientY||e.touches[0].clientY;this.setState({dragStartY:t,dragging:!0,freezeValue:this.props.value})}},{key:"onMouseMove",value:function(e){if(this.state.dragging){var t=e.clientY||e.touches[0].clientY,n=this.state.dragStartY-t,a=80/this.shapes.length,i=-1*Math.round(n/a),r=this.getIndex(this.state.freezeValue)+i;r>-1&&r<this.shapes.length&&this.shapes[r]!==this.props.value&&(console.log(this.shapes[r],this.props.value),this.select(this.shapes[r]))}}},{key:"onMouseUp",value:function(e){this.setState({dragging:!1})}},{key:"handleTrackClick",value:function(e){var t=e.target.getBoundingClientRect(),n=Math.floor((e.clientY-t.top)/(80/this.shapes.length));this.shapes[n]!==this.props.value&&this.select(this.shapes[n])}},{key:"render",value:function(){var e=this.props.value;return i.a.createElement(ze,null,i.a.createElement(Fe,{onClick:this.handleTrackClick.bind(this)},i.a.createElement(Ve,{onClick:function(e){return e.stopPropagation(),!1},onTouchStart:this.onMouseDown.bind(this),onMouseDown:this.onMouseDown.bind(this),style:{top:25*this.getIndex(e)+"%"}})),i.a.createElement(_e,null,this.getShapes()))}}]),n}(i.a.Component);He.defaultProps={value:"sine"};var Ge=Object(f.b)(null,(function(e){return Object(q.a)({setParam:g},e)}))(He),Ye=n(30),We=function(){try{var e=localStorage.getItem("presets");return null===e?[]:JSON.parse(e)}catch(t){return[]}},Ke={meta:{presetName:"",preset:0,patchLink:""},onboarding:{finished:function(){try{var e=localStorage.getItem("onboardingState");return null!==e&&e}catch(t){return!1}}(),currentStep:0,animating:!1,shareModal:!1},power:{active:!1},general:{octave:0,glide:0},oscilloscope:{dataArray:[],fftSize:2048},vco:[{pitch:0,type:"sawtooth",gain:1,octave:0,semitones:0,detune:0},{pitch:0,type:"sawtooth",gain:0,octave:0,semitones:0,detune:0},{pitch:0,type:"sawtooth",gain:0,octave:0,semitones:0,detune:0}],envelope:{attack:.2,decay:.2,sustain:100,release:.5},filterEnvelope:{attack:.2,decay:.2,sustain:100,release:.5,intensity:50},filter:{frequency:1500,resonance:1},sequencer:{tempo:90,gate:50,currentStep:0,steps:16},amp:{gain:1},keyboard:{note:L.a("C3"),velocity:1}},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PARAM":return!1===t.moduleIndex?Object(s.a)(Object(s.a)({},e),{},Object(Ye.a)({},t.module,Object(s.a)(Object(s.a)({},e[t.module]),{},Object(Ye.a)({},t.param,t.value)))):Object(s.a)(Object(s.a)({},e),{},Object(Ye.a)({},t.module,e[t.module].map((function(e,n){return n===t.moduleIndex?Object(s.a)(Object(s.a)({},e),{},Object(Ye.a)({},t.param,t.value)):e}))));case"SET_POWER":return Object(s.a)(Object(s.a)({},e),{},{power:Object(s.a)(Object(s.a)({},e.power),{},{active:t.active})});case"LOAD_PRESET":return Object(s.a)(Object(s.a)(Object(s.a)(Object(s.a)({},Ke),e),t.preset),{},{envelope:Object(s.a)(Object(s.a)({},e.envelope),t.preset.envelope),power:{active:e.power.active}});case"SET_PRESET":return Object(s.a)(Object(s.a)({},e),{},{meta:Object(s.a)(Object(s.a)({},e.meta),{},{preset:t.preset})});case"PRESS_NOTE":return Object(s.a)(Object(s.a)({},e),{},{keyboard:Object(s.a)(Object(s.a)({},e.keyboard),{},{note:Object(s.a)({},t.note),velocity:t.velocity})});case"TICK":return Object(s.a)(Object(s.a)({},e),{},{sequencer:Object(s.a)(Object(s.a)({},e.sequencer),{},{currentStep:e.sequencer.currentStep===e.sequencer.steps-1?0:e.sequencer.currentStep+1})});case"UPDATE_OSCILLOSCOPE":return Object(s.a)(Object(s.a)({},e),{},{oscilloscope:Object(s.a)(Object(s.a)({},e.oscilloscope),{},{dataArray:t.dataArray.map((function(e){return e}))}),general:Object(s.a)(Object(s.a)({},e.general),{},{currentTime:t.currentTime})});case"UPDATE_CURRENT_TIME":return Object(s.a)(Object(s.a)({},e),{},{general:Object(s.a)(Object(s.a)({},e.general),{},{currentTime:t.currentTime})});case"ONBOARDING_ANIMATION_COMPLETE":return Object(s.a)(Object(s.a)({},e),{},{onboarding:Object(s.a)(Object(s.a)({},e.onboarding),{},{animating:!1})});case"ONBOARDING_FINISH":return Object(s.a)(Object(s.a)({},e),{},{onboarding:Object(s.a)(Object(s.a)({},e.onboarding),{},{finished:!0}),power:Object(s.a)(Object(s.a)({},e.power),{},{active:!0})});case"ONBOARDING_NEXT_STEP":return Object(s.a)(Object(s.a)({},e),{},{onboarding:Object(s.a)(Object(s.a)({},e.onboarding),{},{animating:!0,currentStep:e.onboarding.currentStep+1})});case"ONBOARDING_RESET":return Object(s.a)(Object(s.a)({},e),{},{onboarding:Object(s.a)(Object(s.a)({},e.onboarding),{},{animating:!1,currentStep:0,finished:!1})});case"SHARE_PATCH":return Object(s.a)(Object(s.a)({},e),{},{meta:Object(s.a)(Object(s.a)({},e.meta),{},{patchLink:t.patchLink}),onboarding:Object(s.a)(Object(s.a)({},e.onboarding),{},{shareModal:!0})});case"CLOSE_SHARE_MODAL":return Object(s.a)(Object(s.a)({},e),{},{onboarding:Object(s.a)(Object(s.a)({},e.onboarding),{},{shareModal:!1})});default:return e}},Xe=Object(q.c)(Object(q.b)({state:Je}));function Qe(){var e=Object(u.a)(["\n\tcursor: pointer;\n\tbackground: ",";\n\tbox-shadow: ",";\n\tborder-radius: 3px;\n\ttransition: all 0.1s ease-out;\n\theight: 44px;\n\tflex: 1;\n\tmargin-right: 10px;\n\tposition: relative;\n\tz-index: ",';\n\t&:last-child {\n\t\tmargin-right: 0;\n\t}\n\t&::before {\n\t\ttransition: all 0.1s ease-out;\n\t\tcontent: "";\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tright: 0;\n\t\tbackground-image: linear-gradient(\n\t\t\t180deg,\n\t\t\trgba(0, 0, 0, 0.16) 0%,\n\t\t\trgba(0, 0, 0, 0.37) 98%\n\t\t);\n\t\topacity: ',';\n\t}\n\n\t&::after {\n\t\ttransition: all 0.1s ease-out;\n\t\tdisplay: block;\n\n\t\tcontent: "";\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tright: 0;\n\t\tbackground-image: linear-gradient(\n\t\t\t180deg,\n\t\t\trgba(255, 255, 255, 0.18) 0%,\n\t\t\trgba(255, 255, 255, 0) 100%\n\t\t);\n\t\topacity: ',";\n\t}\n"]);return Qe=function(){return e},e}var Ze=["#FFFFFF","#E89A0A","#EB420A","#D0227E","#7829D6","#235ED6","#23AC9E","#63BF17"],$e=l.a.div(Qe(),(function(e){return e.color}),(function(e){return e.active?" 0 0 0 1px rgba(0,0,0,0.50), 0 1px 2px 0 rgba(0,0,0,0.19), 0 2px 5px 0 rgba(0,0,0,0.50), inset 0 -2px 3px 0 rgba(0,0,0,0.50), inset 0 3px 4px 0 rgba(255,255,255,0.09)":" 0 0 0 1px rgba(0,0,0,0.50), 0 5px 5px 0 rgba(0,0,0,0.19), 0 12px 13px 0 rgba(0,0,0,0.50), inset 0 -2px 3px 0 rgba(0,0,0,0.50), inset 0 3px 4px 0 rgba(255,255,255,0.09)"}),(function(e){return e.active?1:5}),(function(e){return e.active?1:0}),(function(e){return e.active?0:1})),et=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={},a}return Object(h.a)(n,[{key:"handleClick",value:function(){this.props.active||(new Audio("/sounds/button.mp3").play(),this.props.onClick())}},{key:"render",value:function(){var e=this.props.active;return i.a.createElement($e,{color:Ze[this.props.preset],onClick:this.handleClick.bind(this),active:e})}}]),n}(i.a.Component);et.defaultProps={value:!0};var tt=Object(f.b)(null,(function(e){return Object(q.a)({setPreset:x},e)}))(et),nt=[{general:{octave:0,glide:0},vco:[{pitch:0,gain:1,octave:0,semitones:0,detune:0,type:"sawtooth"},{pitch:0,type:"sawtooth",gain:0,octave:0,semitones:0,detune:0},{pitch:0,type:"sawtooth",gain:0,octave:0,semitones:0,detune:0}],envelope:{attack:0,decay:0,release:0,sustain:100},filter:{frequency:1512.7153011703033,resonance:0},filterEnvelope:{sustain:100,intensity:0,attack:0,decay:0,release:0}},{vco:[{pitch:0,type:"sawtooth",gain:1,octave:0,semitones:0,detune:0},{pitch:0,type:"sawtooth",octave:0,detune:10,semitones:7,gain:1},{pitch:0,octave:0,semitones:0,type:"square",detune:2.142857142857146,gain:.31363636363636366}],general:{octave:-1,glide:.08035714285714286},filter:{resonance:1,frequency:899.9248073623645},filterEnvelope:{attack:.2,release:.5,sustain:48.035714285714285,decay:.95,intensity:36.60714285714286},envelope:{decay:.2,sustain:100,release:.8321428571428571,attack:.01499999999999996}},{meta:{presetName:"Bell"},power:{active:!0},envelope:{sustain:0,attack:.006428571428571418,decay:.7821428571428571,release:.7392857142857142},general:{octave:2,glide:0},filterEnvelope:{attack:.010714285714285714,intensity:100,decay:.46785714285714286,release:.3964285714285714,sustain:40.714285714285715},vco:[{pitch:0,octave:0,semitones:0,detune:0,gain:.8136363636363636,type:"square"},{pitch:0,octave:0,type:"triangle",detune:11.25,semitones:7,gain:.6363636363636365},{pitch:0,octave:0,gain:1,semitones:12,detune:18.214285714285722,type:"square"}],filter:{resonance:0,frequency:765.4388234673022}},{meta:{presetName:"Troy"},power:{active:!0},general:{glide:0,octave:-1},filter:{resonance:0,frequency:514.4382313196404},filterEnvelope:{sustain:0,intensity:54.10714285714286,release:.45,attack:.48214285714285693,decay:.6749999999999999},envelope:{decay:0,release:0,sustain:100,attack:.36428571428571427},vco:[{pitch:0,octave:0,semitones:0,detune:0,type:"sawtooth",gain:1},{pitch:0,octave:0,detune:0,type:"sine",semitones:-12,gain:.6727272727272726},{pitch:0,octave:0,semitones:0,detune:0,type:"sine",gain:0}]},{power:{active:!0},envelope:{attack:2,decay:2,sustain:54.46428571428571,release:2},filter:{resonance:2.142857142857143,frequency:100},filterEnvelope:{sustain:100,decay:0,attack:2,release:1.7571428571428571,intensity:50.35714285714286},vco:[{pitch:0,octave:0,semitones:0,detune:0,type:"sine",gain:.75},{pitch:0,octave:0,gain:.7954545454545454,type:"triangle",detune:12.32142857142857,semitones:3},{pitch:0,octave:0,type:"square",gain:.4681818181818182,detune:-7.5,semitones:7}],general:{glide:.41785714285714287,octave:1}},{meta:{presetName:"WahWah"},general:{octave:-2,glide:.13,currentTime:0},vco:[{pitch:0,gain:1,octave:0,semitones:0,detune:0,type:"sawtooth"},{pitch:0,type:"triangle",gain:.7227272727272727,octave:0,semitones:12,detune:0},{pitch:0,type:"square",gain:0,octave:0,semitones:0,detune:0}],envelope:{attack:.16926666150378772,decay:6.520572293428623,sustain:100,release:.25118864315095835},filterEnvelope:{sustain:28,intensity:36.428571428571416,attack:.5531681197617235,decay:7.56,release:.12589254117941692},filter:{frequency:213.40171133990876,resonance:95.71428571428572}},{power:{active:!0},general:{octave:0,glide:0},vco:[{pitch:0,type:"square",gain:1,octave:0,semitones:0,detune:10.714285714285694},{pitch:0,type:"square",gain:.6590909090909092,octave:0,semitones:-7,detune:.5357142857142847},{pitch:0,type:"square",gain:.7181818181818183,octave:0,semitones:7,detune:10.17857142857143}],envelope:{attack:.005094984382828271,decay:2.357537269587174,sustain:26.071428571428573,release:.5179474679231217},filterEnvelope:{attack:.001,decay:.9699386857056398,sustain:4.821428571428571,release:.0048496934285282,intensity:70.71428571428572},filter:{frequency:571.4458476045286,resonance:65.89285714285714}},{general:{octave:-1,glide:.24107142857142827},vco:[{pitch:0,type:"triangle",gain:.6500000000000001,octave:0,semitones:5,detune:0},{pitch:0,type:"square",gain:.8818181818181818,octave:0,semitones:-7,detune:-15},{pitch:0,type:"sawtooth",gain:.9318181818181818,octave:0,semitones:0,detune:24.10714285714286}],envelope:{attack:.003789408531634213,decay:4.941822455971212,sustain:0,release:2.308105833452399},filterEnvelope:{attack:.3377313908791014,decay:.5179474679231217,sustain:24.107142857142858,release:9.676410537094561,intensity:-55},filter:{frequency:874.7405861451177,resonance:90}}];function at(){var e=Object(u.a)(["\n\tdisplay: flex;\n\tpadding: 10px;\n"]);return at=function(){return e},e}var it=l.a.div(at()),rt=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={presetName:e.meta.presetName,presets:[]},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.fetch(),window.addEventListener("hashchange",this.loadFromUrl.bind(this),!1),this.loadFromUrl()}},{key:"loadFromUrl",value:function(e){if(window.location.hash){var t=decodeURIComponent(window.location.hash.substring(1)),n=JSON.parse(t);n&&(console.log(n),this.props.setPreset(-1),this.props.loadPreset(n))}window.dispatchEvent(new Event("popstate"))}},{key:"onNameChange",value:function(e){this.setState({presetName:e.target.value})}},{key:"onSave",value:function(){this.props.setParam("meta",!1,"presetName",this.state.presetName),function(e){try{var t=We(),n=function(e,t){return e.findIndex((function(e){return e.meta.presetName===t.meta.presetName}))}(t,e);-1===n?t.push(e):t[n]=e,console.log(n);var a=JSON.stringify(t);localStorage.setItem("presets",a)}catch(i){}}(Xe.getState().state,this.state.presetName),this.fetch()}},{key:"onClear",value:function(){window.confirm("DELETE ALL? SURE?")&&(localStorage.setItem("presets","[]"),this.setState({presetName:""}),this.fetch())}},{key:"onExport",value:function(){var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.state.presets))),e.setAttribute("download","synth-presets"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},{key:"fetch",value:function(){console.log(We()),this.setState({presets:We()})}},{key:"loadPreset",value:function(e){this.props.loadPreset(nt[e]),this.props.setPreset(e)}},{key:"renderButtons",value:function(){for(var e=this,t=[],n=function(n){t.push(i.a.createElement(tt,{key:"button_".concat(n),onClick:function(){e.loadPreset(n)},preset:n,active:e.props.meta.preset===n}))},a=0;a<8;a++)n(a);return t}},{key:"render",value:function(){return i.a.createElement(it,null,this.renderButtons())}}]),n}(i.a.Component),ot=Object(f.b)((function(e){return Object(s.a)({},e.state)}),(function(e){return Object(q.a)({setParam:g,setPreset:x,loadPreset:y},e)}))(rt),st=n(25);function ct(){var e=Object(u.a)(["\nwidth:auto;\nposition:absolute;\ntop:0;\nleft:0;\nwidth:100%;\nheight:100%;\n"]);return ct=function(){return e},e}function ut(){var e=Object(u.a)(["\n\tbackground: linear-gradient(180deg, #1e1e1e 0.01%, #101010 100%);\n\tborder-radius: 2px;\n\tposition: relative;\n\theight: 100%;\n\t& > * {\n\t\topacity: ",";\n\t\ttransition: all 0.5s;\n\t\ttransition-delay: 0.2s;\n\t}\n"]);return ut=function(){return e},e}function lt(){var e=Object(u.a)(["\n\tpadding: 4px;\n\tbackground: linear-gradient(\n\t\t180deg,\n\t\trgba(36, 36, 36, 0.9) 0%,\n\t\trgba(23, 23, 23, 0.9) 100%\n\t);\n\tborder: 1px solid rgba(33, 33, 33, 0.4);\n\tborder-radius: 6px;\n\tmargin: 8px;\n\twidth: auto;\n\theight: 110px;\n\tposition: relative;\n"]);return lt=function(){return e},e}var pt=l.a.div(lt()),dt=l.a.div(ut(),(function(e){return!0===e.power?1:0})),ht=l.a.canvas(ct());var mt=Object(f.b)((function(e){return{dataArray:e.state.oscilloscope.dataArray,fftSize:e.state.oscilloscope.fftSize,currentTime:e.state.general.currentTime,note:e.state.keyboard.note,power:e.state.power.active}}),null)((function(e){var t=e.dataArray,n=e.note,r=e.power,o=Object(a.useRef)();return Object(a.useEffect)((function(){var e=o.current,a=e.getContext("2d");if(a.clearRect(0,0,e.width,e.height),r){var i;return function r(){a.clearRect(0,0,e.width,e.height);var o=0;a.lineWidth=2,a.strokeStyle="#11CD43",a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=12,a.shadowColor="rgba(17, 205, 67, 0.88)",a.beginPath();for(var s,c=44100/n.freq*3,u=0,l=0;l<t.length;l++){if(s>0&&t[l]<=0){u=l;break}s=t[l]}var p=Math.max.apply(Math,Object(st.a)(t));p=p<1?1:p;for(var d=1*e.width/c,h=0;h<c;h++){var m=95*t[h+u]/(2*p)+e.height/2;o=d*h,0===h?a.moveTo(o,m):a.lineTo(o,m)}a.stroke(),i=requestAnimationFrame(r)}(),function(){cancelAnimationFrame(i)}}})),i.a.createElement(pt,null,i.a.createElement(dt,{power:r},i.a.createElement(ht,{ref:o})))}));function vt(){var e=Object(u.a)(["\n\ttext-align: center;\n\tborder: 0.5px solid;\n\tmargin: 8px;\n\tborder-radius: 6px;\n\tflex: ",";\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return vt=function(){return e},e}function ft(){var e=Object(u.a)(["\n\tpadding: 20px;\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return ft=function(){return e},e}function gt(){var e=Object(u.a)(["\n\tbackground: white;\n\tmargin: 4px;\n\tcolor: #313131;\n\tfont-size: 16px;\n\tletter-spacing: 2.5px;\n\ttext-transform: uppercase;\n\tpadding: 5px;\n\tfont-weight: bold;\n\tborder-radius: 3px;\n"]);return gt=function(){return e},e}function bt(){var e=Object(u.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\ttext-align: center;\n\talign-items: stretch;\n"]);return bt=function(){return e},e}function yt(){var e=Object(u.a)(["\n\tdisplay: flex;\n\talign-items: space-between;\n\tjustify-content: stretch;\n"]);return yt=function(){return e},e}function xt(){var e=Object(u.a)(["\n\tdisplay: flex;\n\ttext-align: center;\n\tjustify-content: space-between;\n\talign-items: flex-end;\n"]);return xt=function(){return e},e}var Ot=l.a.div(xt()),Et=l.a.div(yt()),kt=l.a.div(bt()),jt=l.a.h2(gt()),wt=l.a.div(ft()),Ct=l.a.div(vt(),(function(e){return"undefined"!==typeof e.flex?e.flex:1})),St=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props;return i.a.createElement(Et,{className:"Controls"},i.a.createElement(kt,null,i.a.createElement(Ct,{flex:"0 0 auto"},i.a.createElement(jt,null,"Master"),i.a.createElement(wt,null,i.a.createElement(le,{decimals:2,label:"Gain",unit:"",module:"amp",param:"gain",min:0,max:1,default:1,value:e.amp.gain}),i.a.createElement(le,{snap:1,label:"Octave",unit:"",module:"general",param:"octave",min:-3,max:3,default:0,value:e.general.octave}),i.a.createElement(le,{label:"Glide",decimals:2,unit:"s",module:"general",param:"glide",min:0,max:3,default:0,value:e.general.glide}))),i.a.createElement(mt,null),i.a.createElement(Ct,null,i.a.createElement(jt,null,"POWER"),i.a.createElement(wt,null,i.a.createElement(W,{module:"power",value:e.power.active})))),e.vco.map((function(t,n){return i.a.createElement(kt,{key:"vco_".concat(n)},i.a.createElement(Ct,null,i.a.createElement(jt,{key:"vco_title_".concat(n)},"VCO ",n+1),i.a.createElement(wt,null,i.a.createElement(le,{key:"vco_semitones_".concat(n),snap:1,label:"semitones",module:"vco",moduleIndex:n,param:"semitones",min:-24,max:24,default:0,value:e.vco[n].semitones}),i.a.createElement(le,{key:"vco_detune_".concat(n),label:"detune",unit:"ct",module:"vco",moduleIndex:n,param:"detune",min:-50,max:50,default:0,value:e.vco[n].detune}),i.a.createElement(De,{key:"vco_gain2_".concat(n),label:"Gain",module:"vco",moduleIndex:n,param:"gain",min:0,max:1,default:1,value:e.vco[n].gain}),i.a.createElement(Ge,{key:"vco_shape_".concat(n),label:"Type",module:"vco",moduleIndex:n,param:"type",value:e.vco[n].type}))))})),i.a.createElement(kt,null,i.a.createElement(Ct,{flex:1.2},i.a.createElement(jt,null,"FILTER"),i.a.createElement(wt,null,i.a.createElement(Ot,null,i.a.createElement(le,{label:"Cutoff",log:!0,unit:"Hz",module:"filter",size:90,param:"frequency",min:100,max:2e4,default:300,value:e.filter.frequency}),i.a.createElement(le,{label:"Resonance",module:"filter",param:"resonance",min:0,max:100,default:0,value:e.filter.resonance}),i.a.createElement(le,{label:"EG INT",unit:"%",module:"filterEnvelope",param:"intensity",min:-100,max:100,default:0,value:e.filterEnvelope.intensity})))),i.a.createElement(Ct,{flex:1},i.a.createElement(jt,null,"FILTER EG"),i.a.createElement(wt,null,i.a.createElement(Ot,null,i.a.createElement(le,{label:"Attack",decimals:2,unit:"s",module:"filterEnvelope",param:"attack",log:!0,min:.001,max:10,value:e.filterEnvelope.attack}),i.a.createElement(le,{label:"Decay",decimals:2,unit:"s",module:"filterEnvelope",param:"decay",log:!0,min:.001,max:10,value:e.filterEnvelope.decay}),i.a.createElement(le,{label:"Sustain",unit:"%",module:"filterEnvelope",param:"sustain",min:0,max:100,value:e.filterEnvelope.sustain}),i.a.createElement(le,{label:"Release",decimals:2,unit:"s",module:"filterEnvelope",param:"release",log:!0,min:.001,max:10,value:e.filterEnvelope.release})))),i.a.createElement(Ct,{flex:1},i.a.createElement(jt,null,"AMP EG"),i.a.createElement(wt,null,i.a.createElement(Ot,null,i.a.createElement("div",null,i.a.createElement(le,{label:"Attack",decimals:2,unit:"s",module:"envelope",param:"attack",log:!0,min:.001,max:10,value:e.envelope.attack})),i.a.createElement("div",null,i.a.createElement(le,{label:"Decay",decimals:2,unit:"s",module:"envelope",param:"decay",log:!0,min:.001,max:10,value:e.envelope.decay})),i.a.createElement("div",null,i.a.createElement(le,{label:"Sustain",unit:"%",module:"envelope",param:"sustain",min:0,max:100,value:e.envelope.sustain})),i.a.createElement("div",null,i.a.createElement(le,{label:"Release",decimals:2,unit:"s",module:"envelope",param:"release",log:!0,min:.001,max:10,value:e.envelope.release}))))),i.a.createElement(Ct,{style:{flex:"none"}},i.a.createElement(ot,null))))}}]),n}(i.a.Component),Tt=Object(f.b)((function(e){return Object(s.a)({},e.state)}),null)(St);function Mt(){var e=Object(u.a)(["\n\tdisplay: flex;\n\talign-items: space-between;\n\tjustify-content: stretch;\n\tflex-direction: column;\n\n\tbackground: #313131;\n\tbox-shadow: 0 12px 25px 0 rgba(0, 0, 0, 0.21),\n\t\t0 52px 54px 0 rgba(0, 0, 0, 0.12), inset 0 -1px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 1px 0 0 rgba(255, 255, 255, 0.13);\n\tborder-radius: 3px;\n\tpadding: 30px;\n\tpadding-top: 25px;\n\tposition: relative;\n\tz-index: 1;\n\tmargin: 10px 0;\n"]);return Mt=function(){return e},e}function At(){var e=Object(u.a)(["\n\tmargin-bottom: 5px;\n\tpadding-left: 8px;\n"]);return At=function(){return e},e}function qt(){var e=Object(u.a)(["\n\tdisplay: flex;\n\tbackground: #9e5934;\n\tbackground-image: linear-gradient(\n\t\t180deg,\n\t\trgba(0, 0, 0, 0.04) 3%,\n\t\trgba(0, 0, 0, 0.18) 100%\n\t);\n\tbox-shadow: 0 12px 25px 0 rgba(0, 0, 0, 0.25),\n\t\t0 52px 54px 0 rgba(0, 0, 0, 0.2), inset -1px -2px 0 0 rgba(0, 0, 0, 0.5),\n\t\tinset 0 2px 1px 0 rgba(255, 255, 255, 0.13);\n\tborder-radius: 4px 4px 4px 4px 0;\n\twidth: 50px;\n\tz-index: 9;\n\tposition: relative;\n\tbackground-size: cover;\n\tborder-radius: 4px;\n"]);return qt=function(){return e},e}function Dt(){var e=Object(u.a)(["\n\tdisplay: flex;\n\twidth: 1200px;\n\theight: 820px;\n\tmin-height: 800px;\n\tmargin-top: -15px;\n\t@media (max-width: 1240px), (max-height: 870px) {\n\t\ttransform: scale(0.9);\n\t}\n\t@media (max-width: 1140px), (max-height: 780px) {\n\t\ttransform: scale(0.8);\n\t}\n\t@media (max-width: 1100px), (max-height: 700px) {\n\t\ttransform: scale(0.75);\n\t}\n"]);return Dt=function(){return e},e}var It=l.a.div(Dt()),Lt=l.a.div(qt()),Nt=l.a.div(At()),Pt=l.a.div(Mt());var Rt=function(){return i.a.createElement(It,null,i.a.createElement(Lt,{style:{backgroundImage:"url(images/wood-1.jpg)"}}),i.a.createElement(Pt,null,i.a.createElement(Nt,null,i.a.createElement("img",{alt:"Subtract one",src:"images/logo.svg"})),i.a.createElement(Tt,null)),i.a.createElement(Lt,{style:{backgroundImage:"url(images/wood-2.jpg)"}}))},zt=n(3),_t=n.n(zt),Ft=n(36),Vt=n(10);function Bt(){var e=Object(u.a)([""]);return Bt=function(){return e},e}function Ut(){var e=Object(u.a)(["\n\ttext-transform: uppercase;\n\tfont-size: 12px;\n\n\tletter-spacing: 2px;\n\tposition: absolute;\n\tbottom: 20px;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tleft: 20px;\n\tright: 20px;\n\tspan {\n\t\topacity: 0.5;\n\t}\n\tbutton,\n\ta {\n\t\topacity: 0.5;\n\t\tcolor: white;\n\t\ttext-decoration: none;\n\t\tdisplay: inline-block;\n\t\tborder: none;\n\t\ttext-transform: uppercase;\n\t\tfont-size: 12px;\n\t\tletter-spacing: 2px;\n\n\t\tborder-bottom: 1px dashed;\n\t\tbackground: none;\n\t\toutline: none;\n\t\tdisplay: inline;\n\t\tpadding: 0;\n\n\t\tcursor: pointer;\n\t\t&:hover {\n\t\t\topacity: 0.8;\n\t\t}\n\t}\n"]);return Ut=function(){return e},e}var Ht=l.a.div(Ut()),Gt=Object(l.a)(D.b.div)(Bt());var Yt=Object(f.b)((function(e){return Object(s.a)({},e.state.onboarding)}),(function(e){return Object(q.a)({onboardingReset:T,sharePatch:M},e)}))((function(e){var t=e.onboardingReset,n=(e.setPatchLink,e.show),a=e.sharePatch,r={animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}};function o(){return(o=Object(Vt.a)(_t.a.mark((function e(){var t,n,i,r,o;return _t.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://subtract.one",t=Xe.getState(),n=t.state,n.power,n.keyboard,n.sequencer,n.amp,n.meta,n.oscilloscope,n.onboarding,i=Object(Ft.a)(n,["power","keyboard","sequencer","amp","meta","oscilloscope","onboarding"]),r=JSON.stringify(i),"0fd40510df1fb0a5d106d8c02e61eb92145390ca",o="https://subtract.one#"+encodeURIComponent(r),console.log(o),e.next=9,fetch("https://api-ssl.bitly.com/v4/shorten",{method:"POST",headers:new Headers({Authorization:"Bearer ".concat("0fd40510df1fb0a5d106d8c02e61eb92145390ca"),"Content-Type":"application/json"}),body:JSON.stringify({long_url:o})}).then((function(e){return e.json()})).then((function(e){console.log(e.link),a(e.link)}),(function(e){alert("Something went wrong")}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return i.a.createElement(Ht,null,i.a.createElement(D.a,null,n&&[i.a.createElement(Gt,r,i.a.createElement("button",{onClick:t},"How to use ")),i.a.createElement(Gt,r,i.a.createElement("span",null,"Code by "),i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com/juliussohn"},"Julius Sohn"),"\xa0",i.a.createElement("span",null,"Reverse by "),i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.linkedin.com/in/jakichen/"},"Jaki Chen")),i.a.createElement(Gt,r,i.a.createElement("button",{onClick:function(){return o.apply(this,arguments)}},"Share Patch ")," ")]))}));function Wt(){var e=Object(u.a)(["\n\tdisplay: flex;\n"]);return Wt=function(){return e},e}function Kt(){var e=Object(u.a)(["\n\tdisplay: flex;\n\tmargin-bottom: 30px;\n\talign-items: flex-end;\n"]);return Kt=function(){return e},e}function Jt(){var e=Object(u.a)(["\n\tmargin-left: 70px;\n\tfont-size: 16px;\n\tline-height: 1.5;\n\tmargin-top: 0;\n\tmargin-bottom: 5px;\n\tcolor: #a8a8a8;\n"]);return Jt=function(){return e},e}function Xt(){var e=Object(u.a)(["\n\tdisplay: flex;\n\tflex: 1;\n"]);return Xt=function(){return e},e}function Qt(){var e=Object(u.a)(["\n\tcursor: pointer;\n\tflex-shrink: 0;\n\theight: 58px;\n\twidth: 58px;\n\tborder-radius: 4px;\n\tbackground-color: #333333;\n\tmargin-left: 12px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\timg {\n\t\twidth: 30px;\n\t}\n\t&:hover {\n\t\tbackground-color: #444444;\n\t}\n"]);return Qt=function(){return e},e}function Zt(){var e=Object(u.a)(['\n\tfont-family: "Syne Bold";\n\tfont-size: 50px;\n\tmargin: 0;\n\tfont-weight: bold;\n']);return Zt=function(){return e},e}function $t(){var e=Object(u.a)(["\n\tposition: absolute;\n\ttop: 20px;\n\tright: 20px;\n\topacity: 0.5;\n\tcursor: pointer;\n\t&:hover {\n\t\topacity: 0.8;\n\t}\n"]);return $t=function(){return e},e}function en(){var e=Object(u.a)(["\n\tborder: 1px solid #333333;\n\tbox-sizing: border-box;\n\tborder-top-left-radius: 4px;\n\tborder-bottom-left-radius: 4px;\n\tbackground: none;\n\tpadding: 12px;\n\tcolor: white;\n\tfont-size: 20px;\n\toutline: none;\n\tmargin-right: 0;\n\tflex: 1;\n\twidth: auto;\n\tdisplay: block;\n\tmin-width: 0;\n"]);return en=function(){return e},e}function tn(){var e=Object(u.a)(["\n\tpadding: 16px;\n\tborder-top-right-radius: 4px;\n\tborder-bottom-right-radius: 4px;\n\tbackground: #333333;\n\tfont-size: 14px;\n\ttext-transform: uppercase;\n\tfont-weight: 600;\n\tcolor: white;\n\tborder: none;\n\toutline: none;\n\twidth: 120px;\n\tcursor: pointer;\n\t&:hover {\n\t\tbackground-color: #444444;\n\t}\n"]);return tn=function(){return e},e}function nn(){var e=Object(u.a)(["\n\tbackground-color: #141414;\n\tpadding: 60px;\n\tborder-radius: 10px;\n\tbox-shadow: 0px 24px 44px rgba(0, 0, 0, 0.15);\n\tposition: relative;\n\twidth: 640px;\n\tposition: fixed;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translateX(-50%) translateY(-50%);\n\tz-index: 999;\n"]);return nn=function(){return e},e}function an(){var e=Object(u.a)(["\n\tbackground-color: rgba(0, 0, 0, 0.3);\n\tposition: fixed;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0%;\n\tright: 0;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tz-index: 99;\n"]);return an=function(){return e},e}var rn=Object(l.a)(D.b.div)(an()),on=Object(l.a)(D.b.div)(nn()),sn=l.a.button(tn()),cn=l.a.input(en()),un=l.a.a($t()),ln=l.a.div(Zt()),pn=l.a.a(Qt()),dn=l.a.div(Xt()),hn=l.a.p(Jt()),mn=l.a.div(Kt()),vn=l.a.div(Wt());var fn=Object(f.b)((function(e){return Object(s.a)(Object(s.a)({},e.state.onboarding),e.state.meta)}),(function(e){return Object(q.a)({closeShareModal:A},e)}))((function(e){var t=e.shareModal,n=e.patchLink,r=e.closeShareModal,o=Object(a.useState)("Copy Link"),s=Object(c.a)(o,2),u=s[0],l=s[1];return i.a.createElement(D.a,null,t&&[i.a.createElement(rn,{key:"overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),i.a.createElement(on,{key:"modal",initial:{y:"-35%",x:"-50%",opacity:0},animate:{y:"-50%",x:"-50%",opacity:1},exit:{y:"-35%",x:"-50%",opacity:0},onAnimationComplete:function(){l("Copy Link")},transition:{type:"spring",stiffness:100,damping:300}},i.a.createElement(un,{onClick:function(){r()}},i.a.createElement("img",{alt:"close",src:"/images/x.svg"})),i.a.createElement(mn,null,i.a.createElement("div",null,i.a.createElement(ln,null,"Share Patch")),i.a.createElement(hn,null,"When opening the link below, all settings will be preserved and the synth will create the exact same sound.")),i.a.createElement(vn,null,i.a.createElement(dn,null,i.a.createElement(cn,{type:"text",readonly:!0,value:n}),i.a.createElement(sn,{onClick:function(){var e=document.createElement("textarea");e.value=n,e.setAttribute("readonly",""),e.style={position:"absolute",left:"-9999px"},document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),l("Copied!")}},u)),i.a.createElement(pn,{target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com/intent/tweet?url=".concat(n)},i.a.createElement("img",{alt:"Twitter",src:"/images/twitter.svg"})),i.a.createElement(pn,{target:"_blank",rel:"noopener noreferrer",href:"https://www.facebook.com/sharer/sharer.php?u=".concat(n)},i.a.createElement("img",{alt:"Facebook",src:"/images/facebook.svg"}))))])})),gn=n(13);function bn(){var e=Object(u.a)(["\n\tcursor: pointer;\n"]);return bn=function(){return e},e}function yn(){var e=Object(u.a)(["\n\tposition: absolute;\n\tbottom: 0;\n\tleft: 30px;\n"]);return yn=function(){return e},e}function xn(){var e=Object(u.a)(["\n\tposition: absolute;\n\ttext-align: right;\n\tfont-size: 40px;\n\tleft: 0px;\n\tbottom: 0px;\n\twidth: 30px;\n"]);return xn=function(){return e},e}function On(){var e=Object(u.a)(["\n\twidth: 20px;\n\tposition: absolute;\n\tbottom: 0;\n"]);return On=function(){return e},e}function En(){var e=Object(u.a)(["\n\tdisplay: flex;\n\theight: 20px;\n\tfont-size: 20px;\n\tletter-spacing: 8px;\n\tline-height: 1;\n\tposition: relative;\n\twidth: 100px;\n\toverflow: hidden;\n\theight: 40px;\n"]);return En=function(){return e},e}function kn(){var e=Object(u.a)(["\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tposition: relative;\n\tz-index: 10;\n"]);return kn=function(){return e},e}var jn=l.a.div(kn()),wn=l.a.div(En()),Cn=l.a.div(On()),Sn=Object(l.a)(D.b.div)(xn()),Tn=l.a.div(yn()),Mn=Object(l.a)(D.b.div)(bn()),An={rest:{strokeDasharray:170,strokeDashoffset:170,rotate:0,stroke:"white"},hover:{rotate:270,strokeDashoffset:0},loading:{strokeDasharray:170,strokeDashoffset:170,rotate:900}},qn={rest:{opacity:.8,translateX:0},hover:{opacity:1,translateX:0},tap:{},loading:{opacity:[1,1,0,0,1],translateX:[0,200,200,-200,-200],transition:{duration:2,times:[0,.3,.4,.6,1]}}},Dn=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={hover:!1,state:"rest"},a.onTap=a.onTap.bind(Object(gn.a)(a)),a.onHoverStart=a.onHoverStart.bind(Object(gn.a)(a)),a.onHoverEnd=a.onHoverEnd.bind(Object(gn.a)(a)),a.onTapStart=a.onTapStart.bind(Object(gn.a)(a)),a}return Object(h.a)(n,[{key:"onTap",value:function(){var e=this;"loading"!==this.state.state&&(this.props.onClick(),this.setState({state:"loading"}),setTimeout((function(){e.setState({state:e.state.hover?"hover":"rest"})}),2e3))}},{key:"onHoverStart",value:function(){this.setState({hover:!0}),"loading"!==this.state.state&&this.setState({state:"hover"})}},{key:"onHoverEnd",value:function(){this.setState({hover:!1}),"loading"!==this.state.state&&this.setState({state:"rest"})}},{key:"onTapStart",value:function(){"loading"!==this.state.state&&this.setState({state:"tap"})}},{key:"render",value:function(){var e=this.state.state;return i.a.createElement(Mn,{onHoverEnd:this.onHoverEnd,onTapStart:this.onTapStart,onHoverStart:this.onHoverStart,onTap:this.onTap,transition:{damping:300,type:"spring"},initial:"rest"},i.a.createElement("svg",{width:"54",height:"54",viewBox:"0 0 54 54",fill:"none"},i.a.createElement("circle",{cx:"27",cy:"27",r:"26.5",stroke:"grey"}),i.a.createElement(D.b.circle,{transition:{damping:300,type:"spring",mass:2},animate:e,variants:An,cx:"27",cy:"27",r:"26.5",stroke:"white"}),i.a.createElement(D.b.path,{transition:{damping:300,type:"spring",mass:2},animate:e,variants:qn,d:"M32.7895 21.12L31.1395 22.74L34.5895 26.52H16.4395V28.77H34.5895L31.1395 32.55L32.7895 34.17L38.6995 27.63L32.7895 21.12Z",fill:"#ffffff"})))}}]),n}(i.a.Component),In=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={prevStep:0,animating:!1},a.totalSteps=3,a.onPressNext=a.onPressNext.bind(Object(gn.a)(a)),a}return Object(h.a)(n,[{key:"renderCounter",value:function(){var e=this,t=this.props.currentStep,n=this.state.animating,a={type:"spring",damping:300,mass:2};return i.a.createElement(wn,null,i.a.createElement(Cn,null,n&&i.a.createElement(Sn,{key:t,animate:{y:"-100%"},transition:a},t),n&&i.a.createElement(Sn,{key:t+1,initial:{y:"100%"},animate:{y:0},onAnimationComplete:function(){e.setState({animating:!1})},transition:a},t+1),!n&&i.a.createElement(Sn,null,t+1)),i.a.createElement(Tn,null,"/",this.totalSteps))}},{key:"onPressNext",value:function(){var e=this.props,t=e.currentStep,n=e.onboardingNextStep,a=e.onboardingFinish;t<2?n():(!function(e){try{localStorage.setItem("onboardingState",e)}catch(t){}}(!0),a())}},{key:"render",value:function(){return i.a.createElement(jn,null,this.renderCounter(),i.a.createElement(Dn,{onClick:this.onPressNext}))}},{key:"componentDidUpdate",value:function(e){e.currentStep!==this.props.currentStep&&this.setState({animating:!0,prevStep:e.currentStep})}}]),n}(i.a.Component),Ln=Object(f.b)((function(e){return Object(s.a)({},e.state.onboarding)}),(function(e){return Object(q.a)({onboardingNextStep:S,onboardingFinish:C},e)}))(In);function Nn(){var e=Object(u.a)(["\n\tfont-size: 12px;\n\topacity: 0.6;\n\tmargin-top: 4px;\n"]);return Nn=function(){return e},e}function Pn(){var e=Object(u.a)(["\n\tmargin-top: 40px;\n\tfont-size: 16px;\n\tline-height: 145%;\n"]);return Pn=function(){return e},e}function Rn(){var e=Object(u.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\ttext-align: center;\n\tmargin-right: 90px;\n\twidth: 200px;\n\tmargin-top: 40px;\n\n\timg {\n\t\twidth: 100%;\n\t}\n"]);return Rn=function(){return e},e}function zn(){var e=Object(u.a)(["\n\tposition: relative;\n\tdisplay: flex;\n\talign-self: flex-start;\n"]);return zn=function(){return e},e}function _n(){var e=Object(u.a)(["\n\tbackground: white;\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tpointer-events: none;\n\topacity: 1;\n"]);return _n=function(){return e},e}function Fn(){var e=Object(u.a)(["\n\tposition: relative;\n\talign-self: flex-start;\n"]);return Fn=function(){return e},e}function Vn(){var e=Object(u.a)(["\n\tposition: relative;\n"]);return Vn=function(){return e},e}function Bn(){var e=Object(u.a)([""]);return Bn=function(){return e},e}function Un(){var e=Object(u.a)(["\n\tfont-family: Arimo;\n\tfont-style: normal;\n\tfont-weight: normal;\n\tfont-size: 20px;\n\tline-height: 1.55;\n\tmargin: 0;\n\topacity: 1;\n"]);return Un=function(){return e},e}function Hn(){var e=Object(u.a)(["\n\tmargin-bottom: 40px;\n"]);return Hn=function(){return e},e}var Gn=Object(l.a)(D.b.h1)(Hn()),Yn=Object(l.a)(D.b.p)(Un()),Wn=l.a.div(Bn()),Kn=l.a.div(Vn()),Jn=l.a.div(Fn()),Xn=Object(l.a)(D.b.div)(_n()),Qn=77,Zn=24,$n=7,ea=.06,ta=.5,na="easeInOut",aa=l.a.div(zn()),ia=Object(l.a)(D.b.div)(Rn()),ra=l.a.div(Pn()),oa=l.a.div(Nn()),sa=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={show:!1,headlineBarCount:0,paragraphBarCount:0,finished:{paragraph:!1,headline:!1,images:!a.props.images}},a}return Object(h.a)(n,[{key:"isCurrent",value:function(){return this.props.show&&this.state.show}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.animating,a=t.show;e.animating!==n&&!n&&a&&this.show()}},{key:"componentDidMount",value:function(){this.props.show&&this.show()}},{key:"show",value:function(){var e=this;this.setState({show:!0},(function(){var t=e.headlineContainer.getBoundingClientRect().height,n=Math.ceil(t/(Qn+$n+.5*$n)),a=e.paragraphContainer.getBoundingClientRect().height,i=Math.ceil(a/(Zn+$n+.5*$n));console.log(i),e.setState({headlineBarCount:n,paragraphBarCount:i})}))}},{key:"setBars",value:function(){var e=this.props.barHeight,t=this.container.getBoundingClientRect().height,n=Math.ceil(t/(e+$n+.5*$n));this.setState({barCount:n})}},{key:"barAnimationComplete",value:function(e){this.props.isVisible||e!==this.state.barCount-1||alert("done")}},{key:"getTransition",value:function(e){var t=ea*e,n=2*ta+t,a=ta/n;return{ease:na,times:[0,a,a+t/n,1],duration:n}}},{key:"getBars",value:function(e,t,n){var a=this,r=this.getTransition(t);return Object(st.a)(Array(t)).map((function(o,c){var u=c*(e+$n)+.5*$n,l=c*ea;return i.a.createElement(Xn,{key:"bar_".concat(c),style:{height:"".concat(e,"px"),top:"".concat(u,"px")},initial:{left:"0%",right:"100%"},animate:{left:["0%","0%","0%","100%"],right:["100%","0%","0%","0%"]},exit:{left:["100%","0%","0%","0%"],right:["0%","0%","0%","100%"]},transition:Object(s.a)(Object(s.a)({},r),{},{delay:l}),onAnimationComplete:function(){!function(e){e!==t-1||a.isCurrent()||n()}(c)}})}))}},{key:"getText",value:function(e,t,n){var a=this.getTransition(n),r=ea*(n-1),o=t;return i.a.createElement(o,{ref:"text",initial:{opacity:0},animate:{opacity:[0,0,1,1]},exit:{opacity:[1,1,0,0]},transition:Object(s.a)(Object(s.a)({},a),{},{ease:"linear",delay:r})},e)}},{key:"getImages",value:function(){var e=this,t=this.props.images;if(t)return t.map((function(t,n){return i.a.createElement(ia,{key:n,initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:30},transition:{delay:.3+.2*n,y:{type:"spring",stiffness:100}},onAnimationComplete:function(){e.animationComplete("images")}},i.a.createElement("img",{alt:t.text,src:"/images/".concat(t.image)}),i.a.createElement(ra,null,t.text),t.small&&i.a.createElement(oa,null,t.small))}))}},{key:"animationComplete",value:function(e){var t=this;this.setState({finished:Object(s.a)(Object(s.a)({},this.state.finished),{},Object(Ye.a)({},e,!0))},(function(){var e=t.state.finished,n=e.paragraph,a=e.headline,i=e.images;n&&a&&i&&setTimeout(t.props.onboardingAnimationComplete,300)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.headlineBarCount,a=t.paragraphBarCount,r=this.props,o=r.headline,s=r.children;return i.a.createElement(Wn,null,i.a.createElement(Kn,{ref:function(t){e.headlineContainer=t}},i.a.createElement(D.a,null,this.isCurrent()&&this.getBars(Qn,n,(function(){e.animationComplete("headline")})),this.isCurrent()&&this.getText(o,Gn,n))),i.a.createElement(Jn,{ref:function(t){e.paragraphContainer=t}},i.a.createElement(D.a,null,this.isCurrent()&&this.getBars(Zn,a,(function(){e.animationComplete("paragraph")})),this.isCurrent()&&this.getText(s,Yn,a))),i.a.createElement(aa,null,i.a.createElement(D.a,null,this.isCurrent()&&this.getImages())))}}]),n}(i.a.Component),ca=Object(f.b)((function(e){return Object(s.a)({},e.state.onboarding)}),(function(e){return Object(q.a)({onboardingAnimationComplete:w},e)}))(sa);function ua(){var e=Object(u.a)(["\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0%;\n\tbottom: 0;\n\tmin-width: 600px;\n\twidth: 45%;\n\tpadding: 110px;\n\tjustify-content: space-between;\n\tflex-direction: column;\n\tz-index: 99;\n\tdisplay: flex;\n\t@media (max-height: 800px) {\n\t\tpadding: 60px;\n\t}\n"]);return ua=function(){return e},e}var la=Object(l.a)(D.b.div)(ua());var pa=Object(f.b)((function(e){return Object(s.a)({},e.state.onboarding)}),null)((function(e){var t=e.finished,n=e.currentStep;return i.a.createElement(D.a,{initial:!1},!t&&i.a.createElement(la,{initial:{x:"0%",opacity:1},animate:{x:"0%",opacity:1},exit:{x:"-100%",opacity:0},transition:{type:"spring",stiffness:100,mass:2}},i.a.createElement(Ln,null),i.a.createElement("div",null,i.a.createElement(ca,{headline:"SUBTRACT ONE",show:0===n},"This is Subtract One, an analog inspired, subtractive, monophonic synthesizer, powered by 3 oscillators, a filter, and two envelope generators, controlling the amplitude and the filter. It\u2019s completely written in JavaScript, using the Web Audio API."),i.a.createElement(ca,{headline:"Playing a note",show:1===n,images:[{image:"keyboard.png",text:"Use your keyboard"},{image:"midi-keyboard.png",text:"Connect a MIDI Device",small:"Only in Chrome"}]},"As you see, there is no piano roll attached to the synthesizer. That\u2019s a very common thing. These types of synthesizers are called modules and are controlled by external devices like keyboards or sequencers."),i.a.createElement(ca,{headline:"Changing the sound",show:2===n,images:[{image:"knobs.png",text:"Turn some knobs"},{image:"presets.png",text:"Try & modify a preset."}]},"Analog synthesizers offer an indefinite amount of different sounds. You can create heavy bass sounds, bright bells, atmospheric pads and so much more."))))}));function da(){var e=Object(u.a)(["\n\twidth: 80%;\n\tmax-width: 500px;\n\tpadding: 20px;\n\tposition: fixed;\n\ttop: 20px;\n\tleft: 20px;\n"]);return da=function(){return e},e}function ha(){var e=Object(u.a)(["\n\twidth: 100vw;\n\theight: 100%;\n\toverflow: hidden;\n\tpadding: 50px;\n\talign-items: center;\n\tjustify-content: space-around;\n\tdisplay: flex;\n\tflex-direction: column;\n\tpointer-events: ",";\n"]);return ha=function(){return e},e}function ma(){var e=Object(u.a)(["\n\talign-items: center;\n\t/*justify-content:center;*/\n\theight: ","px;\n\twidth: 100vw;\n\talign-items: stretch;\n\toverflow: hidden;\n"]);return ma=function(){return e},e}var va=l.a.div(ma(),(function(e){return e.height})),fa=Object(l.a)(D.b.div)(ha(),(function(e){return e.clickable?"auto":"none"})),ga=l.a.div(da()),ba={onboarding:{x:"45%"},onboardingSmall:{x:"100%"},default:{x:"0%"}};var ya=Object(f.b)((function(e){return Object(s.a)({},e.state.onboarding)}),null)((function(e){var t=e.finished,n=function(){var e="object"===typeof window;function t(){return{width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}}var n=Object(a.useState)(t),i=Object(c.a)(n,2),r=i[0],o=i[1];return Object(a.useEffect)((function(){if(!e)return!1;function n(){o(t())}return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}})),r}();return n.height<600||n.width<900?i.a.createElement(ga,null,i.a.createElement(ca,{headline:"Oh, Heck!",show:!0},"This screen is to small to properly shred. Those knobs would be tiny. How did you imagine this would work? Please open this site on a tablet or desktop device.")):i.a.createElement(va,{height:n.height},i.a.createElement(fn,null),i.a.createElement(R,null),i.a.createElement(pa,null),i.a.createElement(fa,{clickable:t,variants:ba,initial:t?"default":n.width<=1024?"onboardingSmall":"onboarding",animate:t?"default":n.width<=1024?"onboardingSmall":"onboarding",transition:{type:"spring",stiffness:60,damping:22}},i.a.createElement(Rt,null),i.a.createElement(Yt,{show:t})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(f.a,{store:Xe},i.a.createElement(ya,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[712,1,2]]]);
//# sourceMappingURL=main.daa6e890.chunk.js.map